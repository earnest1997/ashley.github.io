{"meta":{"title":"Ashley's blog","subtitle":null,"description":null,"author":"Ashley","url":"https://ashleyblog.xyz","root":"/ashley271017.github.io/"},"pages":[{"title":"","date":"2023-04-02T14:00:30.300Z","updated":"2023-04-02T14:00:30.300Z","comments":true,"path":"404.html","permalink":"https://ashleyblog.xyz/404.html","excerpt":"","text":"404 Not Found | Material X function setLoadingBarProgress(num) { document.getElementById('loading-bar').style.width=num+\"%\"; } Ashley's blog &nbsp;åšæ–‡ &nbsp;æ”¶è— &nbsp;å…³äº Material X &nbsp;ç¤ºä¾‹ &nbsp;åˆ†ç±» &nbsp;æ ‡ç­¾ &nbsp;è¿‘æœŸæ–‡ç«  &nbsp;æˆ‘çš„å‹é“¾ setLoadingBarProgress(40); 404 Not Found **å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨** å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤ &nbsp;Comments &nbsp;&nbsp;ç«™å†…å¯¼èˆª è¿‘æœŸæ–‡ç«  æˆ‘çš„å‹é“¾ &nbsp;&nbsp;Hot Tags BOM css css hooks es6 eslint - eslint git git sass hooks,react-router jsæŠ€å·§ nodeè¿›ç¨‹ nodeè¿›ç¨‹é€šä¿¡ æ¨¡å—åŒ– åŠ¨æ€å¼•å…¥ pm2 react hooks react-router react-router useeffect react-transition-group reactçŠ¶æ€ç®¡ç† sass css scss ts webpack å‰ç«¯å·¥å…· åŸºç¡€æŠ€èƒ½ æ•ˆç‡æå‡é…ç½® æ¨¡å—åŒ– æ­£åˆ™è¡¨è¾¾å¼ ç§»åŠ¨ç«¯é€‚é… é¢ç» é¡¹ç›®æ­å»º Ashley Â© 2018-2019 é„‚ICPå¤‡17030443å· æœ¬ç«™ä½¿ç”¨ Material X ä½œä¸ºä¸»é¢˜ , æ€»è®¿é—®é‡ä¸º æ¬¡ . setLoadingBarProgress(80); setLoadingBarProgress(60); var GOOGLE_CUSTOM_SEARCH_API_KEY = \"\"; var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = \"\"; var ALGOLIA_API_KEY = \"\"; var ALGOLIA_APP_ID = \"\"; var ALGOLIA_INDEX_NAME = \"\"; var AZURE_SERVICE_NAME = \"\"; var AZURE_INDEX_NAME = \"\"; var AZURE_QUERY_KEY = \"\"; var BAIDU_API_ID = \"\"; var SEARCH_SERVICE = \"hexo\" || \"hexo\"; var ROOT = \"/\"||\"/\"; if(!ROOT.endsWith('/'))ROOT += '/'; $(function() { const $reveal = $('.reveal'); if ($reveal.length === 0) return; const sr = ScrollReveal({ distance: 0 }); sr.reveal('.reveal'); }); $(function() { Waves.attach('.flat-btn', ['waves-button']); Waves.attach('.float-btn', ['waves-button', 'waves-float']); Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']); Waves.attach('.flat-box', ['waves-block']); Waves.attach('.float-box', ['waves-block', 'waves-float']); Waves.attach('.waves-image'); Waves.init(); }); $(function(){ if ('.cover') { $('.cover').backstretch( [\"/images/banner.jpg\"], { duration: \"6000\", fade: \"2500\" }); } else { $.backstretch( [\"/images/banner.jpg\"], { duration: \"6000\", fade: \"2500\" }); } }); var GUEST_INFO = ['nick','mail','link']; var guest_info = 'nick,mail,link'.split(',').filter(function(item){ return GUEST_INFO.indexOf(item) > -1 }); var notify = 'true' == true; var verify = 'true' == true; var valine = new Valine(); valine.init({ el: '#valine_container', notify: notify, verify: verify, guest_info: guest_info, path: \"/404.html\", appId: \"vu5VJ9hGtTUPkCsBP1ItVzg9-gzGzoHsz\", appKey: \"HfSu2jw0KjCyYYMydHTCArO2\", placeholder: \"è¯·ç•™è¨€å‘Šè¯‰æˆ‘æ‚¨è¦è®¿é—®å“ªä¸ªé¡µé¢æ‰¾ä¸åˆ°äº†\", pageSize:'10', avatar:'mp', lang:'zh-cn', highlight:'true' }) let COPY_SUCCESS = \"Copied\"; let COPY_FAILURE = \"Copy failed\"; /*é¡µé¢è½½å…¥å®Œæˆåï¼Œåˆ›å»ºå¤åˆ¶æŒ‰é’®*/ !function (e, t, a) { /* code */ var initCopyCode = function(){ var copyHtml = ''; copyHtml += ''; copyHtml += ' Copy'; copyHtml += ''; $(\".highlight .code pre\").before(copyHtml); var clipboard = new ClipboardJS('.btn-copy', { target: function(trigger) { return trigger.nextElementSibling; } }); clipboard.on('success', function(e) { //æ‚¨å¯ä»¥åŠ å…¥æˆåŠŸæç¤º console.info('Action:', e.action); console.info('Text:', e.text); console.info('Trigger:', e.trigger); success_prompt(COPY_SUCCESS); e.clearSelection(); }); clipboard.on('error', function(e) { //æ‚¨å¯ä»¥åŠ å…¥å¤±è´¥æç¤º console.error('Action:', e.action); console.error('Trigger:', e.trigger); fail_prompt(COPY_FAILURE); }); } initCopyCode(); }(window, document); /** * å¼¹å‡ºå¼æç¤ºæ¡†ï¼Œé»˜è®¤1.5ç§’è‡ªåŠ¨æ¶ˆå¤± * @param message æç¤ºä¿¡æ¯ * @param style æç¤ºæ ·å¼ï¼Œæœ‰alert-successã€alert-dangerã€alert-warningã€alert-info * @param time æ¶ˆå¤±æ—¶é—´ */ var prompt = function (message, style, time) { style = (style === undefined) ? 'alert-success' : style; time = (time === undefined) ? 1500 : time*1000; $('') .appendTo('body') .addClass('alert ' + style) .html(message) .show() .delay(time) .fadeOut(); }; // æˆåŠŸæç¤º var success_prompt = function(message, time) { prompt(message, 'alert-success', time); }; // å¤±è´¥æç¤º var fail_prompt = function(message, time) { prompt(message, 'alert-danger', time); }; // æé†’ var warning_prompt = function(message, time) { prompt(message, 'alert-warning', time); }; // ä¿¡æ¯æç¤º var info_prompt = function(message, time) { prompt(message, 'alert-info', time); }; let LAZY_LOAD_IMAGE = \"\"; $(\".article-entry\").find(\"fancybox\").find(\"img\").each(function () { var element = document.createElement(\"a\"); $(element).attr(\"data-fancybox\", \"gallery\"); $(element).attr(\"href\", $(this).attr(\"src\")); /* å›¾ç‰‡é‡‡ç”¨æ‡’åŠ è½½å¤„ç†æ—¶, * ä¸€èˆ¬å›¾ç‰‡æ ‡ç­¾å†…ä¼šæœ‰ä¸ªå±æ€§åæ¥å­˜æ”¾å›¾ç‰‡çš„çœŸå®åœ°å€ï¼Œæ¯”å¦‚ data-original, * é‚£ä¹ˆæ­¤å¤„å°†åŸæœ¬çš„å±æ€§åsrcæ›¿æ¢ä¸ºå¯¹åº”å±æ€§ådata-original, * ä¿®æ”¹å¦‚ä¸‹ */ if (LAZY_LOAD_IMAGE) { $(element).attr(\"href\", $(this).attr(\"data-original\")); } $(this).wrap(element); }); setLoadingBarProgress(100); if ('serviceWorker' in navigator) { navigator.serviceWorker.register('/sw.js?t=1680508050137') .then(function () {console.log('ServiceWorker Register Successfully.')}) .catch(function (e) {console.error(e)}); }"},{"title":"","date":"2023-04-02T14:00:30.303Z","updated":"2023-04-02T14:00:30.303Z","comments":true,"path":"manifest.json","permalink":"https://ashleyblog.xyz/manifest.json","excerpt":"","text":"{\"name\":\"Ashley's Blog\",\"short_name\":\"blog\",\"theme_color\":\"#2196f3\",\"background_color\":\"#2196f3\",\"display\":\"fullscreen\",\"orientation\":\"portrait\",\"Scope\":\"/\",\"start_url\":\"/\",\"icons\":[{\"src\":\"images/icons/icon-72x72.png\",\"sizes\":\"72x72\",\"type\":\"image/png\"}],\"splash_pages\":null}"},{"title":"","date":"2023-04-02T14:00:30.286Z","updated":"2023-04-02T14:00:30.285Z","comments":true,"path":"archive/index.html","permalink":"https://ashleyblog.xyz/archive/index.html","excerpt":"","text":""},{"title":"404 Not Found","date":"2023-04-02T14:00:30.305Z","updated":"2023-04-02T14:00:30.305Z","comments":true,"path":"404/index.html","permalink":"https://ashleyblog.xyz/404/index.html","excerpt":"","text":"404 Not Found **å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨** å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"},{"title":"å…³äº","date":"2023-04-02T14:00:30.301Z","updated":"2023-04-02T14:00:30.301Z","comments":true,"path":"about/index.html","permalink":"https://ashleyblog.xyz/about/index.html","excerpt":"","text":"å…³äºæœ¬ç«™ ä¸»è¦ç”¨äºè®°å½•æ—¥å¸¸å¼€å‘ä¸­çš„æ”¶è·ä¸å­¦åˆ°çš„æ–°æŠ€èƒ½ï½ï½ä¹‹å‰æ˜¯ä¸æœ‹å‹ä¸€èµ·ç»´æŠ¤ä¸€ä¸ªå«åšfrontnoteçš„githubä»“åº“ ä½†æ˜¯å‘ç°è®°çš„å¤ªä¹±å†²çªå¤ªå¤šäº†ã€‚ã€‚ å·²å‡çº§https,æ”¯æŒPWA~ ä¸‹ä¸€æ­¥:æ¥å…¥ç™¾åº¦ç»Ÿè®¡ ä¼˜åŒ–seoâ€¦ Day Day up~"},{"title":"collect","date":"2019-09-01T06:48:25.000Z","updated":"2023-04-02T14:00:30.285Z","comments":true,"path":"collect/index.html","permalink":"https://ashleyblog.xyz/collect/index.html","excerpt":"","text":"node ä»é›¶å¼€å‘ä¸€ä¸ªnodeå‘½ä»¤è¡Œå·¥å…· nodeè¿›ç¨‹ ä½ å¯èƒ½æƒ³çŸ¥é“çš„ Node å­è¿›ç¨‹æ¨¡å— ä½ åº”è¯¥çŸ¥é“çš„Node.jså­è¿›ç¨‹ Node.js å­è¿›ç¨‹ï¼šä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ Node JSåç«¯é¡¹ç›®å¼€å‘ä¸ç”Ÿäº§ç¯å¢ƒæ€»ç»“ nodeæµ Node.js æµ: ä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ webpack webpack 4 Code Splitting çš„ splitChunks é…ç½®æ¢ç´¢ - è…¾è®¯Webå‰ç«¯ IMWeb å›¢é˜Ÿç¤¾åŒº | blog | å›¢é˜Ÿåšå®¢ webpackå¤šå…¥å£æ–‡ä»¶ è¦ç‚¹ glob.sync docker å‘½ä»¤è¯´æ˜ Â· Docker â€”â€” ä»å…¥é—¨åˆ°å®è·µ flutter (1) Flutter çŠ¶æ€ç®¡ç†ä¹‹ Scoped Model &amp; Redux - æ˜é‡‘ Flutter Â· è¯­é›€ é¢è¯•å¿…å¤‡è®¡ç®—æœºåŸºç¡€ http2 pwa service workerä»‹ç» ç”Ÿæˆmanifest.json service workerç”Ÿå‘½å‘¨æœŸ service workerç¦»çº¿ç¼“å­˜ å¸¸è§é—®é¢˜ è·¨åŸŸé—®é¢˜ SEO ä½œä¸ºå‰ç«¯ï¼Œä½ ä¸å¾—ä¸çŸ¥é“çš„æœç´¢å¼•æ“ä¼˜åŒ– å‰ç«¯æ€§èƒ½ç›‘æ§ å‰ç«¯é”™è¯¯ç›‘æ§ä¸æ”¶é›†æ¢ç©¶ å¦‚ä½•åˆ†æç½‘é¡µæ€§èƒ½ç“¶é¢ˆ"},{"title":"æˆ‘çš„æœ‹å‹ä»¬","date":"2023-04-02T14:00:30.304Z","updated":"2023-04-02T14:00:30.304Z","comments":true,"path":"friends/index.html","permalink":"https://ashleyblog.xyz/friends/index.html","excerpt":"","text":""},{"title":"","date":"2023-04-02T14:00:30.303Z","updated":"2023-04-02T14:00:30.303Z","comments":true,"path":"private/index.html","permalink":"https://ashleyblog.xyz/private/index.html","excerpt":"","text":"å‰ç«¯é…ç½®æœ¬åœ°ä»£ç†æ–¹æ³•æ€»ç»“ https://juejin.im/post/5c0a6be4f265da616f6fc79c123456789101112131415161718192021devServer: &#123; proxy: &#123; '/api': &#123; // éœ€è¦ç›´æ¥ä»£ç†åˆ°çº¿ä¸Šç¯å¢ƒçš„æ¥å£ target: 'http://ad.server.com', changeOrigin: true, headers: &#123; // åç«¯è¦æ ¡éªŒè¯·æ±‚æºï¼Œé‚£æ”¹ä¸‹ host æˆ–è€… origin ä¸å°±ç¾æ»‹æ»‹äº†ï¼Ÿ Host: 'ad.server.com', Origin: 'ad.server.com' &#125;, &#125;, '/apitest': &#123; // éœ€è¦ä¸åç«¯è”è°ƒçš„æ¥å£ target: '10.8.0.1:9909',// åç«¯æœ¬åœ°å¼€å‘ç¯å¢ƒ &#125;, '/iframe': &#123; target: 'http://localhost:8085', &#125; // å¦å¤–è¿˜æœ‰ iframe é‡Œçš„ api è°ƒç”¨æŒ‡å‘çº¿ä¸Šç¯å¢ƒ &#125; &#125; ç„¶è€Œï¼Œåç«¯æ¥å£æ®‹é…·åœ°ç»™è·³è½¬åˆ°ç™»é™†æ¥å£å»äº† ğŸ˜­ã€‚çŒœæƒ³ä¸€ä¸‹å¯èƒ½åç«¯çš„æ¥å£æ˜¯é€šè¿‡ cookie æ¥åˆ¤æ–­å½“å‰ç™»é™†åŸŸçš„ï¼Œä» localhost è¿‡å»çš„è¯·æ±‚ä¸å¸¦ cookieã€‚åæ¥å°è¯•å‘ç°åœ¨ proxyçš„headersé‡Œå†å¢åŠ  cookie å³å¯ç ´è·³è½¬ï¼Œä½†æ˜¯è¯·æ±‚è¿‡å»è¿”å›ç»“æœè¿˜æ˜¯åœ¨æŠ¥é”™ï¼Œåç«¯è¡¨ç¤ºä»ç„¶æ˜¯è®¤è¯å¤±è´¥ ä½œè€…ï¼šè¡¨ç¤ºå¾ˆä¸è›‹å®šé“¾æ¥ï¼šhttps://juejin.im/post/5c0a6be4f265da616f6fc79cæ¥æºï¼šæ˜é‡‘è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ è§£è¯» Redux ä¸­é—´ä»¶çš„åŸç† https://juejin.im/post/59dc7e43f265da4332268906"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2023-04-02T14:00:30.302Z","updated":"2023-04-02T14:00:30.302Z","comments":true,"path":"blog/category/index.html","permalink":"https://ashleyblog.xyz/blog/category/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2023-04-02T14:00:30.302Z","updated":"2023-04-02T14:00:30.302Z","comments":true,"path":"blog/tags/index.html","permalink":"https://ashleyblog.xyz/blog/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"ç®—æ³•å¡«å‘","slug":"ç®—æ³•å¡«å‘","date":"2020-01-06T14:06:55.000Z","updated":"2023-04-02T14:00:30.296Z","comments":true,"path":"2020/01/06/ç®—æ³•å¡«å‘/","link":"","permalink":"https://ashleyblog.xyz/2020/01/06/ç®—æ³•å¡«å‘/","excerpt":"","text":"è´ªå¿ƒæ³•æ–¹æ³•æ˜¯ä»æŸä¸€èµ·ç‚¹å¼€å§‹ï¼Œåœ¨æ¯ä¸€ä¸ªè§£å†³é—®é¢˜æ­¥éª¤ä¸­ä½¿ç”¨è´ªå¿ƒåŸåˆ™ï¼Œå³é‡‡å–åœ¨å½“å‰çŠ¶æ€ä¸‹æœ€æœ‰åˆ©æˆ–è€…æ˜¯æœ€ä¼˜åŒ–çš„é€‰æ‹©ï¼Œè´ªå¿ƒæ³•å¸¸ç”¨äºæ‰¾å‡ºå›¾çš„æœ€å°ç”Ÿæˆæ ‘ï¼Œæœ€çŸ­è·¯å¾„ï¼Œå“ˆå¤«æ›¼ç¼–ç ç­‰ç­‰åº”ç”¨ï¼šåœ¨ä¸€å®šçš„æ—¶é—´ä¹‹å†…ä¸Šå®Œå°½é‡å¤šçš„è¯¾ç¨‹ç­–ç•¥ï¼šæ¯æ¬¡é€‰æ‹©æœ€æ—©ç»“æŸçš„è¯¾ç¨‹ 123456789101112131415161718192021# é¦–å…ˆå°†å·²é€‰è¯¾ç¨‹çš„åˆ—è¡¨åˆå§‹åŒ–ä¸ºç©ºï¼Œç„¶åæ‰§è¡Œè´ªå¿ƒç®—æ³•def executeSchedule(courses,selectionRule): selectedCourses = [] while len(courses) &gt; 0: selCourse = earliestFinishTime(courses) selectedCourses.append(selCourse) courses = removeConflictingCourses(selCourse,courses) return selectedCoursesdef earliestFinishTime(courses): earliestFinishTime = courses[0] for i in courses: if i[1] &lt; earliestFinishTime[1]: earliestFinishTime = i return earliestFinishTime# æ’é™¤å·²é€‰è¯¾ç¨‹ä¸­ä¸å½“å‰é€‰ä¸­çš„è¯¾ç¨‹å†²çªçš„è¯¾ç¨‹def removeConflictingCourses(selCourse,courses): noConflictingCourses = [] for s in courses: if s[1] &lt;= selCourse[0] or s[0] &gt;= selCourse[1]: noConflictingCourses.append(s) return noConflictingCourses åŠ¨æ€è§„åˆ’æ³•ä¹Ÿæ˜¯å°†ä¸€ä¸ªé—®é¢˜æ‹†è§£æˆè‹¥å¹²ä¸ªå­é—®é¢˜ï¼Œä½†æ˜¯è·Ÿåˆ†æ²»æ³•ä¸ä¸€æ ·çš„æ˜¯å®ƒä¼šå°†æ¯ä¸€ä¸ªå­é—®é¢˜çš„ç­”æ¡ˆå­˜å‚¨èµ·æ¥ï¼Œä»¥ä¾›ä¸‹æ¬¡æ±‚è§£çš„æ—¶å€™ä½¿ç”¨ï¼Œè¿™æ ·èƒ½å¤Ÿå‡å°‘è®¡ç®—çš„æ—¶é—´ å›æº¯ä¸€ç§å¯ä»¥æ‰¾å‡ºæ‰€æœ‰è§£æˆ–è€…æ˜¯ä¸€éƒ¨åˆ†è§£çš„ç®—æ³•ï¼Œä¸€æ—¦å‘ç°ä¸æ­£å¸¸çš„æ•°æ®å°±ä¸å†ç»§ç»­ï¼Œè€Œæ˜¯ä¼šå›åˆ°ä¸Šä¸€å±‚ é€’å½’åˆ†æ²»åº”ç”¨ï¼šä¸€å †çœŸå¸ä¸­æœ‰ä¸€ä¸ªæ˜¯å‡çš„ï¼Œå‡å¸çš„é‡äºçœŸçš„ï¼Œæ‰¾å‡ºå‡å¸ 123456789101112131415161718192021222324252627282930313233coinslist=[1,1,4,1,1,1]def coinComparison(coinslist): counter=0 currlist=coinslist while len(currlist) &gt; 1: group1,group2,group3 = splitCoins(currlist) currlist = findFakeGroup(group1,group2,group3) counter+=1 fake=currlist[0]def findFakeGroup(group1,group2,group3): resultland2 = compare(group1,group2) if resultland2 == 'left': fakeGroup = group1 elif resultland2 == 'right' fakeGroup = group2 elif resultland2 == 'equal' fakeGroup = group3 return fakeGroupdef compare(groupA,groupB): if sum(groupA)&gt;sum(groupB): result = 'left' elif sum(groupB)&gt;sum(groupA): result = 'right' else: result = 'equal' return resultdef splitCoins(coinslist): length = len(coinslist) group1=coinslist[0:length//3] group2=coinslist[length//3:length//3*2] group3=coinslist[length//3*2:length] return group1,group2,group3 è®°å¿†é€’å½’åº”ç”¨ï¼šæœ‰ä»¥ä¸‹çš„ç¡¬å¸ï¼Œéœ€è¦é€‰æ‹©éƒ¨åˆ†ç¡¬å¸ä½¿å¾—ä»–ä»¬çš„å’Œæœ€å¤§åŒ–ï¼Œå¹¶ä¸”ä¸èƒ½é€‰æ‹©ç›¸é‚»çš„ç¡¬å¸1 3 2 44 5 1234567891011121314151617def coins(row,memo): if len(row) == 0: memo[0] = 0 return 0,memo elif len(row) == 1: memo[1] = row[0] return row[0],memo try: retukrn (memo[len(row)],memo) except KeyError: # å¯¹åº”é€‰ä¸­ç¬¬ä¸€æšç¡¬å¸ pick = coins(row[2:],memo)[0]+row[0]) # å¯¹åº”è·³è¿‡ç¬¬ä¸€æšç¡¬å¸ skip = coins(row[1:],memo)[0] result = max(pick,skip) memo[len(row)] = result return (result,memo) å›¾çš„å¹¿åº¦ä¼˜å…ˆæœç´¢åº”ç”¨ï¼šå…­åº¦åˆ†éš”ï¼Œæ¯ä¸ªäººä¸å…¶ä»–ä»»ä½•äººéƒ½åªéœ€è¦ç»è¿‡å…­æ­¥ä»¥å†…çš„ä»‹ç»ï¼Œåˆ†éš”åº¦æŒ‡çš„æ˜¯æ¯ä¸€ä¸ªäººä¹‹é—´çš„æœ€å¤§åˆ†éš”åº¦ 12345678910111213141516171819202122232425262728small = &#123; &apos;A&apos;:[&apos;B&apos;,&apos;C&apos;], &apos;B&apos;:[&apos;A&apos;,&apos;C&apos;]&#125;def degreesOfSeparation(graph,start): if start not in graph: return -1 visited = set() frontier = set() degrees=0 visited.add(start) frontier.add(start) while len(frontier) &gt; 0: print(frontier,&apos;:&apos;,degrees) degrees += 1 newfront = set() for g in frontier: for next in graph[g]: if next not in visited: visited.add(next) newfront.add(next) # å°†å½“å‰å…ˆé”‹è®¾ç½®ä¸ºæ–°çš„å…ˆé”‹ frontier = newfront return degrees -=1degreesOfSeparation(small,&apos;A&apos;)# &#123;&apos;A&apos;&#125;:0# &#123;&apos;C&apos;,&apos;B&apos;&#125;:1# ...","categories":[],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://ashleyblog.xyz/tags/ç®—æ³•/"}]},{"title":"æ—¥å¸¸è®°å½•","slug":"è®°å½•","date":"2020-01-06T13:51:48.000Z","updated":"2023-04-02T14:00:30.288Z","comments":true,"path":"2020/01/06/è®°å½•/","link":"","permalink":"https://ashleyblog.xyz/2020/01/06/è®°å½•/","excerpt":"","text":"å¹´å‰çš„ç©ºæ¡£æœŸå»äº†æŸå‚æ¬ç –ï¼Œæ„Ÿæ…¨ç”Ÿæ´»çš„ä¸æ˜“çš„åŒæ—¶æ·±æ„Ÿé çŸ¥è¯†èµšé’±æ˜¯ä¸€ä»¶å¤šä¹ˆå¹¸ç¦çš„äº‹æƒ…ï¼Œçªç„¶æåº¦æ¸´æœ›è¿…é€Ÿæå‡è‡ªå·±çš„æŠ€æœ¯æ°´å¹³ï¼Œæ¸´æœ›ä¾é æŠ€æœ¯è€Œä¸æ˜¯æœºæ¢°æ€§çš„åŠ³åŠ¨èµšé’±ã€‚ è¿‡å®Œå¹´å°± 23 å²äº†ï¼Œèƒ½äº«å—å¹´è½»çš„æ—¥å­å·²ç»ä¸å¤šäº†ï¼Œä¸‰å¹´ä¹‹åå¼€å§‹è¡°è€ï¼Œä¸å†æ˜¯å°é²œè‚‰ï¼Œå¯èƒ½ä¸å†æœ‰å°‘å¹´çš„æ¿€æƒ…ï¼Œå¯èƒ½ä¼šå®‰äºç°çŠ¶ï¼Œä¸€å¿ƒåªæƒ³æ±‚ç¨³ï¼Œå¯èƒ½å›é¦–ä»Šå¤©ï¼Œä¼šè§‰å¾—è¿™æ ¹æœ¬æ²¡ä»€ä¹ˆå¤§ä¸äº†ï¼Œå› ä¸ºæˆ‘ç°åœ¨å·²ç»ç¨³å®šä¸‹æ¥äº†å‘€ã€‚ã€‚ã€‚æƒ³åˆ°è¿™äº›ï¼Œæ—¢è§‰å¾—å¾—åˆ°äº†å®‰æ…°åˆè§‰å¾—ç´¢ç„¶æ— å‘³ã€‚ æˆ‘åˆ°åº•æƒ³è¦è¿‡æ€æ ·çš„äººç”Ÿï¼Ÿæƒ³è¦èµ°ä»€ä¹ˆæ ·çš„èŒä¸šé“è·¯ï¼Ÿå…¶å®ç°åœ¨çš„æˆ‘ä¹Ÿä¸æ˜ç¡®ï¼Œæœªæ¥çš„æ—¥å­ï¼Œé“é˜»ä¸”é•¿ï¼Œå”¯ä¸€çš„æ„¿æœ›æ˜¯å¸Œæœ›è‡ªå·±å¯ä»¥å°‘ç•™é—æ†¾ï¼Œèƒ½ä¸€è·¯å‘å‰ä¸è¦å›å¤´å§ã€‚ã€‚ã€‚","categories":[],"tags":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://ashleyblog.xyz/tags/ç”Ÿæ´»/"}]},{"title":"é¢è¯•ä¸­çš„ç¼–ç¨‹é¢˜","slug":"é¢è¯•ä¸­çš„ç¼–ç¨‹é¢˜ï½ä¸å®šæœŸæ›´æ–°","date":"2019-12-24T09:46:29.000Z","updated":"2023-04-02T14:00:30.292Z","comments":true,"path":"2019/12/24/é¢è¯•ä¸­çš„ç¼–ç¨‹é¢˜ï½ä¸å®šæœŸæ›´æ–°/","link":"","permalink":"https://ashleyblog.xyz/2019/12/24/é¢è¯•ä¸­çš„ç¼–ç¨‹é¢˜ï½ä¸å®šæœŸæ›´æ–°/","excerpt":"","text":"æ±‚å¤šä¸ªæ•°ç»„çš„äº¤é›† 12345678function jiaojiArr(a,b)&#123; return new Set([...a].filter(item=&gt;b.includes(item)))&#125;function getJiaoji(...arrs)&#123;return arrs.reduce((jiaoji,arr)=&gt;&#123;return Array.from(jiaojiArr(jiaoji,arr))&#125;)&#125; å®ç°indexof 12345678910111213Array.prototype.indexOf=function (target,start=0)&#123; let str=this.slice(start).join(',') let strArr=str.split(`$&#123;target&#125;,`) if(strArr.length===1)&#123; return -1 &#125; return strArr[0].split(',').length - 1+start&#125;String.prototype.indexOf=function(target,start=0)&#123; let str=this.slice(start) let result=str.replace(new RegExp(`$&#123;target&#125;\\\\w+`,'g'),'').length+start return result===this.length? -1 : result&#125; åˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦å­˜åœ¨ç¯ æ€è·¯ï¼šè®¾ç½®ä¸€ä¸ª slow æŒ‡é’ˆ slow = slow-&gt;nextï¼Œä¸€ä¸ª fast æŒ‡é’ˆ fast = fast-&gt;next-&gt;nextã€‚å› ä¸º fast æŒ‡é’ˆç§»åŠ¨çš„æ¯” slow å¿«ï¼Œè¦æ˜¯æœ‰ç¯çš„è¯ä¸€å®šä¼šç›¸é‡ 12345678910111213141516171819202122232425262728293031function linknode(x)&#123;this.val=xthis.next=null&#125;class linklist()&#123;constructor(x)&#123; this.head=new linknode(x)&#125;append(x)&#123; const newnode=new linknode(x) let current=this.head while(current.next)&#123;current=current.next &#125; current.next=newnode&#125;judge()&#123; if(!this.head.next)&#123; return false &#125;let fast=this.head.next.nextlet low=this.head.nextwhile(fast.next)&#123; if(fast.next===low.next)&#123; return true &#125; fast=fast.next.next low=low.next&#125;&#125;&#125; ä»æ•°ç»„ä¸­å–å¾—éšæœºæ•°ä¸èƒ½æœ‰é‡å¤çš„ 12345678910111213function getRandomNumFromArr(arr, count) &#123; if (count &gt;= arr.length) &#123; return arr &#125; let result = [] while (result.length &lt; count) &#123; let random = Math.floor(Math.random() * (arr.length-1)) if (!result.includes(arr[random])) &#123; result.push(arr[random]) &#125; &#125; return result&#125; å®ç°addå‡½æ•° 1234567891011121314151617function add(n) &#123; let fn = function(m) &#123; return add(n + m) &#125; // valueOf åœ¨ ç®—æœ¯è¿ç®—æ—¶ç”Ÿæ•ˆå¦‚ +add(2)(3) fn.valueOf = function() &#123; return n &#125; // toString åœ¨ è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶è°ƒç”¨ add(2)(3) fn.toString = function() &#123; return '' + n &#125; return fn&#125;add(1); // 1add(1)(2); // 3add(1)(2)(3)ï¼› // 6 è·å¾—æ‰€æœ‰çˆ¶çº§çš„ID 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253const data = [ &#123; id: '1', name: 'test1', children: [ &#123; id: '11', name: 'test11', children: [ &#123; id: '111', name: 'test111' &#125; ] &#125;, &#123; id: '12', name: 'test12', children: [ &#123; id: '121', name: 'test121' &#125; ] &#125; ] &#125;]// æ­£åˆ™è¡¨è¾¾å¼ç‰ˆfunction getParentId(data) &#123; const str = JSON.stringify(data) const childReg = /\\&#123;[^&#123;&#125;]+\\&#125;/g const childCollects = str.match(chilReg) const idReg = /(?&lt;=id\\\":\\\")\\d+/g const childIdCollects = childCollects.map((child) =&gt; child.match(idReg)[0]) const totalIdCollects = str.match(idReg) return totalIdCollects.filter((item) =&gt; !childIdCollects.includes(item))&#125;// DFSfunction getParentId(data) &#123; let result = &#123;&#125; ;(function(data) &#123; const parents = data.filter((item) =&gt; 'children' in item) parents.reduce((obj, item) =&gt; &#123; obj[item.id] = Symbol() return obj &#125;, result) for (let k of parents) &#123; arguments.callee(k.children) &#125; &#125;)(data) return result&#125; æ·±åº¦åˆå¹¶ä¸¤ä¸ªå¯¹è±¡ 1234567891011121314151617function mergeDeep(target, obj) &#123; let result = &#123; ...target&#125; ;(function merge(origin, obj) &#123; for (let k in obj) &#123; if ( typeof origin[k] !== 'object' || typeof obj[k] !== 'object' || Array.isArray(origin[k]) !== Array.isArray(obj[k]) ) &#123; origin[k] = obj[k] &#125; else &#123; merge(origin[k], obj[k]) &#125; &#125; &#125;)(result, obj) return result&#125;","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://ashleyblog.xyz/categories/é¢è¯•/"},{"name":"js","slug":"é¢è¯•/js","permalink":"https://ashleyblog.xyz/categories/é¢è¯•/js/"}],"tags":[{"name":"js","slug":"js","permalink":"https://ashleyblog.xyz/tags/js/"}]},{"title":"é¢ç»cssç¯‡","slug":"é¢ç»cssç¯‡","date":"2019-12-18T13:58:19.000Z","updated":"2023-04-02T14:00:30.292Z","comments":true,"path":"2019/12/18/é¢ç»cssç¯‡/","link":"","permalink":"https://ashleyblog.xyz/2019/12/18/é¢ç»cssç¯‡/","excerpt":"","text":"æ°´å¹³å‚ç›´å±…ä¸­çš„å„ç§å§¿åŠ¿ï¼Œè¡¥å…… girdå¸ƒå±€ 1234567div.parent &#123; display: grid;&#125;div.child &#123; justify-self: center; align-self: center;&#125; flex 123456div.parent&#123; display:flex;&#125;div.child&#123; margin:auto;&#125; link vs @importå½“ä¸€ä¸ªé¡µé¢è¢«åŠ è½½çš„æ—¶å€™ï¼ˆå°±æ˜¯è¢«æµè§ˆè€…æµè§ˆçš„æ—¶å€™ï¼‰ï¼Œlinkå¼•ç”¨çš„CSSä¼šåŒæ—¶è¢«åŠ è½½ï¼Œè€Œ@importå¼•ç”¨çš„CSS ä¼šç­‰åˆ°é¡µé¢å…¨éƒ¨è¢«ä¸‹è½½å®Œå†è¢«åŠ è½½ã€‚ line-height 2 ä¸200% çˆ¶å…ƒç´ è®¾ç½®line-height: 200%;å±æ€§æ—¶ çˆ¶å…ƒç´ è®¾ç½®è¿™ä¸ªå±æ€§åï¼Œå…¶æ‰€æœ‰å­å…ƒç´ çš„è¡Œé«˜éƒ½æ˜¯ä¸€ä¸ªå…·ä½“çš„å€¼ï¼Œå³ä»–ä»¬çˆ¶å…ƒç´ å­—ä½“å¤§å°çš„200%ã€‚ä¸‹ä¾‹å¯çœ‹å‡ºå­å…ƒç´ çš„è¡Œé«˜éƒ½ä¸€è‡´ï¼Œå³çˆ¶å…ƒç´ å­—ä½“å¤§å°çš„2å€ï¼Œ32pxã€‚ çˆ¶å…ƒç´ è®¾ç½®line-height: 2;å±æ€§æ—¶ çˆ¶å…ƒç´ è®¾ç½®è¿™ä¸ªå±æ€§åï¼Œå…¶æ‰€æœ‰å­å…ƒç´ çš„è¡Œé«˜éƒ½æ˜¯è‡ªèº«å­—ä½“å¤§å°çš„2å€ã€‚ä¸‹ä¾‹å¯çœ‹å‡ºå­å…ƒç´ çš„è¡Œé«˜éƒ½æ˜¯ä¸ä¸€è‡´çš„","categories":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"https://ashleyblog.xyz/categories/é¢ç»/"},{"name":"css","slug":"é¢ç»/css","permalink":"https://ashleyblog.xyz/categories/é¢ç»/css/"}],"tags":[{"name":"css","slug":"css","permalink":"https://ashleyblog.xyz/tags/css/"}]},{"title":"é¢ç»æµè§ˆå™¨ç¯‡","slug":"é¢ç»è®¡ç®—æœºç½‘ç»œç¯‡","date":"2019-12-12T03:37:37.000Z","updated":"2023-04-02T14:00:30.298Z","comments":true,"path":"2019/12/12/é¢ç»è®¡ç®—æœºç½‘ç»œç¯‡/","link":"","permalink":"https://ashleyblog.xyz/2019/12/12/é¢ç»è®¡ç®—æœºç½‘ç»œç¯‡/","excerpt":"","text":"Httpè¯·æ±‚ä¸­çš„keep-aliveåœ¨httpæ—©æœŸï¼Œæ¯ä¸ªhttpè¯·æ±‚éƒ½è¦æ±‚æ‰“å¼€ä¸€ä¸ªtpc socketè¿æ¥ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸€æ¬¡ä¹‹åå°±æ–­å¼€è¿™ä¸ªtcpè¿æ¥ã€‚ä½¿ç”¨keep-aliveå¯ä»¥æ”¹å–„è¿™ç§çŠ¶æ€ï¼Œå³åœ¨ä¸€æ¬¡TCPè¿æ¥ä¸­å¯ä»¥æŒç»­å‘é€å¤šä»½æ•°æ®è€Œä¸ä¼šæ–­å¼€è¿æ¥ã€‚é€šè¿‡ä½¿ç”¨keep-aliveæœºåˆ¶ï¼Œå¯ä»¥å‡å°‘tcpè¿æ¥å»ºç«‹æ¬¡æ•°ï¼Œä¹Ÿæ„å‘³ç€å¯ä»¥å‡å°‘TIME_WAITçŠ¶æ€è¿æ¥ï¼Œä»¥æ­¤æé«˜æ€§èƒ½å’Œæé«˜httpdæœåŠ¡å™¨çš„ååç‡(æ›´å°‘çš„tcpè¿æ¥æ„å‘³ç€æ›´å°‘çš„ç³»ç»Ÿå†…æ ¸è°ƒç”¨,socketçš„accept()å’Œclose()è°ƒç”¨)ã€‚ä½†æ˜¯ï¼Œkeep-aliveå¹¶ä¸æ˜¯å…è´¹çš„åˆé¤,é•¿æ—¶é—´çš„tcpè¿æ¥å®¹æ˜“å¯¼è‡´ç³»ç»Ÿèµ„æºæ— æ•ˆå ç”¨ã€‚é…ç½®ä¸å½“çš„keep-aliveï¼Œæœ‰æ—¶æ¯”é‡å¤åˆ©ç”¨è¿æ¥å¸¦æ¥çš„æŸå¤±è¿˜æ›´å¤§ã€‚æ‰€ä»¥ï¼Œæ­£ç¡®åœ°è®¾ç½®keep-alive timeoutæ—¶é—´éå¸¸é‡è¦ã€‚ æµè§ˆå™¨ä¸ºä»€ä¹ˆè¦é™åˆ¶getè¯·æ±‚çš„å‚æ•°çš„é•¿åº¦æ˜¯å› ä¸ºurlçš„é•¿åº¦ä¼šè¢«é™åˆ¶ HTTPS æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯å¦‚ä½•éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§ï¼ˆ1ï¼‰é¦–å…ˆæµè§ˆå™¨è¯»å–è¯ä¹¦ä¸­çš„è¯ä¹¦æ‰€æœ‰è€…ã€æœ‰æ•ˆæœŸç­‰ä¿¡æ¯è¿›è¡Œæ ¡éªŒï¼Œæ ¡éªŒè¯ä¹¦çš„ç½‘ç«™åŸŸåæ˜¯å¦ä¸è¯ä¹¦é¢å‘çš„åŸŸåä¸€è‡´ï¼Œæ ¡éªŒè¯ä¹¦æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ï¼ˆ2ï¼‰æµè§ˆå™¨å¼€å§‹æŸ¥æ‰¾æ“ä½œç³»ç»Ÿä¸­å·²å†…ç½®çš„å—ä¿¡ä»»çš„è¯ä¹¦å‘å¸ƒæœºæ„CAï¼Œä¸æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦ä¸­çš„é¢å‘è€…CAæ¯”å¯¹ï¼Œç”¨äºæ ¡éªŒè¯ä¹¦æ˜¯å¦ä¸ºåˆæ³•æœºæ„é¢å‘ï¼ˆ3ï¼‰å¦‚æœæ‰¾ä¸åˆ°ï¼Œæµè§ˆå™¨å°±ä¼šæŠ¥é”™ï¼Œè¯´æ˜æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦æ˜¯ä¸å¯ä¿¡ä»»çš„ã€‚ï¼ˆ4ï¼‰å¦‚æœæ‰¾åˆ°ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šä»æ“ä½œç³»ç»Ÿä¸­å–å‡ºé¢å‘è€…CA çš„å…¬é’¥(å¤šæ•°æµè§ˆå™¨å¼€å‘å•†å‘å¸ƒç‰ˆæœ¬æ—¶ï¼Œä¼šäº‹å…ˆåœ¨å†…éƒ¨æ¤å…¥å¸¸ç”¨è®¤è¯æœºå…³çš„å…¬å¼€å¯†é’¥)ï¼Œç„¶åå¯¹æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦é‡Œé¢çš„ç­¾åè¿›è¡Œè§£å¯†ï¼ˆ5ï¼‰æµè§ˆå™¨ä½¿ç”¨ç›¸åŒçš„hashç®—æ³•è®¡ç®—å‡ºæœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦çš„hashå€¼ï¼Œå°†è¿™ä¸ªè®¡ç®—çš„hashå€¼ä¸è¯ä¹¦ä¸­ç­¾ååšå¯¹æ¯”ï¼ˆ6ï¼‰å¯¹æ¯”ç»“æœä¸€è‡´ï¼Œåˆ™è¯æ˜æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦åˆæ³•ï¼Œæ²¡æœ‰è¢«å†’å…… getä¸poståœ¨ç¼“å­˜æ–¹é¢çš„åŒºåˆ«getè¯·æ±‚ç±»ä¼¼äºæŸ¥æ‰¾çš„è¿‡ç¨‹ï¼Œç”¨æˆ·è·å–æ•°æ®ï¼Œå¯ä»¥ä¸ç”¨æ¯æ¬¡éƒ½ä¸æ•°æ®åº“è¿æ¥ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‚postä¸åŒï¼Œpoståšçš„ä¸€èˆ¬æ˜¯ä¿®æ”¹å’Œåˆ é™¤çš„å·¥ä½œï¼Œæ‰€ä»¥å¿…é¡»ä¸æ•°æ®åº“äº¤äº’ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ç¼“å­˜ã€‚å› æ­¤getè¯·æ±‚é€‚åˆäºè¯·æ±‚ç¼“å­˜ã€‚ å››ç§å­˜å‚¨ cookieçš„ç”Ÿå­˜æ—¶é—´å¦‚æœä¸è®¾ç½®è¿‡æœŸæ—¶é—´expiresï¼Œåˆ™è¡¨ç¤ºè¿™ä¸ª cookie ç”Ÿå‘½å‘¨æœŸä¸ºæµè§ˆå™¨ä¼šè¯æœŸé—´ï¼Œåªè¦å…³é—­æµè§ˆå™¨çª—å£ï¼Œcookie å°±æ¶ˆå¤±äº†ã€‚è¿™ç§ç”Ÿå‘½æœŸä¸ºæµè§ˆä¼šè¯æœŸçš„ cookie è¢«ç§°ä¸ºä¼šè¯ cookieã€‚ä¼šè¯ cookie ä¸€èˆ¬ä¸ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šè€Œæ˜¯ä¿å­˜åœ¨å†…å­˜é‡Œã€‚ å¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œæµè§ˆå™¨å°±ä¼šæŠŠ cookie ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šï¼Œå…³é—­åå†æ¬¡æ‰“å¼€æµè§ˆå™¨ï¼Œè¿™äº› cookie ä¾ç„¶æœ‰æ•ˆç›´åˆ°è¶…è¿‡è®¾å®šçš„è¿‡æœŸæ—¶é—´ã€‚ session sessionçš„æœ¬è´¨ï¼šå°±æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªå“ˆå¸Œè¡¨ã€‚ å°†sessionIDï¼ˆéšæœºæ•°ï¼‰ é€šè¿‡ Cookie å‘ç»™å®¢æˆ·ç«¯å®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨è¯»å– sessionIDæœåŠ¡å™¨æœ‰ä¸€å—å†…å­˜ï¼ˆå“ˆå¸Œè¡¨ï¼‰ä¿å­˜äº†æ‰€æœ‰ sessioné€šè¿‡sessionID åå°å¯ä»¥å¾—åˆ°å¯¹åº”ç”¨æˆ·çš„éšç§ä¿¡æ¯ï¼Œå¦‚ idï¼Œemailè¿™å—å†…å­˜ï¼ˆå“ˆå¸Œè¡¨ï¼‰å°±æ˜¯æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰ session ä¸ºä»€ä¹ˆä¼šæœ‰ session? cookieèƒ½è¢«ç”¨æˆ·æˆªå– ä¸å®‰å…¨ä¹‹å‰çš„å†™æ³•ï¼šç›´æ¥å°†æ•°æ®æ”¾åˆ°cookieé‡Œé¢ï¼š1response.setHeader('Set-Cookie', `login_email=$&#123;email&#125;`) è¿™æ ·å†™ä¸€æ¥ä¼šæš´éœ²ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼ŒäºŒæ¥ç”¨æˆ·å¯ä»¥ç›´æ¥é€šè¿‡æµè§ˆå™¨ä¿®æ”¹cookieï¼Œææœ‰å¯èƒ½è·å–åˆ°åˆ«äººçš„ç”¨æˆ·ä¿¡æ¯ï¼Œæä¸å®‰å…¨ã€‚å› æ­¤å‡ºç°äº†ä¸‹é¢çš„ä½¿ç”¨sessionçš„æ“ä½œï¼š 12345let sessions = &#123;&#125;let sessionId = Math.random() * 10000 // è®¾ç½®sessionId ä¸ºä¸€ä¸ªéšæœºæ•°sessions[sessionId] = &#123;login_email:email&#125; // å°†email å­˜å‚¨åœ¨sessionsè¿™ä¸ªå¯¹è±¡ä¸­response.setHeader('Set-Cookie', `sessionId = $&#123;sessionId&#125;`) // cookieä¸­å­˜å‚¨çš„æ˜¯ sessionId è¿™ä¸ªéšæœºæ•° é¦–å…ˆæ¥è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼šå³è®¾ç½®cookieçš„ä¸­å­˜å‚¨çš„å€¼ä¸ºä¸€ä¸ªéšæœºæ•°ï¼Œå½“åå°è·å–åˆ°cookieæ—¶ï¼Œå°±å¯ä»¥è·å–åˆ°è¯¥éšæœºæ•°å¹¶åœ¨sessionsè¿™ä¸ªå¯¹è±¡ä¸­æŸ¥æ‰¾keyä¸ºè¿™ä¸ªéšæœºæ•°çš„valueï¼Œå³å¯çŸ¥é“ç”¨æˆ·çš„é‚®ç®±æ˜¯ä»€ä¹ˆ ã€‚ ä¸åŸºäºcookieèƒ½å¦å®ç°sessionåç«¯å¾…ç”¨æˆ·ç™»é™†åè®¾ç½®ä»–çš„sessionIDï¼Œä½†ä¸æŠŠå®ƒæ”¾åœ¨ cookie é‡Œï¼Œè€Œæ˜¯å°†ä¿¡æ¯é€šè¿‡å“åº”ä½“ä¼ JSONç»™å‰ç«¯ã€‚å‰ç«¯æ‹¿åˆ°å“åº”ä½“ä¸­çš„JSONåå°†å…¶è½¬æ¢æˆå¯¹è±¡ï¼ˆJSON.parseï¼‰å°†ä»JSONä¸­è·å–åˆ°çš„æ•°æ®ï¼ˆå¦‚ sessionIDï¼‰æ”¾åœ¨ localStorage é‡Œé¢ï¼ˆlocalStorageé‡Œçš„æ•°æ®ç›®å‰æš‚æ—¶ç”¨ä¸åˆ°ï¼‰ä»¥åè·³è½¬åˆ°å…¶ä»–é¡µé¢ï¼ˆå¦‚é¦–é¡µï¼‰æ—¶ï¼Œå°† sessionID æ”¾åœ¨ URL çš„æŸ¥è¯¢å‚æ•°é‡Œï¼ˆå¦‚ï¼šwindow.location.href = â€˜/?sessionId=object.sessionIdâ€™ï¼‰é‚£ä¹ˆè¿›å…¥é¦–é¡µåï¼Œè¯¥é¡µé¢çš„ URL çš„æŸ¥è¯¢å‚æ•°å°±å¸¦ä¸Šäº†ä½ çš„sessionIDåç«¯é€šè¿‡åœ¨ç”¨æˆ·è®¿é—®é¦–é¡µæ—¶ï¼Œä¼ åˆ°æœåŠ¡å™¨çš„ URL ï¼Œæ¥è·å–åˆ°æŸ¥è¯¢å‚æ•°ï¼Œä»è€Œè·å–åˆ°ç”¨æˆ·çš„ sessionIDï¼Œç„¶ååœ¨æ•°æ®åº“ä¸­æŸ¥åˆ°sessionIDå¯¹åº”çš„ä¿¡æ¯å°±å¯ä»¥çŸ¥é“ç”¨æˆ·æ˜¯è°ã€‚ ä¸ºä»€ä¹ˆé€šå¸¸åœ¨å‘é€æ•°æ®åŸ‹ç‚¹è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ 1x1 åƒç´ çš„é€æ˜ gif å›¾ç‰‡ä½œç”¨ï¼šå·¥ä½œä¸­ï¼Œç”¨äºå‰ç«¯ç›‘æ§ï¼Œæ¯”å¦‚æ›å…‰ç­‰ç­‰ï¼Œè°·æ­Œå’Œç™¾åº¦çš„éƒ½æ˜¯ç”¨çš„1x1 åƒç´ çš„é€æ˜ gif å›¾ç‰‡ï¼›why? æ²¡æœ‰è·¨åŸŸé—®é¢˜ï¼Œä¸€èˆ¬è¿™ç§ä¸ŠæŠ¥æ•°æ®ï¼Œä»£ç è¦å†™é€šç”¨çš„ï¼›ï¼ˆæ’é™¤ajaxï¼‰ä¸ä¼šé˜»å¡é¡µé¢åŠ è½½ï¼Œå½±å“ç”¨æˆ·çš„ä½“éªŒï¼Œåªè¦new Imageå¯¹è±¡å°±å¥½äº†ï¼›ï¼ˆæ’é™¤JS/CSSæ–‡ä»¶èµ„æºæ–¹å¼ä¸ŠæŠ¥ï¼‰åœ¨æ‰€æœ‰å›¾ç‰‡ä¸­ï¼Œä½“ç§¯æœ€å°ï¼›ï¼ˆæ¯”è¾ƒPNG/JPGï¼‰ cookie å’Œ localStorage çš„åŒºåˆ«æ˜¯ä»€ä¹ˆç­”ï¼šcookie æ¯æ¬¡è¯·æ±‚ä¼šè¢«å¸¦ç»™æœåŠ¡å™¨ï¼Œè€Œ localStorageä¸ä¼šï¼›cookieçš„æœ€å¤§å‚¨å­˜é‡ä¸€èˆ¬åªæœ‰4kï¼Œè€ŒlocalStorage ä¸€èˆ¬æœ‰5Mb sessionstorageè·Ÿlocalstorageçš„åŒºåˆ«localStorage: åœ¨åŒä¸€ä¸ªæµè§ˆå™¨å†…ï¼ŒåŒæºæ–‡æ¡£ä¹‹é—´å…±äº« localStorage æ•°æ®ï¼Œå¯ä»¥äº’ç›¸è¯»å–ã€è¦†ç›–ã€‚sessionStorage: ä¸ localStorage ä¸€æ ·éœ€è¦åŒä¸€æµè§ˆå™¨åŒæºæ–‡æ¡£è¿™ä¸€æ¡ä»¶ã€‚ä¸ä»…å¦‚æ­¤ï¼ŒsessionStorage çš„ä½œç”¨åŸŸè¿˜è¢«é™å®šåœ¨äº†çª—å£ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŒä¸€æµè§ˆå™¨ã€åŒä¸€çª—å£çš„åŒæºæ–‡æ¡£æ‰èƒ½å…±äº«æ•°æ®ã€‚ tcpçš„æµé‡æ§åˆ¶ä¸æ‹¥å¡æ§åˆ¶ æµé‡æ§åˆ¶ ï¼ˆå®ç°ï¼šä¸»è¦çš„æ–¹å¼å°±æ˜¯æ¥æ”¶æ–¹è¿”å›çš„ ACK ä¸­ä¼šåŒ…å«è‡ªå·±çš„æ¥æ”¶çª—å£çš„å¤§å°ï¼Œå¹¶ä¸”åˆ©ç”¨å¤§å°æ¥æ§åˆ¶å‘é€æ–¹çš„æ•°æ®å‘é€ã€‚ï¼‰å¦‚æœå‘é€è€…å‘é€æ•°æ®è¿‡å¿«ï¼Œæ¥æ”¶è€…æ¥ä¸åŠæ¥æ”¶ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰åˆ†ç»„ä¸¢å¤±ã€‚ä¸ºäº†é¿å…åˆ†ç»„ä¸¢å¤±ï¼Œæ§åˆ¶å‘é€è€…çš„å‘é€é€Ÿåº¦ï¼Œä½¿å¾—æ¥æ”¶è€…æ¥å¾—åŠæ¥æ”¶ï¼Œè¿™å°±æ˜¯æµé‡æ§åˆ¶ã€‚æµé‡æ§åˆ¶æ ¹æœ¬ç›®çš„æ˜¯é˜²æ­¢åˆ†ç»„ä¸¢å¤±ï¼Œå®ƒæ˜¯æ„æˆTCPå¯é æ€§çš„ä¸€æ–¹é¢ã€‚ æµé‡æ§åˆ¶ä¸æ‹¥å¡æ§åˆ¶çš„åŒºåˆ«æ‹¥å¡æ§åˆ¶ï¼šæ‹¥å¡æ§åˆ¶æ˜¯ä½œç”¨äºç½‘ç»œçš„ï¼Œå®ƒæ˜¯é˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œé¿å…å‡ºç°ç½‘ç»œè´Ÿè½½è¿‡å¤§çš„æƒ…å†µï¼›å¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯ï¼šï¼ˆ 1 ï¼‰æ…¢å¼€å§‹ã€æ‹¥å¡é¿å…ï¼ˆ 2 ï¼‰å¿«é‡ä¼ ã€å¿«æ¢å¤ã€‚ æµé‡æ§åˆ¶ï¼šæµé‡æ§åˆ¶æ˜¯ä½œç”¨äºæ¥æ”¶è€…çš„ï¼Œå®ƒæ˜¯æ§åˆ¶å‘é€è€…çš„å‘é€é€Ÿåº¦ä»è€Œä½¿æ¥æ”¶è€…æ¥å¾—åŠæ¥æ”¶ï¼Œé˜²æ­¢åˆ†ç»„ä¸¢å¤±çš„ åŸŸåè§£æ1ã€æµè§ˆå™¨ä¸­è¾“å…¥æƒ³è¦è®¿é—®çš„ç½‘ç«™çš„åŸŸåï¼Œæ“ä½œç³»ç»Ÿä¼šå…ˆæ£€æŸ¥æœ¬åœ°çš„hostsæ–‡ä»¶æ˜¯å¦æœ‰è¿™ä¸ªç½‘å€æ˜ å°„å…³ç³»ï¼Œå¦‚æœæœ‰ï¼Œå°±å…ˆè°ƒç”¨è¿™ä¸ªIPåœ°å€æ˜ å°„ï¼Œå®ŒæˆåŸŸåè§£æã€‚2ã€å¦‚æœhostsé‡Œæ²¡æœ‰è¿™ä¸ªåŸŸåçš„æ˜ å°„ï¼Œå®¢æˆ·ç«¯ä¼šå‘æœ¬åœ°DNSæœåŠ¡å™¨å‘èµ·æŸ¥è¯¢ã€‚æœ¬åœ°DNSæœåŠ¡å™¨æ”¶åˆ°æŸ¥è¯¢æ—¶ï¼Œå¦‚æœè¦æŸ¥è¯¢çš„åŸŸååŒ…å«åœ¨æœ¬åœ°é…ç½®åŒºåŸŸèµ„æºä¸­ï¼Œåˆ™è¿”å›è§£æç»“æœç»™å®¢æˆ·æœºï¼Œå®ŒæˆåŸŸåè§£æã€‚3ã€å¦‚æœæœ¬åœ°DNSæœåŠ¡å™¨æœ¬åœ°åŒºåŸŸæ–‡ä»¶ä¸ç¼“å­˜è§£æéƒ½å¤±æ•ˆï¼Œåˆ™æ ¹æ®æœ¬åœ°DNSæœåŠ¡å™¨çš„è®¾ç½®ï¼Œé‡‡ç”¨é€’å½’æˆ–è€…è¿­ä»£æŸ¥è¯¢ï¼Œç›´è‡³è§£æå®Œæˆã€‚ é€’å½’æŸ¥è¯¢ è¿­ä»£æŸ¥è¯¢ æµè§ˆå™¨å®‰å…¨ CSRF çš„é˜²å¾¡ 1ã€å°½é‡ä½¿ç”¨ POSTï¼Œé™åˆ¶ GETGET æ¥å£å¤ªå®¹æ˜“è¢«æ‹¿æ¥åš CSRF æ”»å‡»ï¼Œçœ‹ä¸Šé¢ç¤ºä¾‹å°±çŸ¥é“ï¼Œåªè¦æ„é€ ä¸€ä¸ª img æ ‡ç­¾ï¼Œè€Œ img æ ‡ç­¾åˆæ˜¯ä¸èƒ½è¿‡æ»¤çš„æ•°æ®ã€‚æ¥å£æœ€å¥½é™åˆ¶ä¸º POST ä½¿ç”¨ï¼ŒGET åˆ™æ— æ•ˆï¼Œé™ä½æ”»å‡»é£é™©ã€‚å½“ç„¶ POST å¹¶ä¸æ˜¯ä¸‡æ— ä¸€å¤±ï¼Œæ”»å‡»è€…åªè¦æ„é€ ä¸€ä¸ª form å°±å¯ä»¥ï¼Œä½†éœ€è¦åœ¨ç¬¬ä¸‰æ–¹é¡µé¢åšï¼Œè¿™æ ·å°±å¢åŠ æš´éœ²çš„å¯èƒ½æ€§ã€‚2ã€å°† cookie è®¾ç½®ä¸º HttpOnlyCRSF æ”»å‡»å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯åˆ©ç”¨äº†æµè§ˆå™¨çš„ cookieï¼Œä¸ºäº†é˜²æ­¢ç«™å†…çš„ XSS æ¼æ´ç›—å– cookie,éœ€è¦åœ¨ cookie ä¸­è®¾ç½®â€œHttpOnlyâ€å±æ€§ï¼Œè¿™æ ·é€šè¿‡ç¨‹åºï¼ˆå¦‚ JavaScript è„šæœ¬ã€Applet ç­‰ï¼‰å°±æ— æ³•è¯»å–åˆ° cookie ä¿¡æ¯ï¼Œé¿å…äº†æ”»å‡»è€…ä¼ªé€  cookie çš„æƒ…å†µå‡ºç°ã€‚åœ¨ Java çš„ Servlet çš„ API ä¸­è®¾ç½® cookie ä¸º HttpOnly çš„ä»£ç å¦‚ä¸‹ï¼šresponse.setHeader( â€œSet-Cookieâ€, â€œcookiename=cookievalue;HttpOnlyâ€);3ã€å¢åŠ  tokenCSRF æ”»å‡»ä¹‹æ‰€ä»¥èƒ½å¤ŸæˆåŠŸï¼Œæ˜¯å› ä¸ºæ”»å‡»è€…å¯ä»¥ä¼ªé€ ç”¨æˆ·çš„è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¸­æ‰€æœ‰çš„ç”¨æˆ·éªŒè¯ä¿¡æ¯éƒ½å­˜åœ¨äº cookie ä¸­ï¼Œå› æ­¤æ”»å‡»è€…å¯ä»¥åœ¨ä¸çŸ¥é“ç”¨æˆ·éªŒè¯ä¿¡æ¯çš„æƒ…å†µä¸‹ç›´æ¥åˆ©ç”¨ç”¨æˆ·çš„ cookie æ¥é€šè¿‡å®‰å…¨éªŒè¯ã€‚ç”±æ­¤å¯çŸ¥ï¼ŒæŠµå¾¡ CSRF æ”»å‡»çš„å…³é”®åœ¨äºï¼šåœ¨è¯·æ±‚ä¸­æ”¾å…¥æ”»å‡»è€…æ‰€ä¸èƒ½ä¼ªé€ çš„ä¿¡æ¯ï¼Œå¹¶ä¸”è¯¥ä¿¡æ€»ä¸å­˜åœ¨äº cookie ä¹‹ä¸­ã€‚é‰´äºæ­¤ï¼Œç³»ç»Ÿå¼€å‘äººå‘˜å¯ä»¥åœ¨ HTTP è¯·æ±‚ä¸­ä»¥å‚æ•°çš„å½¢å¼åŠ å…¥ä¸€ä¸ªéšæœºäº§ç”Ÿçš„ tokenï¼Œå¹¶åœ¨æœåŠ¡ç«¯è¿›è¡Œ token æ ¡éªŒï¼Œå¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰ token æˆ–è€… token å†…å®¹ä¸æ­£ç¡®ï¼Œåˆ™è®¤ä¸ºæ˜¯ CSRF æ”»å‡»è€Œæ‹’ç»è¯¥è¯·æ±‚ã€‚å‡è®¾è¯·æ±‚é€šè¿‡ POST æ–¹å¼æäº¤ï¼Œåˆ™å¯ä»¥åœ¨ç›¸åº”çš„è¡¨å•ä¸­å¢åŠ ä¸€ä¸ªéšè—åŸŸï¼štoken çš„å€¼é€šè¿‡æœåŠ¡ç«¯ç”Ÿæˆï¼Œè¡¨å•æäº¤å token çš„å€¼é€šè¿‡ POST è¯·æ±‚ä¸å‚æ•°ä¸€åŒå¸¦åˆ°æœåŠ¡ç«¯ï¼Œæ¯æ¬¡ä¼šè¯å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ tokenï¼Œä¼šè¯è¿‡æœŸï¼Œåˆ™ token å¤±æ•ˆï¼Œæ”»å‡»è€…å› æ— æ³•è·å–åˆ° tokenï¼Œä¹Ÿå°±æ— æ³•ä¼ªé€ è¯·æ±‚ã€‚ note: 1ã€è¦ç¡®ä¿åŒä¸€é¡µé¢ä¸­æ¯ä¸ªè¡¨å•éƒ½å«æœ‰è‡ªå·±å”¯ä¸€çš„ä»¤ç‰Œ 2ã€éªŒè¯åéœ€è¦åˆ é™¤ç›¸åº”çš„éšæœºæ•° 3ã€Token ä¿å­˜åœ¨ Session ä¸­ã€‚å‡å¦‚ Token ä¿å­˜åœ¨ Cookie ä¸­ï¼Œç”¨æˆ·æµè§ˆå™¨å¼€äº†å¾ˆå¤šé¡µé¢ã€‚åœ¨ä¸€äº›é¡µé¢ Token è¢«ä½¿ç”¨æ¶ˆè€—æ‰åæ–°çš„Token ä¼šè¢«é‡æ–°ç§å…¥ï¼Œä½†é‚£äº›è€çš„ Tab é¡µé¢å¯¹åº”çš„ HTML é‡Œè¿˜æ˜¯è€ Tokenã€‚è¿™ä¼šè®©ç”¨æˆ·è§‰å¾—ä¸ºå•¥å‡ åˆ†é’Ÿå‰æ‰“å¼€çš„é¡µé¢ä¸èƒ½æ­£å¸¸æäº¤ï¼Ÿåœ¨ session ä¸­æ·»åŠ  token çš„å®ç°ä»£ç ï¼š 12345HttpSession session = request.getSession();Object token = session.getAttribute(\"_token\");if(token == null I I \"\".equals(token)) &#123; session.setAttribute(\"_token\", UUID.randomUUIDO .toString());&#125; 4ã€é€šè¿‡ Referer è¯†åˆ«æ ¹æ® HTTP åè®®ï¼Œåœ¨ HTTP å¤´ä¸­æœ‰ä¸€ä¸ªå­—æ®µå« Refererï¼Œå®ƒè®°å½•äº†è¯¥ HTTP è¯·æ±‚çš„æ¥æºåœ°å€ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œè®¿é—®ä¸€ä¸ªå®‰å…¨å—é™çš„é¡µé¢çš„è¯·æ±‚éƒ½æ¥è‡ªäºåŒä¸€ä¸ªç½‘ç«™ã€‚æ¯”å¦‚æŸé“¶è¡Œçš„è½¬è´¦æ˜¯é€šè¿‡ç”¨æˆ·è®¿é—®http://www.xxx.com/transfer.doé¡µé¢å®Œæˆçš„ï¼Œç”¨æˆ·å¿…é¡»å…ˆç™»å½•www.xxx.comï¼Œç„¶åé€šè¿‡å•å‡»é¡µé¢ä¸Šçš„æäº¤æŒ‰é’®æ¥è§¦å‘è½¬è´¦äº‹ä»¶ã€‚å½“ç”¨æˆ·æäº¤è¯·æ±‚æ—¶ï¼Œè¯¥è½¬è´¦è¯·æ±‚çš„Refererå€¼å°±ä¼šæ˜¯æäº¤æŒ‰é’®æ‰€åœ¨é¡µé¢çš„ URLï¼ˆæœ¬ä¾‹ä¸º www.xxx. com/transfer.doï¼‰ã€‚å¦‚æœæ”»å‡»è€…è¦å¯¹é“¶è¡Œç½‘ç«™å®æ–½ CSRF æ”»å‡»ï¼Œä»–åªèƒ½åœ¨å…¶ä»–ç½‘ç«™æ„é€ è¯·æ±‚ï¼Œå½“ç”¨æˆ·é€šè¿‡å…¶ä»–ç½‘ç«™å‘é€è¯·æ±‚åˆ°é“¶è¡Œæ—¶ï¼Œè¯¥è¯·æ±‚çš„ Referer çš„å€¼æ˜¯å…¶ä»–ç½‘ç«™çš„åœ°å€ï¼Œè€Œä¸æ˜¯é“¶è¡Œè½¬è´¦é¡µé¢çš„åœ°å€ã€‚å› æ­¤ï¼Œè¦é˜²å¾¡ CSRF æ”»å‡»ï¼Œé“¶è¡Œç½‘ç«™åªéœ€è¦å¯¹äºæ¯ä¸€ä¸ªè½¬è´¦è¯·æ±‚éªŒè¯å…¶ Referer å€¼å³å¯ï¼Œå¦‚æœæ˜¯ä»¥ www.xx.om åŸŸåå¼€å¤´çš„åœ°å€ï¼Œåˆ™è¯´æ˜è¯¥è¯·æ±‚æ˜¯æ¥è‡ªé“¶è¡Œç½‘ç«™è‡ªå·±çš„è¯·æ±‚ï¼Œæ˜¯åˆæ³•çš„ï¼›å¦‚æœ Referer æ˜¯å…¶ä»–ç½‘ç«™ï¼Œå°±æœ‰å¯èƒ½æ˜¯ CSRF æ”»å‡»ï¼Œåˆ™æ‹’ç»è¯¥è¯·æ±‚ã€‚å–å¾— HTTP è¯·æ±‚ Refererï¼šString referer = request.getHeader(â€œRefererâ€);5.ä½¿ç”¨éªŒè¯ç  xssæ”»å‡»æ–¹å¼ä»¥åŠé˜²å¾¡ ä¸­é—´äººæ”»å‡»ä¸­é—´äººæ”»å‡»è¿‡ç¨‹å¦‚ä¸‹ï¼š æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€å…¬é’¥ã€‚æ”»å‡»è€…æˆªè·å…¬é’¥ï¼Œä¿ç•™åœ¨è‡ªå·±æ‰‹ä¸Šã€‚ç„¶åæ”»å‡»è€…è‡ªå·±ç”Ÿæˆä¸€ä¸ªã€ä¼ªé€ çš„ã€‘å…¬é’¥ï¼Œå‘ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯æ”¶åˆ°ä¼ªé€ çš„å…¬é’¥åï¼Œç”ŸæˆåŠ å¯†hashå€¼å‘ç»™æœåŠ¡å™¨ã€‚æ”»å‡»è€…è·å¾—åŠ å¯†hashå€¼ï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†è·å¾—çœŸç§˜é’¥ã€‚åŒæ—¶ç”Ÿæˆå‡çš„åŠ å¯†hashå€¼ï¼Œå‘ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨ç”¨ç§é’¥è§£å¯†è·å¾—å‡ç§˜é’¥ã€‚æœåŠ¡å™¨ç”¨åŠ ç§˜é’¥åŠ å¯†ä¼ è¾“ä¿¡æ¯é˜²èŒƒæ–¹æ³•ï¼š æœåŠ¡ç«¯åœ¨å‘é€æµè§ˆå™¨çš„å…¬é’¥ä¸­åŠ å…¥CAè¯ä¹¦ï¼Œæµè§ˆå™¨å¯ä»¥éªŒè¯CAè¯ä¹¦çš„æœ‰æ•ˆæ€§å¼ºåˆ¶é¡µé¢ä½¿ç”¨https é˜²å¾¡ä¸­é—´äººæ”»å‡» 123function requestHandler(req, res)&#123; res.setHeader('Strict-Transport-Security','max-age=31536000; includeSubDomains; preload');&#125; æ·±å…¥äº†è§£æµè§ˆå™¨ç¼“å­˜æœºåˆ¶https://www.jianshu.com/p/54cc04190252è¡¥å……ï¼šå…³äºå¼ºç¼“å­˜å–èµ„æºçš„ä½ç½®å¦‚æœå¼€å¯äº†Service Workeré¦–å…ˆä¼šä»Service Workerä¸­æ‹¿å¦‚æœæ–°å¼€ä¸€ä¸ªä»¥å‰æ‰“å¼€è¿‡çš„é¡µé¢ç¼“å­˜ä¼šä»Disk Cacheä¸­æ‹¿ï¼ˆå‰ææ˜¯å‘½ä¸­å¼ºç¼“å­˜ï¼‰åˆ·æ–°å½“å‰é¡µé¢æ—¶æµè§ˆå™¨ä¼šæ ¹æ®å½“å‰è¿è¡Œç¯å¢ƒå†…å­˜æ¥å†³å®šæ˜¯ä» Memory Cache è¿˜æ˜¯ ä»Disk Cacheä¸­æ‹¿(å¯ä»¥çœ‹åˆ°ä¸‹å›¾æœ€åå‡ ä¸ªæ–‡ä»¶æœ‰æ—¶å€™æ˜¯ä» Memory Cacheä¸­æ‹¿æœ‰æ—¶å€™æ˜¯ä»Disk Cacheä¸­æ‹¿) 303ä¸302çš„åŒºåˆ«303 å¸¸ç”¨äºå°† POST è¯·æ±‚é‡å®šå‘åˆ° GET è¯·æ±‚ï¼Œæ¯”å¦‚ä½ ä¸Šä¼ äº†ä¸€ä»½ä¸ªäººä¿¡æ¯ï¼ŒæœåŠ¡å™¨å‘å›ä¸€ä¸ª 303 å“åº”ï¼Œå°†ä½ å¯¼å‘ä¸€ä¸ªâ€œä¸Šä¼ æˆåŠŸâ€é¡µé¢ã€‚ websoket httpä¹‹é—´çš„è”ç³» éƒ½æ˜¯ä¸€æ ·åŸºäºTCPçš„ï¼Œéƒ½æ˜¯å¯é æ€§ä¼ è¾“åè®®ã€‚ éƒ½æ˜¯åº”ç”¨å±‚åè®®ã€‚ WebSocketåœ¨å»ºç«‹æ¡æ‰‹æ—¶ï¼Œæ•°æ®æ˜¯é€šè¿‡HTTPä¼ è¾“çš„ã€‚ä½†æ˜¯å»ºç«‹ä¹‹åï¼Œåœ¨çœŸæ­£ä¼ è¾“æ—¶å€™æ˜¯ä¸éœ€è¦HTTPåè®®çš„ã€‚ WebSocketè¿æ¥çš„è¿‡ç¨‹æ˜¯ï¼š é¦–å…ˆï¼Œå®¢æˆ·ç«¯å‘èµ·httpè¯·æ±‚ï¼Œç»è¿‡3æ¬¡æ¡æ‰‹åï¼Œå»ºç«‹èµ·TCPè¿æ¥ï¼›httpè¯·æ±‚é‡Œå­˜æ”¾WebSocketæ”¯æŒçš„ç‰ˆæœ¬å·ç­‰ä¿¡æ¯ï¼Œå¦‚ï¼šUpgradeã€Connectionã€WebSocket-Versionç­‰ï¼›ç„¶åï¼ŒæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„æ¡æ‰‹è¯·æ±‚åï¼ŒåŒæ ·é‡‡ç”¨HTTPåè®®å›é¦ˆæ•°æ®ï¼›æœ€åï¼Œå®¢æˆ·ç«¯æ”¶åˆ°è¿æ¥æˆåŠŸçš„æ¶ˆæ¯åï¼Œå¼€å§‹å€ŸåŠ©äºTCPä¼ è¾“ä¿¡é“è¿›è¡Œå…¨åŒå·¥é€šä¿¡ã€‚ http keepaliveHttp keep-aliveåœ¨ HTTP 1.0 æ—¶æœŸï¼Œæ¯ä¸ª TCP è¿æ¥åªä¼šè¢«ä¸€ä¸ª HTTP Transactionï¼ˆè¯·æ±‚åŠ å“åº”ï¼‰ä½¿ç”¨ï¼Œè¯·æ±‚æ—¶å»ºç«‹ï¼Œè¯·æ±‚å®Œæˆé‡Šæ”¾è¿æ¥ã€‚å½“ç½‘é¡µå†…å®¹è¶Šæ¥è¶Šå¤æ‚ï¼ŒåŒ…å«å¤§é‡å›¾ç‰‡ã€CSS ç­‰èµ„æºä¹‹åï¼Œè¿™ç§æ¨¡å¼æ•ˆç‡å°±æ˜¾å¾—å¤ªä½äº†ã€‚æ‰€ä»¥ï¼Œåœ¨ HTTP 1.1 ä¸­ï¼Œå¼•å…¥äº† HTTP persistent connection çš„æ¦‚å¿µï¼Œä¹Ÿç§°ä¸º HTTP keep-aliveï¼Œç›®çš„æ˜¯å¤ç”¨TCPè¿æ¥ï¼Œåœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šè¿›è¡Œå¤šæ¬¡çš„HTTPè¯·æ±‚ä»è€Œæé«˜æ€§èƒ½ã€‚ tcp keepaliveåœ¨ä½¿ç”¨TCPé•¿è¿æ¥ï¼ˆå¤ç”¨å·²å»ºç«‹TCPè¿æ¥ï¼‰çš„åœºæ™¯ä¸‹ï¼Œéœ€è¦å¯¹TCPè¿æ¥è¿›è¡Œä¿æ´»ï¼Œé¿å…è¢«ç½‘å…³å¹²æ‰è¿æ¥ã€‚åœ¨åº”ç”¨å±‚ï¼Œå¯ä»¥é€šè¿‡å®šæ—¶å‘é€å¿ƒè·³åŒ…çš„æ–¹å¼å®ç°ã€‚ æ•°å­—ç­¾åå·¥ä½œåŸç†https://blog.51cto.com/winda/1968298 å‚è€ƒæ–‡ç«  æµè§ˆå™¨ç¼“å­˜æ§åˆ¶è¯¦è§£ï¼ˆcookieã€sessionã€localStorageã€Cache-Controlç­‰ å®‰å…¨|å¸¸è§çš„Webæ”»å‡»æ‰‹æ®µä¹‹CSRFæ”»å‡» å‰ç«¯ 100 é—®ï¼šèƒ½ææ‡‚80%çš„è¯·æŠŠç®€å†ç»™æˆ‘","categories":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"https://ashleyblog.xyz/categories/é¢ç»/"},{"name":"æµè§ˆå™¨","slug":"é¢ç»/æµè§ˆå™¨","permalink":"https://ashleyblog.xyz/categories/é¢ç»/æµè§ˆå™¨/"}],"tags":[]},{"title":"ç§‹å­£å‰ç«¯é¢ç»è®°å½•","slug":"ç§‹å­£å‰ç«¯é¢ç»è®°å½•","date":"2019-12-11T09:16:23.000Z","updated":"2023-04-02T14:00:30.297Z","comments":true,"path":"2019/12/11/ç§‹å­£å‰ç«¯é¢ç»è®°å½•/","link":"","permalink":"https://ashleyblog.xyz/2019/12/11/ç§‹å­£å‰ç«¯é¢ç»è®°å½•/","excerpt":"","text":"é—®åˆ°sessionstorageè·Ÿlocalstorageçš„åŒºåˆ« ç­”å‰è€…åªåœ¨å½“å‰çª—å£æœ‰æ•ˆæ˜¯å¯¹çš„ å†é—®ä¸€éåˆä¸ç¡®å®šäº† è¯´æ˜åŸºç¡€ä¸ç‰¢å›ºå®¹æ˜“è¢«å¥—è·¯ å­˜å‚¨å¤§å°ï¼š éƒ½ä¸º 5MB å­˜å‚¨ä½ç½®ï¼š éƒ½åœ¨å®¢æˆ·ç«¯ï¼Œä¸äºˆæœåŠ¡å™¨è¿›è¡Œäº¤äº’é€šä¿¡ å­˜å‚¨å†…å®¹ç±»å‹ï¼š å­—ç¬¦ä¸²ï¼Œå¤æ‚çš„å¯¹è±¡å¯ä»¥ä½¿ç”¨ ECMAScript æä¾›çš„ JSON stringify å’Œ parse æ¥å¤„ç† è·å–æ–¹å¼ï¼šwindow.localStorage, window.sessionStorage åº”ç”¨åœºæ™¯ï¼š localStorage ç”¨äºé•¿æœŸç™»å½• and åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç™»å½•sessionStorage æ•æ„Ÿè´¦å·ä¸€æ¬¡æ€§ç™»å½• é¡µé¢å¡é¡¿ æ€ä¹ˆç›‘æµ‹åˆ°æ˜¯å“ªä¸€éƒ¨åˆ†çš„ä»£ç å‡ºç°äº†é—®é¢˜ç«ç„°å›¾(å¯ä»¥çœ‹åˆ°æ¯ä¸ªå‡½æ•°å æ®çš„å®½åº¦ï¼Œè¶Šå®½è¡¨ç¤ºæ‰§è¡Œçš„æ—¶é—´è¶Šé•¿) è¦æ˜¯ä¸ç”¨æ¡†æ¶çš„è¯ æ€ä¹ˆä¼˜åŒ–ä»£ç çš„ç»“æ„ï¼ŸMVVMåˆç§°çŠ¶æ€æœºåˆ¶ï¼ŒView å’Œ ViewModel æ˜¯è¿›è¡Œç»‘å®šçš„ï¼Œæ”¹å˜ ViewModel å°±ä¼šç›´æ¥ä½œç”¨åˆ° View è§†å›¾ä¸Šï¼Œè€Œ View ä¼šæŠŠäº‹ä»¶ä¼ é€’ç»™ ViewModel,ViewModel å»å¯¹ Model è¿›è¡Œæ“ä½œå¹¶æ¥å—æ›´æ–°ã€‚ Viewï¼šUI ç•Œé¢ ViewModelï¼šå®ƒæ˜¯ View çš„æŠ½è±¡ï¼Œè´Ÿè´£ View ä¸ Model ä¹‹é—´ä¿¡æ¯è½¬æ¢ï¼Œå°† View çš„ Command ä¼ é€åˆ° Modelï¼›æ¯”èµ· MVP ä¸­ View éœ€è¦è‡ªå·±æä¾› APIï¼ŒMVVM åœ¨ VM ä¸­æ„å»ºä¸€ç»„çŠ¶æ€æ•°æ®ï¼ˆstate dataï¼‰ï¼Œä½œä¸º View çŠ¶æ€çš„æŠ½è±¡ã€‚ç„¶åé€šè¿‡åŒå‘æ•°æ®ç»‘å®šï¼ˆdata bindingï¼‰ä½¿ VM ä¸­çš„çŠ¶æ€æ•°æ®ï¼ˆstate dataï¼‰ä¸ View ä¸­çš„æ˜¾ç¤ºçŠ¶æ€ï¼ˆscreen stateï¼‰ä¿æŒä¸€è‡´ã€‚è¿™æ ·ï¼ŒVM ä¸­çš„å±•ç¤ºé€»è¾‘åªéœ€è¦ä¿®æ”¹å¯¹åº”çš„çŠ¶æ€æ•°æ®ï¼Œå°±å¯ä»¥æ§åˆ¶ View çš„çŠ¶æ€ï¼Œä»è€Œé¿å…åœ¨ View ä¸Šå¼€å‘å¤§é‡çš„æ¥å£ Modelï¼šæ•°æ®è®¿é—®å±‚ ï¼Ÿä¸é€‚åˆ SEOï¼Ÿ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰å¥½ä¸€ä¸ª JavaScript å¯¹è±¡ä½œä¸º Modelï¼Œå¹¶ä¸”æŠŠè¿™ä¸ª Model çš„ä¸¤ä¸ªå±æ€§ç»‘å®šåˆ° DOM èŠ‚ç‚¹ä¸Šï¼š MVCView æŒæœ‰äº† Controllerï¼ŒæŠŠäº‹ä»¶ä¼ é€’ç»™ Controllerï¼ŒController ç”±æ­¤å»è§¦å‘ Model å±‚çš„äº‹ä»¶ï¼ŒModel æ›´æ–°å®Œæ•°æ®ï¼ˆç½‘ç»œæˆ–è€…æœ¬åœ°æ•°æ®ï¼‰ä¹‹åè§¦å‘ View çš„æ›´æ–°äº‹ä»¶ View è´Ÿè´£æ¸²æŸ“ç”¨æˆ·ç•Œé¢ï¼Œåº”è¯¥é¿å…åœ¨ View ä¸­æ¶‰åŠä¸šåŠ¡é€»è¾‘ Controller è´Ÿè´£æ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼Œæ ¹æ®ç”¨æˆ·è¾“å…¥è°ƒç”¨ Model é€»è¾‘ï¼Œå°†äº§ç”Ÿçš„ç»“æœäº¤ç»™ View éƒ¨åˆ†ï¼Œè®© View æ¸²æŸ“å‡ºå¿…è¦çš„è¾“å‡º Model è´Ÿè´£ç®¡ç†æ•°æ®ï¼Œå¤§éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘ä¹Ÿåº”è¯¥æ”¾åœ¨ Model ç¼ºç‚¹ï¼š ç”±äºåœ¨å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€å‡ºç° View ä¸ Model ä¸ç»è¿‡ Controller é€šä¿¡çš„ç°è±¡ï¼Œé€ æˆæ•°æ®æµæ··ä¹±ï¼Œéš¾ä»¥ç»´æŠ¤å’Œå¢åŠ åŠŸèƒ½ mvc ä¸ mvvm çš„åŒºåˆ«MVVM ä¸ MVC æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼šå®ƒå®ç°äº† View å’Œ Model çš„è‡ªåŠ¨åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯å½“ Model çš„å±æ€§æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬ä¸ç”¨å†è‡ªå·±æ‰‹åŠ¨æ“ä½œ Dom å…ƒç´ ï¼Œæ¥æ”¹å˜ View çš„æ˜¾ç¤ºï¼Œè€Œæ˜¯æ”¹å˜å±æ€§åè¯¥å±æ€§å¯¹åº” View å±‚æ˜¾ç¤ºä¼šè‡ªåŠ¨æ”¹å˜ æ‹¿å…¸å‹çš„ MVVM æ¨¡å¼çš„ä»£è¡¨ï¼ŒVueï¼Œæ¥ä¸¾ä¾‹html éƒ¨åˆ†ç›¸å½“äº View å±‚ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œçš„ View é€šè¿‡é€šè¿‡æ¨¡æ¿è¯­æ³•æ¥å£°æ˜å¼çš„å°†æ•°æ®æ¸²æŸ“è¿› DOM å…ƒç´ ï¼Œå½“ ViewModel å¯¹ Model è¿›è¡Œæ›´æ–°æ—¶ï¼Œé€šè¿‡æ•°æ®ç»‘å®šæ›´æ–°åˆ° Viewã€‚ Vue å®ä¾‹ä¸­çš„ data ç›¸å½“äº Model å±‚ï¼Œè€Œ ViewModel å±‚çš„æ ¸å¿ƒæ˜¯ Vue ä¸­çš„åŒå‘æ•°æ®ç»‘å®šï¼Œå³ Model å˜åŒ–æ—¶ VIew å¯ä»¥å®æ—¶æ›´æ–°ï¼ŒView å˜åŒ–ä¹Ÿèƒ½è®© Model å‘ç”Ÿå˜åŒ–ã€‚ è·¨åŸŸè¡¥å……ï¼š cra ç”Ÿæˆçš„é¡¹ç›®æ”¯æŒåœ¨package.jsonå­—æ®µè®¾ç½®proxyå¦‚ï¼šwill proxy your request to http://localhost:4000/api/todos as a fallback 1\"proxy\": \"http://localhost:4000\", æœ¬åœ°æµ‹è¯•ç”¨ é…ç½® hosts æ–‡ä»¶ å¦‚ï¼šâ€™127.0.0.1 xx.comâ€™æˆ–è€…æ˜¯é…ç½® switchyomega æ¯”å¦‚è¾“å…¥ test.xxx.com ä»£ç†åˆ° localhost è¿™æ ·å‘è¯·æ±‚çš„æ—¶å€™çš„ origin æ˜¯ test å°±ä¸ä¼šå‡ºç°è·¨åŸŸé”™è¯¯ ï¼ˆmidc æœ‰äº›æ¥å£æ˜¯èƒ½è·¨åŸŸçš„ï¼Œæ‰€ä»¥ origin æ˜¯ localhost çš„æ—¶å€™ä¹Ÿä¸ä¼šæŠ¥é”™ï¼‰ postmessage+iframe æ€§èƒ½ä¼˜åŒ– ï¼ˆä¸è¦ä¸€ç›´è¯´ reactï¼‰è™šæ‹Ÿ domå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ï¼ŒåŒ…å«äº† tagã€propsã€children ä¸‰ä¸ªå±æ€§ã€‚ 1234567891011121314151617&#123; tag: 'div', props: &#123; id: 'app' &#125;, chidren: [ &#123; tag: 'p', props: &#123; className: 'text' &#125;, chidren: [ 'hello world!!!' ] &#125; ]&#125; ä¸»æµçš„è™šæ‹Ÿ DOM åº“ï¼ˆsnabbdomã€virtual-domï¼‰ï¼Œé€šå¸¸éƒ½æœ‰ä¸€ä¸ª h å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ React ä¸­çš„ React.createElementï¼Œä»¥åŠ Vue ä¸­çš„ render æ–¹æ³•ä¸­çš„ createElementï¼Œå¦å¤– React æ˜¯é€šè¿‡ babel å°† jsx è½¬æ¢ä¸º h å‡½æ•°æ¸²æŸ“çš„å½¢å¼ï¼Œè€Œ Vue æ˜¯ä½¿ç”¨ vue-loader å°†æ¨¡ç‰ˆè½¬ä¸º h å‡½æ•°æ¸²æŸ“çš„å½¢å¼ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡ babel-plugin-transform-vue-jsx æ’ä»¶åœ¨ vue ä¸­ä½¿ç”¨ jsxï¼Œæœ¬è´¨è¿˜æ˜¯è½¬æ¢ä¸º h å‡½æ•°æ¸²æŸ“å½¢å¼ï¼‰ã€‚ è™šæ‹Ÿ dom çš„ä¼˜åŠ¿å‡å°‘ JavaScript æ“ä½œçœŸå® DOM çš„å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚è™½ç„¶è¿™ä¸€ä¸ªè™šæ‹Ÿ DOM å¸¦æ¥çš„ä¸€ä¸ªä¼˜åŠ¿ï¼Œä½†å¹¶ä¸æ˜¯å…¨éƒ¨ã€‚è™šæ‹Ÿ DOM æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºæŠ½è±¡äº†åŸæœ¬çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œå®ç°äº†è·¨å¹³å°çš„èƒ½åŠ›ï¼Œè€Œä¸ä»…ä»…å±€é™äºæµè§ˆå™¨çš„ DOMï¼Œå¯ä»¥æ˜¯å®‰å“å’Œ IOS çš„åŸç”Ÿç»„ä»¶ï¼Œå¯ä»¥æ˜¯è¿‘æœŸå¾ˆç«çƒ­çš„å°ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ˜¯å„ç§ GUI æ·±æµ…æ‹·è´çš„åŒºåˆ« æ€ä¹ˆæ·±æ‹·è´ä¸€ä¸ªå‡½æ•° æµ…æ‹·è´â€”æµ…æ‹·è´æ˜¯æŒ‡å¤åˆ¶å¯¹è±¡çš„æ—¶å€™ï¼Œåªå¯¹ç¬¬ä¸€å±‚é”®å€¼å¯¹è¿›è¡Œç‹¬ç«‹çš„å¤åˆ¶ï¼Œå¦‚æœå¯¹è±¡å†…è¿˜æœ‰å¯¹è±¡ï¼Œåˆ™åªèƒ½å¤åˆ¶åµŒå¥—å¯¹è±¡çš„åœ°å€ 12// æµ…æ‹·è´æ•°ç»„a.slice() || a.concat() æ·±æ‹·è´â€”æ·±æ‹·è´æ˜¯æŒ‡å¤åˆ¶å¯¹è±¡çš„æ—¶å€™å®Œå…¨çš„æ‹·è´ä¸€ä»½å¯¹è±¡ï¼Œå³ä½¿åµŒå¥—äº†å¯¹è±¡ï¼Œä¸¤è€…ä¹Ÿç›¸äº’åˆ†ç¦»ï¼Œä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¹Ÿä¸ä¼šå½±å“å¦ä¸€ä¸ªã€‚å…¶å®åªè¦é€’å½’ä¸‹å»ï¼ŒæŠŠé‚£äº›å±æ€§çš„å€¼ä»ç„¶æ˜¯å¯¹è±¡çš„å†æ¬¡è¿›å…¥å¯¹è±¡å†…éƒ¨ä¸€ ä¸€è¿›è¡Œå¤åˆ¶å³å¯ã€‚ note! JSON.parse(JSON.stringify(obj))çš„ç¼ºé™·æ˜¯ä¸èƒ½å¤Ÿæ‹·è´å‡½æ•° å› ä¸º JSON ä¸å…è®¸åŒ…å«å‡½æ•°ï¼ŒJSON.stringify() ä¼šåˆ é™¤ JavaScript å¯¹è±¡çš„å‡½æ•°ï¼ŒåŒ…æ‹¬ key å’Œ valueã€‚ è§£å†³JSON.stringifyä¸èƒ½æ‹·è´å‡½æ•°çš„é—®é¢˜ 123456789101112131415161718192021222324252627function deepClone(source, hash = new WeakMap()) &#123; let obj const Constructor = source.constructor switch (Constructor) &#123; case Date: obj = new Constructor(source.getTime()) break case RegExp: obj = new Constructor(source) break default: if (hash.has(source)) &#123; return hash.get(source) &#125; obj = new Constructor() hash.set(source, obj) break &#125; for (let key in source) &#123; obj[key] = isObject(source[key]) ? deepClone(source[key], hash) : source[key] &#125; return obj&#125; doctype çš„ä½œç”¨å£°æ˜äº†çš„è¯æµè§ˆå™¨å°±ä¼šä½¿ç”¨æ ‡å‡†æ¨¡å¼è§£æé¡µé¢ è¿™æ ·æ‰€æœ‰æµè§ˆå™¨æ˜¾ç¤ºçš„æ ·å¼å°±æ˜¯ä¸€æ ·çš„ ä½¿ç”¨symbolä¼šé‡åˆ°å“ªäº›é—®é¢˜ symbolçš„ç‰¹ç‚¹1.Symbol(â€˜keyâ€™) !== Symbol(â€˜keyâ€™) //true,è¿”å›ä¸åŒ2.Symbol(â€œknowâ€).name = 1; // TypeError,åªè¯»3.forâ€¦in ã€ Object.keys(obj) ã€Object.getOwnPropertyNames(obj)ä¼šå¿½ç•¥ Symbol,å³è‡ªèº«ä¸å¯æšä¸¾ 4.ä¸èƒ½ç”¨ obj.prop çš„å½¢å¼è®¿é—® symbolçš„ä½¿ç”¨åœºæ™¯ç¬¬ä¸€ä¸ªä½œç”¨æ˜¯ä½œä¸ºå±æ€§åé¿å…å±æ€§åå†²çªï¼Œç¬¬äºŒä¸ªä½œç”¨æ˜¯æ›¿ä»£ä»£ç ä¸­å¤šæ¬¡ä½¿ç”¨çš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ï¼šabcï¼‰ï¼Œå¤šæ¬¡ä½¿ç”¨çš„å­—ç¬¦ä¸²åœ¨ä»£ç ä¸­ä¸æ˜“ç»´æŠ¤ï¼Œè€Œè¿™æ—¶å€™å®šä¹‰ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼ˆå±æ€§åç”¨ Symbol æ ¼å¼ï¼‰ï¼Œå€¼ä¸º abcï¼Œå°±å¯ä»¥ä½œä¸ºå…¨å±€å˜é‡æ¥ä½¿ç”¨äº†ã€‚ç¬¬ä¸‰ä¸ªï¼Œç”±äºä»¥ Symbol å€¼ä½œä¸ºåç§°çš„å±æ€§ï¼Œä¸ä¼šè¢«å¸¸è§„æ–¹æ³•éå†å¾—åˆ°ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œä¸ºå¯¹è±¡å®šä¹‰ä¸€äº›éç§æœ‰çš„ã€ä½†åˆå¸Œæœ›åªç”¨äºå†…éƒ¨çš„æ–¹æ³•ã€‚ç¬¬å››ä¸ªï¼Œè¿™ä¸ªæœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›é‡æ–°ä½¿ç”¨åŒä¸€ä¸ª Symbol å€¼ï¼ŒSymbol.for æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç„¶åæœç´¢æœ‰æ²¡æœ‰ä»¥è¯¥å‚æ•°ä½œä¸ºåç§°çš„ Symbol å€¼ã€‚å¦‚æœæœ‰ï¼Œå°±è¿”å›è¿™ä¸ª Symbol å€¼ï¼Œå¦åˆ™å°±æ–°å»ºå¹¶è¿”å›ä¸€ä¸ªä»¥è¯¥å­—ç¬¦ä¸²ä¸ºåç§°çš„ Symbol å€¼ã€‚ ç”Ÿæˆä¸€ä¸ªå”¯ä¸€å€¼ å› ä¸ºæˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒçš„æ—¶å€™å±æ€§å€¼æ˜¯å¤šå°‘éƒ½æ— æ‰€è°“ 1234567var race = &#123; protoss: Symbol(), terran: Symbol(), zerg: Symbol()&#125;race.protoss !== race.terran // true åŸºæœ¬æ•°æ®ç±»å‹çš„åˆ¤æ–­ typeof Symbol() === â€˜symbolâ€™ reduxçš„åŸç†ï¼ˆè¦æ·±å…¥ ä¸­é—´ä»¶ï¼‰å…³äºä½¿ç”¨hookså®ç°reduxdispatch ä¸€ä¸ª action çš„æ—¶å€™å°† action ä¼ å…¥æ‰€æœ‰çš„ reducers,ç„¶åè¿”å›æ›´æ–°çš„ state åŒæ—¶è§¦å‘ä½¿ç”¨subscribeæ–¹æ³•æ³¨å†Œçš„æ‰€æœ‰ listener å‡½æ•°(ä¸ºä»€ä¹ˆåœ¨ hasChanged ä¸º true çš„æ—¶å€™è¿˜è¦æ¥ç€è°ƒç”¨åé¢çš„ reducers å‘¢ï¼Ÿ) ä¸ºä»€ä¹ˆreducerè¦æ˜¯ä¸€ä¸ªçº¯å‡½æ•° react æœ‰ä¸€ä¸ª shouldcomponentupdate äº‹ä»¶ä½œä¸ºä¼˜åŒ–ï¼Œå½“æˆ‘ä»¬é‡æ¸²æŸ“æ—¶ä¹Ÿå¸Œæœ›è®¢é˜…äº‹ä»¶èƒ½å·®å¼‚åŒ–æ›´æ–°ä»¥ä¼˜åŒ–æ€§èƒ½ï¼Œæ€ä¹ˆå®ç°ï¼Ÿæ¯”å¯¹ä¸€æ¬¡æ›´æ–°é‡Œçš„æ–°è€ stateå½“ reducer æ˜¯çº¯å‡½æ•°æ—¶ï¼Œç”Ÿæˆä¸€ä¸ªæ–° stateï¼Œæ–°è€å¯¹è±¡åœ°å€å¼•ç”¨ä¸ä¸€ï¼Œèƒ½å®ç°è‹¥ reducer æ˜¯å‰¯ä½œç”¨ï¼Œé‚£ä¹ˆè™½ç„¶å¯¹è±¡å†…å˜åŒ–ï¼Œæ–°è€å¯¹è±¡åœ°å€ä¸€è‡´ï¼Œä¸èƒ½å®ç°æ­¤å¤–åœ¨combinereducersä¸­åˆ¤æ–­haschangedä¹Ÿæ˜¯é€šè¿‡nextStateForKey !== previousStateForKey ç›´æ¥åˆ¤æ–­å¼•ç”¨è€Œä¸æ˜¯æ·±åº¦éå†æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å€¼ æ›´ç®€æ´ å¦‚æœä¸æ˜¯çº¯å‡½æ•° è¿”å›çš„ state å°±å…·æœ‰ä¸ç¡®å®šæ€§ é‚£ä¹ˆ UI æ‹¿åˆ°çš„æ•°æ®ä¹Ÿå…·æœ‰ä¸ç¡®å®šæ€§ redux ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼ store æä¾›æ•°æ®çš„ get é’©å­ï¼ˆstore.getStateï¼‰,ä¸ç›´æ¥æä¾›æ•°æ®çš„ setï¼Œæ‰€ä»¥å¿…é¡»é€šè¿‡ dispatchï¼ˆactionï¼‰æ¥ set æ•°æ®ã€‚ åˆ©ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆsub/ pubï¼‰è¿æ¥ model å’Œ view çš„ä¸­é—´å¯¹è±¡ã€‚view å±‚é€šè¿‡è°ƒç”¨ store.dispatch æ–¹æ³•è§¦å‘ reducer æ”¹å˜ modelã€‚å¯¹åº” pubã€‚ model å±‚é€šè¿‡è°ƒç”¨ store.subscribe æ³¨å†Œè§†å›¾æ›´æ–°äº‹ä»¶ï¼ˆsetstateï¼‰ï¼Œè¯¥äº‹ä»¶ä¼šåœ¨æ•°æ®æ”¹å˜ä¹‹åè¢«è°ƒç”¨ã€‚å¯¹åº” subã€‚ è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼çš„åŒºåˆ« å…³äºæœ€è¿‘åšçš„é¡¹ç›®ï¼Œè‡ªæˆ‘ä»‹ç»ï¼Œé”™è¯¯ç›‘æ§ï¼Œå­¦äº†å“ªäº›æ–°æŠ€æœ¯ã€‚ã€‚ã€‚å…³äºå‡½æ•°ç»„ä»¶è·Ÿç±»å¼ç»„ä»¶çš„åŒºåˆ«propsæ˜¯ä¸å¯å˜æ•°æ®ï¼Œæ°¸è¿œä¸ä¼šæ”¹å˜ã€‚ä½†æ˜¯ï¼Œthiså´å§‹ç»ˆæ˜¯å¯å˜çš„ ã€‚æ‰€ä»¥é€šè¿‡thisæ‹¿åˆ°çš„æ°¸è¿œéƒ½æ˜¯æœ€æ–°çš„å€¼ 123456789101112131415161718192021222324class ProfilePage extends React.Component &#123; showMessage = () =&gt; &#123; alert('Followed ' + this.props.user) &#125; handleClick = () =&gt; &#123; setTimeout(this.showMessage, 3000) &#125; render() &#123; return &lt;button onClick=&#123;this.handleClick&#125;&gt;Follow&lt;/button&gt; &#125;&#125;function ProfilePage(props) &#123; const showMessage = () =&gt; &#123; alert('Followed ' + props.user) &#125; const handleClick = () =&gt; &#123; setTimeout(showMessage, 3000) &#125; return &lt;button onClick=&#123;handleClick&#125;&gt;Follow&lt;/button&gt;&#125; å½“ç‚¹å‡» follow ä¹‹åå†åˆ‡æ¢ç”¨æˆ·çš„åå­—ï¼Œä¸‰ç§’ä¹‹åå‡½æ•°ç»„ä»¶å¼¹å‡ºæ¥çš„ä¾æ—§æ˜¯ç‚¹å‡» follow çš„æ—¶å€™çš„ç”¨æˆ·çš„åå­—è€Œç±»ç»„ä»¶å¼¹å‡ºæ¥çš„å´æ˜¯åˆ‡æ¢ä¹‹åçš„åå­—ï¼Œæ˜¯å› ä¸ºå‡½æ•°ç»„ä»¶èƒ½æ•è·æŸä¸€æ—¶åˆ»çš„ props ä¸ stateï¼ˆhooks ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼‰ ç®—æ³•çº¢é»‘æ ‘æœ¬è´¨æ˜¯ä¸€ç§äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œä¹Ÿå°±æ˜¯å·¦è¾¹çš„å­èŠ‚ç‚¹çš„å€¼æ¯”æ ¹èŠ‚ç‚¹å°ï¼Œå³è¾¹çš„æ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œåœ¨æç«¯æƒ…å†µä¸‹ï¼Œæ¯”å¦‚è¿ç»­æ’å…¥ä¾æ¬¡é€’å¢æˆ–é€’å‡çš„èŠ‚ç‚¹ï¼ŒæŸ¥æ‰¾æ ‘å°†é€€åŒ–æˆé“¾è¡¨çº¢é»‘æ ‘é€šè¿‡å¦‚ä¸‹çš„æ€§è´¨å®šä¹‰å®ç°è‡ªå¹³è¡¡ï¼š èŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ã€‚æ ¹æ˜¯é»‘è‰²ã€‚æ‰€æœ‰å¶å­éƒ½æ˜¯é»‘è‰²ï¼ˆå¶å­æ˜¯ NIL èŠ‚ç‚¹ï¼‰ã€‚æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹å¿…é¡»æœ‰ä¸¤ä¸ªé»‘è‰²çš„å­èŠ‚ç‚¹ã€‚ï¼ˆä»æ¯ä¸ªå¶å­åˆ°æ ¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ã€‚ï¼‰ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰ç®€å•è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ï¼ˆç®€ç§°é»‘é«˜ï¼‰ å®ç°æ¨¡ç³Šæœç´¢ç»“æœçš„å…³é”®è¯é«˜äº®æ˜¾ç¤ºè€ƒè™‘èŠ‚æµã€ç¼“å­˜ã€‚å…¶å®è¿˜å¯ä»¥ä¸Šåˆ—è¡¨diff+å®šæ—¶æ¸…ç†ç¼“å­˜ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647function debounce(fn, timeout = 300) &#123; let t; return (...args) =&gt; &#123; if (t) &#123; clearTimeout(t); &#125; t = setTimeout(() =&gt; &#123; fn.apply(fn, args); &#125;, timeout); &#125; &#125;// dataåº”è¯¥æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°ç»„ ä¸ºäº†å‡å°cacheå çš„å†…å­˜ ç¼“å­˜ç”¨æˆ·è¾“å…¥è¿‡çš„å…³é”®è¯ function memorize(fn) &#123; const cache = new Map(); return (name) =&gt; &#123; if (!name) &#123; container.innerHTML = ''; return; &#125; if (cache.get(name)) &#123; container.innerHTML = cache.get(name); return; &#125; const res = fn.call(fn, name).join(''); cache.set(name, res); container.innerHTML = res; &#125; &#125; function handleInput(value) &#123; const reg = new RegExp(`\\($&#123;value&#125;\\)`); const search = data.reduce((res, cur) =&gt; &#123; if (reg.test(cur)) &#123; const match = RegExp.$1; res.push(`&lt;li&gt;$&#123;cur.replace(match, '&lt;bdi&gt;$&amp;&lt;/bdi&gt;')&#125;&lt;/li&gt;`); &#125; return res; &#125;, []); return search; &#125; const data = [\"ä¸Šæµ·é‡ç”ŸåŠ¨ç‰©å›­\", \"ä¸Šé¥¶é‡ç”ŸåŠ¨ç‰©å›­\", \"åŒ—äº¬å··å­\", \"ä¸Šæµ·ä¸­å¿ƒ\", \"ä¸Šæµ·é»„åŸ”æ±Ÿ\", \"è¿ªå£«å°¼ä¸Šæµ·\", \"é™†å®¶å˜´ä¸Šæµ·ä¸­å¿ƒ\"] const container = document.querySelector('.container'); const memorizeInput = memorize(handleInput); document.querySelector('.inp').addEventListener('input', debounce(e =&gt; &#123; memorizeInput(e.target.value); &#125;)) å‚è€ƒæ–‡ç«  è™šæ‹Ÿ DOM åˆ°åº•æ˜¯ä»€ä¹ˆ MVC å’Œ MVVM çš„åŒºåˆ« React å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶çš„å·®å¼‚ â€œæ·±æ‹·è´â€ ä¸ â€œæµ…æ‹·è´â€ çš„åŒºåˆ«ï¼ŒJS å®ç°æ·±æµ…æ‹·è´çš„å‡ ç§æ–¹æ³• ã€Œæ¯æ—¥ä¸€é¢˜ã€JS ä¸­çš„ Symbol æ˜¯ä»€ä¹ˆï¼Ÿ å‰ç«¯ 100 é—®ï¼šèƒ½ææ‡‚ 80%çš„è¯·æŠŠç®€å†ç»™æˆ‘","categories":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"https://ashleyblog.xyz/categories/é¢ç»/"}],"tags":[]},{"title":"é¢ç»é¡¹ç›®æ„å»ºç¯‡","slug":"é¢ç»é¡¹ç›®æ„å»ºç¯‡","date":"2019-12-11T02:58:38.000Z","updated":"2023-04-02T14:00:30.286Z","comments":true,"path":"2019/12/11/é¢ç»é¡¹ç›®æ„å»ºç¯‡/","link":"","permalink":"https://ashleyblog.xyz/2019/12/11/é¢ç»é¡¹ç›®æ„å»ºç¯‡/","excerpt":"","text":"æ€ä¹ˆçº¦æŸä»£ç è§„èŒƒï¼Ÿç»“åˆlint-stagedä¸husky å®ç°åœ¨æ¯æ¬¡æäº¤ä¹‹å‰ è‡ªåŠ¨ä¿®å¤æœ¬æ¬¡ä¿®æ”¹çš„ä»£ç  123456789101112131415161718&#123; \"scripts\": &#123; \"precommit\": \"lint-staged\" //è¿™ä¸ªé’©å­æ˜¯åœ¨å®‰è£…huskyä¹‹åæ‰æœ‰çš„ package.jsonä¸­åŸæœ‰çš„é’©å­:https://segmentfault.com/a/1190000008832423 &#125;, \"lint-staged\": &#123; \"src/**/*.js\": [\"eslint --fix\", \"git add\"] &#125;&#125;// æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„é…ç½®ï¼Œè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ï¼š&#123; \"scripts\": &#123; \"precommit\": \"lint-staged\" &#125;, \"lint-staged\": &#123; \"src/**/*.js\": [\"prettier --write\", \"git add\"] &#125;&#125; webpackæ‰“åŒ…ä¼˜åŒ– å®šä½ä½“ç§¯å¤§çš„æ¨¡å— - webpack-bundle-analyzer ç§»é™¤ä¸å¿…è¦çš„æ–‡ä»¶ä½¿ç”¨webpackè‡ªå¸¦çš„ä¸¤ä¸ªåº“ IgnorePlugin ContextReplacementPlugin 12345678910// æ’ä»¶é…ç½®plugins: [ // å¿½ç•¥moment.jsä¸­æ‰€æœ‰çš„localeæ–‡ä»¶ new webpack.IgnorePlugin(/^\\.\\/locale$/, /moment$/),],// ä½¿ç”¨æ–¹å¼const moment = require('moment');// å¼•å…¥zh-cn localeæ–‡ä»¶require('moment/locale/zh-cn');moment.locale('zh-cn'); æ¨¡å—åŒ–å¼•ç”¨ 1234import &#123;chain, cloneDeep&#125; from 'lodash';// å¯ä»¥æ”¹å†™ä¸ºimport chain from 'lodash/chain';import cloneDeep from 'lodash/cloneDeep'; é€šè¿‡CDNå¼•ç”¨ æœåŠ¡ç«¯å¼€å¯Gzipå‹ç¼©å¼€å¯gzipå‹ç¼©å¯ä»¥å‡å°‘HTTPä¼ è¾“çš„æ•°æ®é‡å’Œæ—¶é—´ï¼Œä»è€Œå‡å°‘å®¢æˆ·ç«¯è¯·æ±‚çš„å“åº”æ—¶é—´ splitChunksé…ç½®ä»£ç åˆ†å‰²æ­¤ç‰¹æ€§èƒ½å¤ŸæŠŠä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„ bundle ä¸­ï¼Œç„¶åå¯ä»¥æŒ‰éœ€åŠ è½½æˆ–å¹¶è¡ŒåŠ è½½è¿™äº›æ–‡ä»¶ã€‚ä»£ç åˆ†ç¦»å¯ä»¥ç”¨äºè·å–æ›´å°çš„ bundleï¼Œä»¥åŠæ§åˆ¶èµ„æºåŠ è½½ä¼˜å…ˆçº§ï¼Œå¦‚æœä½¿ç”¨åˆç†ï¼Œä¼šæå¤§å½±å“åŠ è½½æ—¶é—´ã€‚ webpack çƒ­æ›´æ–°åŸç†åœ¨ webpack ä¸­ï¼Œéƒ½æ˜¯æ¨¡å—ä¸”æœ‰å”¯ä¸€æ ‡è¯†ã€‚åœ¨ webpack ç¼–è¯‘å®Œæˆåï¼Œå°†ä¿®æ”¹çš„æ¨¡å— hash å¯¹åº”çš„æ¨¡å—é‡æ–°æ‰§è¡Œã€‚å°±è¾¾åˆ°äº†å±€éƒ¨åˆ·æ–°çš„æ•ˆæœã€‚ è¿‡ç¨‹webpack-dev-middleware æ˜¯ç”¨æ¥å¤„ç†æ–‡ä»¶æ‰“åŒ…åˆ°å“ªé‡Œï¼Œåˆ°å†…å­˜è¯»å–é€Ÿåº¦æ›´å¿«ã€‚devServer åœ¨ç›‘å¬ compiler done åï¼Œåˆ©ç”¨ socket å‘Šè¯‰ devServer/client ä¿®æ”¹æ¨¡å—çš„ hashHMR.runtime åˆ©ç”¨ HTTP è¯·æ±‚ hash.hot-update.json è·å–æ›´æ–°æ¨¡å—åˆ—è¡¨ hotDownloadManifest{â€œhâ€:â€11ba55af05df7c2d3d13â€,â€câ€:{â€œindex-wrapâ€:true}}å†é€šè¿‡ HTTP (jsonp) è·å–æ›´æ–°æ¨¡å—çš„ jsindex-wrap.7466b9e256c084c8463f.hot-update.jsè¿”å›æ‰§è¡Œ 123webpackHotUpdate(\"index-wrap\", &#123; // ....&#125;) webpackHotUpdate åšäº†ä¸‰ä»¶äº‹æ‰¾åˆ°è¿‡æœŸçš„æ¨¡å—å’Œä¾èµ–å¹¶ä»ç¼“å­˜ä¸­åˆ é™¤ 12delete installedModules[moduleId];delete outdatedDependencies[moduleId]; éå†æ‰€æœ‰çš„ module.childrenï¼Œé‡æ–° installedModules æ‰€æœ‰çš„å­æ¨¡å—æœ€åå°†è‡ªèº«æ¨¡å—çš„å†…å®¹åšæ›¿æ¢ä¿®æ”¹ 1modules[moduleId] = appliedUpdate[moduleId] æœ€åä»£ç æ›¿æ¢ä¹‹åå¹¶æ²¡æœ‰é‡æ–°æ‰§è¡Œï¼Œéœ€è¦æ‰‹åŠ¨æ³¨å†Œéœ€è¦é‡æ–°æ‰§è¡Œçš„æ¨¡å—æ–¹æ³• 123456if (module.hot) &#123; module.hot.accept('./print.js', function() &#123; console.log('Accepting the updated printMe module!'); printMe(); &#125;) &#125; å›½é™…åŒ–æ–¹æ¡ˆåç«¯åœ¨cookieä¸­è®¾ç½®applocalå­—æ®µ å‰ç«¯å†å»æ‹¿ã€‚ã€‚ã€‚ å‚è€ƒæ–‡ç«  [ç”¨ husky å’Œ lint-staged æ„å»ºè¶…æºœçš„ä»£ç æ£€æŸ¥å·¥ä½œæµ](ç”¨ husky å’Œ lint-staged æ„å»ºè¶…æºœçš„ä»£ç æ£€æŸ¥å·¥ä½œæµ) Webpackæ‰“åŒ…ä¼˜åŒ– è½»æ¾ç†è§£webpackçƒ­æ›´æ–°åŸç†","categories":[],"tags":[{"name":"é…ç½®","slug":"é…ç½®","permalink":"https://ashleyblog.xyz/tags/é…ç½®/"}]},{"title":"é¢ç»jsç¯‡","slug":"é¢ç»jsç¯‡","date":"2019-12-10T10:48:35.000Z","updated":"2023-04-02T14:00:30.289Z","comments":true,"path":"2019/12/10/é¢ç»jsç¯‡/","link":"","permalink":"https://ashleyblog.xyz/2019/12/10/é¢ç»jsç¯‡/","excerpt":"","text":"åŸç”Ÿ jstypeofçš„åŸç†js åœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™ï¼Œä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ä½ä½ 1-3 ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯ ğŸ‘‰ 000ï¼šå¯¹è±¡010ï¼šæµ®ç‚¹æ•°100ï¼šå­—ç¬¦ä¸²110ï¼šå¸ƒå°”1ï¼šæ•´æ•° but, å¯¹äº undefined å’Œ null æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªå€¼çš„ä¿¡æ¯å­˜å‚¨æ˜¯æœ‰ç‚¹ç‰¹æ®Šçš„ã€‚nullï¼šæ‰€æœ‰æœºå™¨ç å‡ä¸º 0undefinedï¼šç”¨ âˆ’2^30 æ•´æ•°æ¥è¡¨ç¤ºæ‰€ä»¥ï¼Œtypeof åœ¨åˆ¤æ–­ null çš„æ—¶å€™å°±å‡ºç°é—®é¢˜äº†ï¼Œç”±äº null çš„æ‰€æœ‰æœºå™¨ç å‡ä¸º 0ï¼Œå› æ­¤ç›´æ¥è¢«å½“åšäº†å¯¹è±¡æ¥çœ‹å¾…ã€‚ instanceofçš„åŸç†é€šè¿‡åˆ¤æ–­å³è¾¹çš„å˜é‡çš„prototypeæ˜¯å¦åœ¨å·¦è¾¹çš„å˜é‡çš„åŸå‹é“¾ä¸Š 123456789101112function myInstanceOf(leftVal, rightVal) &#123; let rightProto = rightVal.prototype let leftCopy = leftVal.__proto__ while (true) &#123; if (leftCopy === null) &#123; return false &#125; else if (leftCopy === rightProto) &#123; return true &#125; leftCopy = leftCopy.__proto__ &#125;&#125; ç”ŸæˆæŒ‡å®šèŒƒå›´å†…çš„éšæœºæ•°1234function RandomNum (min, max) &#123; let range = max - min return Math.round(Math.random()*range) + min&#125; null undefined çš„åŒºåˆ«å‰è€…æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ å‰è€…è½¬æ¢æˆæ•°å­—æ˜¯ 0 åè€…æ˜¯ NaN å‡½æ•°å‚æ•°æ˜¯æŒ‰å€¼ä¼ é€’ ä¸ºä»€ä¹ˆä¼ ä¸€ä¸ªå¯¹è±¡è¿›å» å‡½æ•°å†…éƒ¨çš„ä¿®æ”¹ä¼šå½±å“è¯¥å¯¹è±¡ä¼ çš„æ˜¯æ˜¯æ ˆå†…æ•°æ®çš„æ‹·è´ç®€å•æ•°æ®ç±»å‹ä¼ çš„æ˜¯ å€¼æœ¬èº« ï¼ˆå› ä¸ºç›´æ¥æŠŠå€¼å­˜åœ¨æ ˆå†…ï¼‰å¤æ‚æ•°æ®ç±»å‹ä¼ çš„æ˜¯ å¯¹è±¡åœ¨å†…å­˜é‡Œé¢çš„åœ°å€ ï¼ˆå› ä¸ºå¤æ‚å¯¹è±¡å­˜åœ¨å †å†…ï¼Œæ‰€ä»¥åœ¨æ ˆé‡Œå­˜å¯¹è±¡æ‰€åœ¨çš„å †åœ°å€ï¼‰ ä½ è§‰å¾—jQueryæˆ–zeptoæºç æœ‰å“ªäº›å†™çš„å¥½çš„åœ°æ–¹jqueryæºç å°è£…åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°çš„è‡ªæ‰§è¡Œç¯å¢ƒä¸­ï¼Œæœ‰åŠ©äºé˜²æ­¢å˜é‡çš„å…¨å±€æ±¡æŸ“ï¼Œç„¶åé€šè¿‡ä¼ å…¥windowå¯¹è±¡å‚æ•°ï¼Œå¯ä»¥ä½¿windowå¯¹è±¡ä½œä¸ºå±€éƒ¨å˜é‡ä½¿ç”¨ï¼Œå¥½å¤„æ˜¯å½“jqueryä¸­è®¿é—®windowå¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä¸ç”¨å°†ä½œç”¨åŸŸé“¾é€€å›åˆ°é¡¶å±‚ä½œç”¨åŸŸäº†ï¼Œä»è€Œå¯ä»¥æ›´å¿«çš„è®¿é—®windowå¯¹è±¡ã€‚åŒæ ·ï¼Œä¼ å…¥undefinedå‚æ•°ï¼Œå¯ä»¥ç¼©çŸ­æŸ¥æ‰¾undefinedæ—¶çš„ä½œç”¨åŸŸé“¾ã€‚ 12345678910111213(function( window, undefined ) &#123; //ç”¨ä¸€ä¸ªå‡½æ•°åŸŸåŒ…èµ·æ¥ï¼Œå°±æ˜¯æ‰€è°“çš„æ²™ç®± //åœ¨è¿™é‡Œè¾¹varå®šä¹‰çš„å˜é‡ï¼Œå±äºè¿™ä¸ªå‡½æ•°åŸŸå†…çš„å±€éƒ¨å˜é‡ï¼Œé¿å…æ±¡æŸ“å…¨å±€ //æŠŠå½“å‰æ²™ç®±éœ€è¦çš„å¤–éƒ¨å˜é‡é€šè¿‡å‡½æ•°å‚æ•°å¼•å…¥è¿›æ¥ //åªè¦ä¿è¯å‚æ•°å¯¹å†…æä¾›çš„æ¥å£çš„ä¸€è‡´æ€§ï¼Œä½ è¿˜å¯ä»¥éšæ„æ›¿æ¢ä¼ è¿›æ¥çš„è¿™ä¸ªå‚æ•° window.jQuery = window.$ = jQuery;&#125;)( window ); è™šæ‹Ÿdom ä¸ºä»€ä¹ˆç›´æ¥æ“ä½œdomè€—æ—¶v8 bindingä¼šå°†åŸç”Ÿçš„domå¯¹è±¡ï¼ˆæ¯”å¦‚document.a)æ˜ å°„æˆåŒ…è£…çš„jså¯¹è±¡ï¼Œæ‰€ä»¥æ‰§è¡Œdocument.a=ã€‚ã€‚ã€‚å¾ˆå¿«ä½†æ˜¯document.title=ã€‚ã€‚ã€‚å¾ˆæ…¢æ˜¯å› ä¸ºä¿®æ”¹titleçš„æ—¶å€™åŒæ—¶ä¹Ÿä¿®æ”¹äº† DOM å¯¹è±¡çš„ attributesæ­¤å¤–å¾ˆå¤šæ—¶å€™æ“ä½œdoméƒ½ä¼šå¼•èµ·é‡ç»˜ä¸å›æµ å¹¶ä¸”å¾ˆå¤šdom apiçš„è¯»å†™éƒ½ä¼šè®¾è®¡é¡µé¢å¸ƒå±€çš„é‡æ–°è®¡ç®—ä»¥ç¡®ä¿è¿”å›å€¼çš„å‡†ç¡® è™šæ‹Ÿdomä¸å¿« ä¸ºä»€ä¹ˆreactå¿« React is fast because it only manipulates the DOM as much as it needs to,Updating changes is much faster than re-building the entire DOM tree from scratch. Itâ€™s able to do this because it keeps the virtual DOM representation from the last time we updated or rendered our component in memory. It then compares the two versions and updates the changes. React Virtual DOM is an object,when we create an webpage browser create dom in a tree manner. to find the changes in two different trees &gt;time complexity is O(n^3) but REACT DIFF algorithm can able to do it in O(n) time by using keys of each node.that is why react is faster ä¸ºä»€ä¹ˆè™šæ‹Ÿdomæ€§èƒ½æ›´å¥½ ä¼ ç»ŸMVCæ¡†æ¶,å¦‚backbone,å®ƒæ˜¯å°†æŸä¸ªæ¨¡æ¿ç¼–è¯‘æˆæ¨¡æ¿å‡½æ•°,éœ€è¦æ›´æ–°æ—¶,æ˜¯è‡ªå·±æ‰‹åŠ¨å°†æ•°æ®æ•´ä½“ä¼ å…¥æ¨¡æ¿å‡½æ•°, å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²,ä½¿ç”¨innerHTMLåˆ·æ–°æŸä¸ªå®¹å™¨!æ³¨æ„,è¿™é‡Œå…¶å®å¯ä»¥ä¼˜åŒ–,ä½†ç”±äºæ˜¯æ‰‹åŠ¨,æ˜¯ä½“åŠ›æ´»,éƒ½æ˜¯ä½¿ç”¨å¾ˆç²—æ”¾å‹çš„innerhTMLäº†äº‹ (ä½¿ç”¨jQueryçš„htmlæ–¹æ³•æ€§èƒ½ä¼šæ›´å·®,ä¸è¿‡å¥½å¤„æ˜¯å®ƒå¤„ç†äº†IEä¸‹çš„innerHTML BUGåŠå…¨å¹³å°çš„æ— æ³•æ‰§è¡Œå†…éƒ¨çš„scriptæ ‡ç­¾çš„BUG) ç”±äºæ•´ä½“æ›¿æ¢,ä¸€ä¸‹å­é”€æ¯è¿™ä¹ˆå¤šå…ƒç´ (æœ‰æ—¶è¿˜ç»‘ç€äº‹ä»¶,å¯èƒ½å¯¼è‡´GCå‡ºé—®é¢˜),åˆè¦æ’å…¥è¿™ä¹ˆå¤šå…ƒç´ ,å†é‡æ–°ç»‘å®šäº‹ä»¶(è¿™ä¸ªå¯ä»¥ä½¿ç”¨äº‹ä»¶ä»£ç†ç¼“è§£) å› æ­¤æ€§èƒ½éå¸¸å·® knockouté‚£æ ·, ä½¿ç”¨æ—¶è®©ç”¨æˆ·ç—›è‹¦ä¸€äº›,ä½¿ç”¨å¯åŒæ­¥è§†å›¾çš„ä¸œè¥¿ç”¨å‡½æ•°(wrapper)åŒ…è£¹èµ·æ¥, åˆ·æ–°è§†å›¾,å°±åªéœ€è¦é‡æ–°è°ƒç”¨è¿™ä¸ªwrapper.ç°åœ¨æ‰€æœ‰æ–°çš„MVVMéƒ½æ˜¯ä»koé‚£é‡Œå­¦åˆ°ä¾èµ–æ”¶é›†. è¿™ä¸ªwraperä¼šé€šçŸ¥å…¶ä¾èµ–çš„wrapper,é€šè¿‡æå…¶ç—›è‹¦æ™¦æ¶©çš„æ–¹å¼è¿›å…¥äº‹ä»¶æ€»çº¿, æ‰§è¡Œè§†å›¾åˆ·æ–°å‡½æ•°. knockoutæ˜¯ä½¿ç”¨é—­åŒ…ç”¨åˆ°æè‡´çš„åº“,æ˜¾ç„¶è¿™æ ·åšæ€§èƒ½ä¹Ÿå¾ˆå·®. æœ€åreact, é¦–å…ˆä½¿ç”¨ç¼–è¯‘æ‰‹æ®µ(jsxçš„è™šæ‹ŸDOMè½¬æ¢), å°†è¿™éƒ¨åˆ†æ¶ˆè€—èƒ½æå‰é‡Šæ”¾å‡ºå», ä¸è¿‡å°†å­—ç¬¦ä¸²(jsxæ¨¡æ¿)è½¬æ¢ä¸ºä¸€ä¸ªä¸ªJSå¯¹è±¡,ä¹Ÿå ä¸äº†å¤šå°‘å†…å­˜. ç„¶åæ˜¯æ•°æ®å‘ç”Ÿå˜åŠ¨æ—¶, ç”±äºæ•°æ®å˜åŠ¨éƒ½æ˜¯éœ€è¦ç”¨setStateæ–¹æ³•,å› æ­¤å…¼å®¹æ€§å¾ˆå¥½, å°‘äº†Object.definePropertyæˆ–wrapperçš„æ¶ˆè€—,ç„¶åå¯¹åº”æ•°æ®é€šè¿‡renderè½¬æ¢æˆå­—ç¬¦ä¸²,å­—ç¬¦ä¸²å†è½¬æ¢è™šæ‹ŸDOMæ ‘ å…ˆåè™šæ‹ŸDOMè¿›è¡Œæ¯”è¾ƒ, æ›´æ–°è§†å›¾. reactæ˜¯é¢å‘ç»„ä»¶è®¾è®¡, ä¸€ä¸ªç»„ä»¶å°±æ˜¯ä¸€ä¸ªå¯†å°èˆ±, å¾ˆå°‘ä¼šå¯¹æ‰€æœ‰è™šæ‹ŸDOMè¿›è¡Œæ¯”è¾ƒ, ç”±äºå¼ºåˆ¶ä½¿ç”¨å•å‘æµåŠ¨, å‡å°‘æ¯æ¬¡å˜åŠ¨éœ€è¦çš„diff. æ²¡æœ‰ç»‘å®šå¯¹è±¡ä¸wrapperçš„å†…å­˜å ç”¨é«˜çš„é—®é¢˜. å®ç°å‡½æ•°æŸ¯é‡ŒåŒ–123456789101112function curry(f) &#123; const context = this let args = [] return function(...arg) &#123; args = args.concat(arg) if (arg.length) &#123; return arguments.callee &#125; else &#123; return f.apply(context, arg) &#125; &#125;&#125; arguments.callee ä¸arguments.callerçš„åŒºåˆ«1234567function f() &#123; // arguments.callee : [Function:f] // arguments.caller : [Function:g]&#125;function g() &#123; f()&#125; ç±»æ•°ç»„å¯¹è±¡æœ‰å“ªäº›å…·æœ‰lengthå±æ€§çš„å¹¶ä¸”èƒ½ä½¿ç”¨ç´¢å¼•è®¿é—®çš„ æ¯”å¦‚arguments domç›¸å…³çš„æ•°æ®ç»“æ„ localstorage sesstionstorage.. å‡½æ•°æå‡è·Ÿå˜é‡æå‡å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œä¼šè¢«æå‡è‡³å½“å‰ä½œç”¨åŸŸæœ€é¡¶ç«¯ å®ç°æ·±æ‹·è´å¾ªç¯é€’å½’å®ç°12345678910111213141516171819202122232425262728293031var a = &#123; name: 'mary', age: 20, friend: &#123; name: 'å“ˆå“ˆ', age: 19, hobby: 'eat' &#125;&#125;function deep(obj) &#123; var newobj = &#123;&#125; for (var key in obj) &#123; // æ­¤å¤„éå†çš„keyåŒ…æ‹¬äº†å®ä¾‹å¯¹è±¡å’Œå®ƒåŸå‹çš„å±æ€§ï¼Œæ‰€ä»¥è¦ç”¨hasOwnPropertyè¿›è¡Œç­›é€‰(nodeç¯å¢ƒä¸ä¼šï¼Œæµè§ˆå™¨ç¯å¢ƒä¼šåˆ—ä¸¾åŸå‹å±æ€§) if (obj.hasOwnProperty(key)) &#123; // å¦‚æœæ˜¯åŸºæœ¬ç±»å‹åˆ™è¿›è¡Œå¤åˆ¶ if ( typeof obj[key] === 'number' || typeof obj[key] === 'string' || typeof obj[key] === 'boolean' || obj[key] === undefined || obj[key] === null ) &#123; newobj[key] = obj[key] // å¦‚æœä¸æ˜¯åˆ™ä¸ºarrayæˆ–è€…object,ä»ç„¶éœ€è¦æ·±å±‚æ¬¡çš„é€’å½’å¤åˆ¶ &#125; else &#123; newobj[key] = deep(obj[key]) &#125; &#125; &#125; return newobj&#125; load äº‹ä»¶ä¸ DOMContentLoaded äº‹ä»¶,$(document).ready() å½“ DOMContentLoaded äº‹ä»¶è§¦å‘æ—¶ï¼Œä»…å½“ DOM åŠ è½½å®Œæˆï¼Œä¸åŒ…æ‹¬æ ·å¼è¡¨ï¼Œå›¾ç‰‡ã€‚ å½“ onload äº‹ä»¶è§¦å‘æ—¶ï¼Œé¡µé¢ä¸Šæ‰€æœ‰çš„ DOMï¼Œæ ·å¼è¡¨ï¼Œè„šæœ¬ï¼Œå›¾ç‰‡éƒ½å·²ç»åŠ è½½å®Œæˆäº†ã€‚ $(document).ready()æ˜¯DOMç»“æ„ç»˜åˆ¶å®Œæ¯•åå°±æ‰§è¡Œï¼Œä¸å¿…ç­‰åˆ°åŠ è½½å®Œæ¯• window.onloadä¸èƒ½åŒæ—¶ç¼–å†™å¤šä¸ªï¼Œå¦‚æœæœ‰å¤šä¸ªwindow.onloadæ–¹æ³•ï¼Œåªä¼šæ‰§è¡Œä¸€ä¸ªï¼Œ$(document).ready()å¯ä»¥åŒæ—¶ç¼–å†™å¤šä¸ªï¼Œå¹¶ä¸”éƒ½å¯ä»¥å¾—åˆ°æ‰§è¡Œ,$(document).ready(function(){})å¯ä»¥ç®€å†™æˆ$(function(){}) æ„é€ å‡½æ•°çš„è¿”å›å€¼ æ„é€ å‡½æ•°ä¸éœ€è¦æ˜¾ç¤ºçš„è¿”å›å€¼ã€‚ä½¿ç”¨ new æ¥åˆ›å»ºå¯¹è±¡(è°ƒç”¨æ„é€ å‡½æ•°)æ—¶ï¼Œå¦‚æœ return çš„æ˜¯éå¯¹è±¡(æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”ç±»å‹ç­‰)ä¼šå¿½è€Œç•¥è¿”å›å€¼;å¦‚æœ return çš„æ˜¯å¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡(æ³¨ï¼šè‹¥ return null ä¹Ÿä¼šå¿½ç•¥è¿”å›å€¼ï¼‰ã€‚ å¤§æ•°æ±‚å’Œé‡‡ç”¨å°æ—¶ä¾¯å­¦åŠ æ³•æ—¶çš„æ‰‹åŠ¨è®¡ç®—çš„æ–¹æ³•ï¼Œä»æœ€ä½ä½ä¾æ¬¡ç›¸åŠ ï¼Œå¾—åˆ°æœ€åçš„ç»“æœå› ä¸ºå¯¹äºè¾ƒå¤§çš„æ•°jsä¼šè‡ªåŠ¨é‡‡ç”¨ç§‘å­¦è®°æ•°æ³•çš„æ–¹å¼è¡¨ç¤ºï¼Œæ‰€ä»¥å‚ä¸è®¡ç®—çš„å‚æ•°ç”¨å­—ç¬¦ä¸²è¡¨ç¤º 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758function getSum(d1, d2) &#123; // å¦‚æœç¬¬ä¸€ä¸ªæ•°è¾ƒå¤§åˆ™äº¤æ¢ä¸¤ä¸ªæ•° if (d1.length &lt; d2.length) &#123; [d1, d2] = [d2, d1]; &#125; // å°†ä¸¤ä¸ªæ•°è½¬ä¸ºæ•°ç»„å½¢å¼ let [arr1, arr2] = [[...d1].reverse(), [...d2].reverse()]; // numç”¨ä½œå½“å¯¹åº”ä½æ•°ç›¸åŠ å¤§äº10æ—¶åšè¿›ä½ let num = 0; // å¾ªç¯arr1.lengthæ¬¡æ±‚å’Œ for (let i = 0; i &lt; arr1.length; i++) &#123; if (arr2[i]) &#123; arr1[i] = Number.parseInt(arr1[i]) + Number.parseInt(arr2[i]) + num; &#125; else &#123; arr1[i] = Number.parseInt(arr1[i]) + num; &#125; if (arr1[i] &gt;= 10) &#123; [arr1[i], num] = [arr1[i] % 10, 1]; &#125; else &#123; num = 0; &#125; &#125; // å¦‚æœæœ€åè¿›ä½ä¸º1ï¼Œåˆ™ç»“æœå‰åº”åŠ 1ä¸º if (num === 1) &#123; arr1[arr1.length] = num; &#125; // è¿”å›ç»“æœå­—ç¬¦ä¸² return arr1.reverse().join('');&#125;args=args.concat(arg)``` ### generatorå‡½æ•°çš„ä½¿ç”¨åœºæ™¯* å¤šæ–‡ä»¶ä¸Šä¼  ä¸Šä¼ å®Œç¬¬ä¸€ç»„æ–‡ä»¶ä¹‹åæš‚åœæ‰§è¡Œ åšå…¶ä»–çš„äº‹æƒ… ä¹‹åå†ç»§ç»­ä¸Šä¼  é€šè¿‡è¿”å›å€¼doneå±æ€§æ˜¯å¦ä¸ºçœŸæ¥åˆ¤æ–­èƒ½å¦ç»§ç»­æ‰§è¡Œ* ç”Ÿæˆå…·æœ‰indexçš„enumerateç»“æ„ (è¿”å›çš„æ˜¯iteratorå¯¹è±¡ èƒ½ç›´æ¥ä½¿ç”¨for inéå†ï¼Œä¹Ÿèƒ½ä½œä¸ºArray.fromç­‰çš„å‚æ•°)### æ·±åº¦æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡1.é€šè¿‡json.parse(json.stringify)... ç›¸ç­‰ç›´æ¥è¿”å›true2.object.keys.lengthä¸ç›¸ç­‰ è¿”å›false3.éå† é‡åˆ°ä¸ºå¯¹è±¡çš„å±æ€§é€’å½’### å®ç° bind```js// å®šä¹‰è¿™ä¸ªæ–¹æ³•ä¸ºmyBindFunction.prototype.my_bind = function() &#123; var self = this, // ä¿å­˜åŸå‡½æ•° context = Array.prototype.shift.call(arguments), // ä¿å­˜éœ€è¦ç»‘å®šçš„thisä¸Šä¸‹æ–‡ // ä¸Šä¸€è¡Œç­‰ä»·äº context = [].shift.call(arguments); args = Array.prototype.slice.call(arguments) // å‰©ä½™çš„å‚æ•°è½¬ä¸ºæ•°ç»„ return function() &#123; // è¿”å›ä¸€ä¸ªæ–°å‡½æ•° self.apply( context, Array.prototype.concat.call(args, Array.prototype.slice.call(arguments)) ) &#125;&#125; promiseçš„æ„é€ å‡½æ•°è·Ÿä»–çš„thenæ–¹æ³•æ˜¯å¼‚æ­¥è¿˜æ˜¯åŒæ­¥promiseæ„é€ å‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œthenæ–¹æ³•å› ä¸ºæ˜¯å¾®ä»»åŠ¡æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ æ¨¡å—åŒ– ä¸ºä»€ä¹ˆè¦æ¨¡å—åŒ–ä¸ºäº†é¿å…å…¨å±€æ±¡æŸ“ æ€ç»´å¯¼å›¾https://www.processon.com/view/link/5c8409bbe4b02b2ce492286a#map jsç±»å‹è½¬æ¢ å¼ºåˆ¶ç±»å‹è½¬æ¢é€šè¿‡ Number()ã€parseInt()ã€parseFloat()ã€toString()ã€String()ã€Boolean(),è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚ éšå¼ç±»å‹è½¬æ¢é€»è¾‘è¿ç®—ç¬¦(&amp;&amp;ã€ ||ã€ !)ã€è¿ç®—ç¬¦(+ã€-ã€*ã€/)ã€å…³ç³»æ“ä½œç¬¦(&gt;ã€ &lt;ã€ &lt;= ã€&gt;=)ã€ç›¸ç­‰è¿ç®—ç¬¦(==)æˆ–è€… if/while çš„æ¡ä»¶ï¼Œå¯èƒ½ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢ã€‚å…³äºvalueof tostringåœ¨æ•°å€¼è¿ç®—é‡Œï¼Œä¼šä¼˜å…ˆè°ƒç”¨valueOf() å­—ç¬¦ä¸²è¿ç®—ä¼˜å…ˆè°ƒç”¨åè€… å®ç°æ•°ç»„æ‰å¹³åŒ– æ–¹å¼ä¸€ 1;[].concat.apply([], [[1], [2], [3]]) // [1, 2, 3] chrome 69 åæ•°ç»„è‡ªå¸¦ flat æ–¹æ³• æ–¹å¼äºŒ 12345function flatten(arr) &#123; return arr.reduce(function(prev, item) &#123; return prev.concat(Array.isArray(item) ? flatten(item) : item) &#125;, [])&#125; æ–¹å¼ä¸‰ 123456function flatten(arr)&#123; while(arr.some(item=&gt;Array.isArray(item))&#123; arr = [].concat(...arr); &#125; return arr;&#125; å®ç°[1,2].mutiple() = [1,2,1,4]1234Array.prototype.mutiple = function() &#123; const tail = this.map((item) =&gt; item ** 2) return [...this, ...tail]&#125; å®ç°composeå‡½æ•°1234567891011121314export default function compose(...funcs) &#123; if (funcs.length === 0) &#123; return arg =&gt; arg &#125; if (funcs.length === 1) &#123; return funcs[0] &#125; const last = funcs[funcs.length - 1] const rest = funcs.slice(0, -1) // reduceright:å°†æ•°ç»„ä¸­æ¯ä¸€é¡¹ä»å³å‘å·¦è°ƒç”¨callback return (...args) =&gt; rest.reduceRight((composed, f) =&gt; f(composed), last(...args))&#125; var a3 = {name: â€œå‰ç«¯å¼€å‘â€}; var b3 = a3; a3 = null console.log(b3)?// {name: â€œå‰ç«¯å¼€å‘â€} äº‹ä»¶å§”æ‰˜çš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹å‡å°‘äº‹ä»¶æ³¨å†Œ å‡å°å†…å­˜ ç¼ºç‚¹æœ‰çš„äº‹ä»¶ä¸æ”¯æŒå†’æ³¡ 0.1+0.2!=0.3åè¿›åˆ¶çš„ 0.1 å’Œ 0.2 éƒ½ä¼šè¢«è½¬æ¢æˆäºŒè¿›åˆ¶ï¼Œä½†ç”±äºæµ®ç‚¹æ•°ç”¨äºŒè¿›åˆ¶è¡¨è¾¾æ—¶æ˜¯æ— ç©·çš„ï¼Œä¾‹å¦‚ã€‚JavaScript ä»£ç :0.1 -&gt; 0.0001100110011001â€¦(æ— é™)0.2 -&gt; 0.0011001100110011â€¦(æ— é™)IEEE 754 æ ‡å‡†çš„ 64 ä½åŒç²¾åº¦æµ®ç‚¹æ•°çš„å°æ•°éƒ¨åˆ†æœ€å¤šæ”¯æŒ 53 ä½äºŒè¿›åˆ¶ä½ï¼Œæ‰€ä»¥ä¸¤è€…ç›¸åŠ ä¹‹åå¾—åˆ°äºŒè¿›åˆ¶ä¸ºï¼šJavaScript ä»£ç :0.0100110011001100110011001100110011001100110011001100å› æµ®ç‚¹æ•°å°æ•°ä½çš„é™åˆ¶è€Œæˆªæ–­çš„äºŒè¿›åˆ¶æ•°å­—ï¼Œå†è½¬æ¢ä¸ºåè¿›åˆ¶ï¼Œå°±æˆäº† 0.30000000000000004ã€‚æ‰€ä»¥åœ¨è¿›è¡Œç®—æœ¯è®¡ç®—æ—¶ä¼šäº§ç”Ÿè¯¯å·® æ€ä¹ˆè®¾ç½®å¯¹è±¡çš„å±æ€§ä¸èƒ½è¢«åˆ é™¤ï¼ŸdefineProppertyè®¾ç½®configurable falsewhy? https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete addeventListenerçš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡option,åŒ…æ‹¬capture, passive,onceé€‰é¡¹ ä¸æ”¯æŒè¿™ç§å†™æ³•çš„é»˜è®¤ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯usecapture å‡ ç§åˆ¤æ–­æ•°ç»„ç±»å‹çš„ä¼˜ç¼ºç‚¹instanceofä¸èƒ½æ£€æµ‹æ¥è‡ªiframeçš„æ•°ç»„ã€‚å°±æ˜¯window.frames[xx].Arrayæ„é€ å‡ºæ¥çš„æ•°ç»„Array.isArrayå…¼å®¹æ€§æ²¡é‚£ä¹ˆå¥½ ä¸ºä»€ä¹ˆè¡¨å•èƒ½è·¨åŸŸå› ä¸ºè¡¨å•çš„è¯·æ±‚ä¸€èˆ¬éƒ½æ˜¯æäº¤æ•°æ® å¹¶ä¸”ä¼ ç»Ÿformè¡¨å•æäº¤æµè§ˆå™¨ä¼šå‘ç”Ÿè·³è½¬ å¹¶ä¸”ä¸éœ€è¦è¿”å›å“åº”æ•°æ® æ˜¯å®‰å…¨çš„ ä¸ºä»€ä¹ˆç®­å¤´å‡½æ•°ä¸èƒ½ä½¿ç”¨newæ“ä½œç¬¦å› ä¸ºå®ƒæ²¡æœ‰è‡ªå·±çš„thisä¸prototype å±æ€§ ï¼Œè€Œ new å‘½ä»¤åœ¨æ‰§è¡Œæ—¶éœ€è¦å°†æ„é€ å‡½æ•°çš„ prototype èµ‹å€¼ç»™æ–°çš„å¯¹è±¡çš„ proto react ç›¸å…³React ä¸­ setState ä»€ä¹ˆæ—¶å€™æ˜¯åŒæ­¥çš„ï¼Œä»€ä¹ˆæ—¶å€™æ˜¯å¼‚æ­¥çš„åœ¨ React ä¸­ï¼Œå¦‚æœæ˜¯ç”± React å¼•å‘çš„äº‹ä»¶å¤„ç†ä¹Ÿå°±æ˜¯åˆæˆäº‹ä»¶ï¼ˆæ¯”å¦‚é€šè¿‡ onClick å¼•å‘çš„äº‹ä»¶å¤„ç†ï¼‰ï¼Œè°ƒç”¨ setState ä¸ä¼šåŒæ­¥æ›´æ–° this.stateï¼Œé™¤æ­¤ä¹‹å¤–çš„ setState è°ƒç”¨ä¼šåŒæ­¥æ‰§è¡Œ this.stateã€‚æ‰€è°“â€œé™¤æ­¤ä¹‹å¤–â€ï¼ŒæŒ‡çš„æ˜¯ç»•è¿‡ React é€šè¿‡ addEventListener ç›´æ¥æ·»åŠ çš„äº‹ä»¶å¤„ç†å‡½æ•°ä¹Ÿå°±æ˜¯åŸç”Ÿäº‹ä»¶ï¼Œè¿˜æœ‰é€šè¿‡ setTimeout/setInterval äº§ç”Ÿçš„å¼‚æ­¥è°ƒç”¨ã€‚ åŸå› ï¼šåœ¨ React çš„ setState å‡½æ•°å®ç°ä¸­ï¼Œä¼šæ ¹æ®ä¸€ä¸ªå˜é‡ isBatchingUpdates åˆ¤æ–­æ˜¯ç›´æ¥æ›´æ–° this.state è¿˜æ˜¯æ”¾åˆ°é˜Ÿåˆ—ä¸­å›å¤´å†è¯´ï¼Œè€Œ isBatchingUpdates é»˜è®¤æ˜¯ falseï¼Œä¹Ÿå°±è¡¨ç¤º setState ä¼šåŒæ­¥æ›´æ–° this.stateï¼Œä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªå‡½æ•° batchedUpdatesï¼Œè¿™ä¸ªå‡½æ•°ä¼šæŠŠ isBatchingUpdates ä¿®æ”¹ä¸º trueï¼Œè€Œå½“ React åœ¨è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•°ä¹‹å‰å°±ä¼šè°ƒç”¨è¿™ä¸ª batchedUpdatesï¼Œé€ æˆçš„åæœï¼Œå°±æ˜¯ç”± React æ§åˆ¶çš„äº‹ä»¶å¤„ç†è¿‡ç¨‹ setState ä¸ä¼šåŒæ­¥æ›´æ–° this.stateã€‚ jsx è¯­æ³•ä¸ºä»€ä¹ˆ éœ€è¦ import react åŒ…JSX è¯­æ³•åªæ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œbabelè½¬è¯‘ä¹‹åå°±ä¼šå˜æˆReact.createElement react ç”Ÿå‘½å‘¨æœŸå˜æ›´çš„åŸå› åœ¨ fiber ä¸­ï¼Œæ›´æ–°æ˜¯åˆ†é˜¶æ®µçš„ï¼Œå…·ä½“åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œé¦–å…ˆæ˜¯ reconciliation çš„é˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µåœ¨è®¡ç®—å‰å dom æ ‘çš„å·®å¼‚ï¼Œç„¶åæ˜¯ commit çš„é˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µå°†æŠŠæ›´æ–°æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯å¯ä»¥æ‰“æ–­çš„ï¼Œå› ä¸ºè¿™ä¸ªé˜¶æ®µè€—æ—¶å¯èƒ½ä¼šå¾ˆé•¿ï¼Œå› æ­¤éœ€è¦æš‚åœä¸‹æ¥å»æ‰§è¡Œå…¶ä»–æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œç¬¬äºŒä¸ªé˜¶æ®µåˆ™ä¸ä¼šè¢«æ‰“æ–­ï¼Œä¼šä¸€å£æ°”æŠŠæ›´æ–°æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚ ç”±äº reconciliation çš„é˜¶æ®µä¼šè¢«æ‰“æ–­ï¼Œå¯èƒ½ä¼šå¯¼è‡´ commit å‰çš„è¿™äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¤šæ¬¡æ‰§è¡Œã€‚react å®˜æ–¹ç›®å‰å·²ç»æŠŠ componentWillMountã€componentWillReceiveProps å’Œ componetWillUpdate æ ‡è®°ä¸º unsafeï¼Œå¹¶ä½¿ç”¨æ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° getDerivedStateFromProps å’Œ getSnapshotBeforeUpdate è¿›è¡Œæ›¿æ¢ã€‚ ç»„ä»¶çš„æ¸²æŸ“è¢«åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šç¬¬ä¸€ä¸ªé˜¶æ®µï¼ˆä¹Ÿå«åš render é˜¶æ®µï¼‰æ˜¯å¯ä»¥è¢« React æ‰“æ–­çš„ï¼Œä¸€æ—¦è¢«æ‰“æ–­ï¼Œè¿™é˜¶æ®µæ‰€åšçš„æ‰€æœ‰äº‹æƒ…éƒ½è¢«åºŸå¼ƒï¼Œå½“ React å¤„ç†å®Œç´§æ€¥çš„äº‹æƒ…å›æ¥ï¼Œä¾ç„¶ä¼šé‡æ–°æ¸²æŸ“è¿™ä¸ªç»„ä»¶ï¼Œè¿™æ—¶å€™ç¬¬ä¸€é˜¶æ®µçš„å·¥ä½œä¼šé‡åšä¸€éï¼›ç¬¬äºŒä¸ªé˜¶æ®µå«åš commit é˜¶æ®µï¼Œä¸€æ—¦å¼€å§‹å°±ä¸èƒ½ä¸­æ–­ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬äºŒä¸ªé˜¶æ®µçš„å·¥ä½œä¼šç¨³ç¨³å½“å½“åœ°åšåˆ°è¿™ä¸ªç»„ä»¶çš„æ¸²æŸ“ç»“æŸã€‚ ä¸¤ä¸ªé˜¶æ®µçš„åˆ†ç•Œç‚¹ï¼Œå°±æ˜¯ render å‡½æ•°ã€‚render å‡½æ•°ä¹‹å‰çš„æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆåŒ…æ‹¬ render)éƒ½å±äºç¬¬ä¸€é˜¶æ®µï¼Œä¹‹åçš„éƒ½å±äºç¬¬äºŒé˜¶æ®µã€‚render ä¹‹å‰çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯ç¬¬ä¸€é˜¶æ®µç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼‰åŒ…æ‹¬è¿™äº›ï¼š componentWillReceivePropsshouldComponentUpdatecomponentWillUpdatecomponentWillMountrender getDerivedStateFromProps åº”è¯¥æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼ŒReact å°±æ˜¯é€šè¿‡è¦æ±‚è¿™ç§çº¯å‡½æ•°ï¼Œå¼ºåˆ¶å¼€å‘è€…ä»¬å¿…é¡»é€‚åº”å¼‚æ­¥æ¸²æŸ“ã€‚ reconciliation é˜¶æ®µè™šæ‹Ÿ dom çš„æ•°æ®å¯¹æ¯” commit é˜¶æ®µå°† change list æ›´æ–°åˆ° dom ä¸Š ä¸é€‚åˆæ‹†åˆ†æ˜¯å› ä¸ºä½¿ç”¨ vdom çš„æ„ä¹‰å°±æ˜¯ä¸ºäº†èŠ‚çœè€—æ—¶çš„ dom æ“ä½œ ç”Ÿå‘½å‘¨æœŸReact16.3 å¼€å¯å¼‚æ­¥æ¸²æŸ“ æ–°å¢çš„ä¸¤ä¸ª getDerivedStateFromPropsè§¦å‘æ—¶é—´(v16.4 ä¿®æ­£)ï¼šç»„ä»¶æ¯æ¬¡è¢« render çš„æ—¶å€™ï¼ŒåŒ…æ‹¬åœ¨ç»„ä»¶æ„å»ºä¹‹å(è™šæ‹Ÿ dom ä¹‹åï¼Œå®é™… dom æŒ‚è½½ä¹‹å‰)ï¼Œæ¯æ¬¡è·å–æ–°çš„ props æˆ– state ä¹‹åã€‚åœ¨ v16.3 ç‰ˆæœ¬æ—¶ï¼Œç»„ä»¶ state çš„æ›´æ–°ä¸ä¼šè§¦å‘è¯¥ç”Ÿå‘½å‘¨æœŸã€‚æ¯æ¬¡æ¥æ”¶æ–°çš„ props ä¹‹åéƒ½ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ä½œä¸ºæ–°çš„ stateï¼Œè¿”å› null åˆ™è¯´æ˜ä¸éœ€è¦æ›´æ–° state.é…åˆ componentDidUpdateï¼Œå¯ä»¥è¦†ç›– componentWillReceiveProps çš„æ‰€æœ‰ç”¨æ³•getDerivedStateFromProps æ˜¯ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œæ‰€ä»¥å‡½æ•°ä½“å†…ä¸èƒ½è®¿é—® thisï¼Œè¾“å‡ºå®Œå…¨ç”±è¾“å…¥å†³å®šã€‚ getSnapshotBeforeUpdate è§¦å‘æ—¶é—´: update å‘ç”Ÿçš„æ—¶å€™ï¼Œåœ¨ render ä¹‹åï¼Œåœ¨ç»„ä»¶ dom æ¸²æŸ“ä¹‹å‰ã€‚è¿”å›ä¸€ä¸ªå€¼ï¼Œä½œä¸º componentDidUpdate çš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚é…åˆ componentDidUpdate, å¯ä»¥è¦†ç›– componentWillUpdate çš„æ‰€æœ‰ç”¨æ³• setStateå¯ä»¥æ¥å—å‡½æ•°ä¸ºå‚æ•°å—ï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ123this.setState((prevState, props) =&gt; (&#123; counter: prevState.counter + props.increment&#125;)); å…³äºcomponentDidCatchçš„è§¦å‘æ—¶æœºcomponentDidCatch()componentDidCatch(err, info)ä»»ä½•å­ç»„ä»¶åœ¨æ¸²æŸ“æœŸé—´ï¼Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­æˆ–è€…æ„é€ å‡½æ•° constructor å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨ã€‚ é”™è¯¯è¾¹ç•Œä¸ä¼šæ•è·ä¸‹é¢çš„é”™è¯¯ï¼š äº‹ä»¶å¤„ç† (Event handlers) ï¼ˆå› ä¸ºäº‹ä»¶å¤„ç†ä¸å‘ç”Ÿåœ¨ React æ¸²æŸ“æ—¶ï¼ŒæŠ¥é”™ä¸å½±å“æ¸²æŸ“ï¼‰ å¼‚æ­¥ä»£ç  (Asynchronous code) (e.g. setTimeout or requestAnimationFrame callbacks) æœåŠ¡ç«¯æ¸²æŸ“ (Server side rendering) é”™è¯¯è¾¹ç•Œæœ¬èº«(è€Œä¸æ˜¯å­ç»„ä»¶)æŠ›å‡ºçš„é”™è¯¯ è¡¥å……ï¼šstatic getDerivedStateFromErroræ­¤ç”Ÿå‘½å‘¨æœŸä¼šåœ¨åä»£ç»„ä»¶æŠ›å‡ºé”™è¯¯åè¢«è°ƒç”¨ã€‚ å®ƒå°†æŠ›å‡ºçš„é”™è¯¯ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼ä»¥æ›´æ–° state,å¯ä»¥åœ¨æ­¤ç”Ÿå‘½å‘¨æœŸä¸­ æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“å¯ä»¥æ˜¾é™çº§ UIã€‚getDerivedStateFromError() ä¼šåœ¨æ¸²æŸ“é˜¶æ®µè°ƒç”¨ï¼Œå› æ­¤ä¸å…è®¸å‡ºç°å‰¯ä½œç”¨ã€‚ å¦‚é‡æ­¤ç±»æƒ…å†µï¼Œè¯·æ”¹ç”¨ componentDidCatch() note: UNSAFE_componentWillMount() åœ¨æŒ‚è½½ä¹‹å‰è¢«è°ƒç”¨ã€‚å®ƒåœ¨ render() ä¹‹å‰è°ƒç”¨ï¼Œå› æ­¤åœ¨æ­¤æ–¹æ³•ä¸­åŒæ­¥è°ƒç”¨ setState() ä¸ä¼šè§¦å‘é¢å¤–æ¸²æŸ“ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ constructor() æ¥åˆå§‹åŒ– stateã€‚ react-router çš„åŸç†react-routerçš„å®ç°åŸç† createBrowserHistory: åˆ©ç”¨ HTML5 é‡Œé¢çš„ history createHashHistory: é€šè¿‡ hash æ¥å­˜å‚¨åœ¨ä¸åŒçŠ¶æ€ä¸‹çš„ history ä¿¡æ¯ createMemoryHistory: åœ¨å†…å­˜ä¸­è¿›è¡Œå†å²è®°å½•çš„å­˜å‚¨ linkç»„ä»¶è·Ÿaæ ‡ç­¾çš„åŒºåˆ«æœ‰onclické‚£å°±æ‰§è¡Œonclickclickçš„æ—¶å€™é˜»æ­¢aæ ‡ç­¾é»˜è®¤äº‹ä»¶ï¼ˆè¿™æ ·å­ç‚¹å‡»123å°±ä¸ä¼šè·³è½¬å’Œåˆ·æ–°é¡µé¢ï¼‰å†å–å¾—è·³è½¬hrefï¼ˆå³æ˜¯toï¼‰ï¼Œç”¨historyï¼ˆå‰ç«¯è·¯ç”±ä¸¤ç§æ–¹å¼ä¹‹ä¸€ï¼Œhistory &amp; hashï¼‰è·³è½¬ï¼Œæ­¤æ—¶åªæ˜¯é“¾æ¥å˜äº†ï¼Œå¹¶æ²¡æœ‰åˆ·æ–°é¡µé¢ ä¼ªä»£ç å®ç°1234567891011121314151617181920212223242526272829303132333435// createBrowserHistory(HTML5)ä¸­çš„å‰è¿›å®ç°function finishTransition(location) &#123; ... const historyState = &#123; key &#125;; ... if (location.action === 'PUSH') ) &#123; window.history.pushState(historyState, null, path); &#125; else &#123; window.history.replaceState(historyState, null, path) &#125;&#125;// createHashHistoryçš„å†…éƒ¨å®ç°function finishTransition(location) &#123; ... if (location.action === 'PUSH') ) &#123; window.location.hash = path; &#125; else &#123; window.location.replace( window.location.pathname + window.location.search + '#' + path ); &#125;&#125;// createMemoryHistoryçš„å†…éƒ¨å®ç°entries = [];function finishTransition(location) &#123; ... switch (location.action) &#123; case 'PUSH': entries.push(location); break; case 'REPLACE': entries[current] = location; break; &#125;&#125; vue ç›¸å…³ ä¸ºä»€ä¹ˆç»„ä»¶çš„ data å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ä¸ºäº†è®©æ¯ä¸€ä¸ªå®ä¾‹ç»´æŠ¤ä¸€ä»½è¿”å›å¯¹è±¡çš„ç‹¬ç«‹çš„æ‹·è´ï¼Œè¿™æ ·å„ä¸ªç»„ä»¶çš„ data å˜åŒ–çš„æ—¶å€™äº’ä¸å½±å“ nodeç›¸å…³ nodeæ–‡ä»¶æŸ¥æ‰¾æœºåˆ¶æ€»ä½“æµç¨‹å…¶ä½™çš„ å‚è€ƒæ–‡ç«  æµ…è°ˆ instanceof å’Œ typeof çš„å®ç°åŸç† ä¸¤ä¸ªå¤§æ•°æ±‚å’Œ æ·±å…¥ setstate æœºåˆ¶ å¤§è¯ react ç”Ÿå‘½å‘¨æœŸ 2019ï¼šreact-v16.3 æ–°ç”Ÿå‘½å‘¨æœŸæ€»ç»“ react-router çš„å®ç°åŸç† ç¤¾æ‹›ä¸­çº§å‰ç«¯ç¬”è¯•é¢è¯•é¢˜æ€»ç»“ Why is Reactâ€™s virtual DOM so much faster than the real DOM? å‰ç«¯ 100 é—®ï¼šèƒ½ææ‡‚80%çš„è¯·æŠŠç®€å†ç»™æˆ‘","categories":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"https://ashleyblog.xyz/categories/é¢ç»/"},{"name":"js","slug":"é¢ç»/js","permalink":"https://ashleyblog.xyz/categories/é¢ç»/js/"}],"tags":[{"name":"js","slug":"js","permalink":"https://ashleyblog.xyz/tags/js/"}]},{"title":"2019å¹´åº¦æ€»ç»“","slug":"2019å¹´åº¦æ€»ç»“","date":"2019-12-10T01:45:37.000Z","updated":"2023-04-02T14:00:30.300Z","comments":true,"path":"2019/12/10/2019å¹´åº¦æ€»ç»“/","link":"","permalink":"https://ashleyblog.xyz/2019/12/10/2019å¹´åº¦æ€»ç»“/","excerpt":"","text":"å†™ç»™è‡ªå·±çš„å‡†åˆ™ ä¸ç®¡æ”¹åŠ¨çš„æ–‡ä»¶å†å¤šï¼Œéƒ½è¦ä¸€ä¸ªä¸ªæ£€æŸ¥ï¼Œçœ‹æœ‰æ²¡æœ‰è¯¯æ”¹çš„åœ°æ–¹ï¼Œè‡ªå·±çš„æ”¹åŠ¨æœ‰æ²¡æœ‰å½±å“å…¶ä»–çš„åŠŸèƒ½ å†™ä»£ç å‰ï¼Œè¯·ä¸‰æ€ï¼Œè¯·ä¸‰æ€ï¼Œè¯·ä¸‰æ€ï¼Œä¸è¦æ€¥äºåŠ¨æ‰‹ ä¸è¦ç›¸ä¿¡æµ‹è¯•ï¼Œä¸€å®šè¦åœ¨ä¸Šçº¿ä¹‹å‰ç”¨å„ç§è®¾å¤‡ï¼Œå„ç§å¤§å°çš„å±å¹•ï¼Œå„ç§æµè§ˆå™¨ï¼Œæµ‹è¯•ä¸€éæ‰€æœ‰ç›¸å…³çš„åŠŸèƒ½ï¼Œæ‰€æœ‰å¯èƒ½å‡ºç°çš„æƒ…å†µ ä¸€ä¸ªåŠŸèƒ½ä¸€ä¸ªåˆ†æ”¯ï¼Œæ—¶åˆ»ä¿æŒä¸çº¿ä¸ŠåŒæ­¥ å¤šç ”ç©¶ç ”ç©¶å„ç§åº”ç”¨ï¼Œç«™åœ¨ç”¨æˆ·çš„è§’åº¦å»æµ‹è¯•è€Œä¸æ˜¯è‡ªå·±çš„è§’åº¦ ä¸æ˜ç™½çš„ï¼Œå®¹æ˜“è®°æ··çš„çŸ¥è¯†ç‚¹è¦è‡ªå·±å½’çº³æ€»ç»“ï¼Œå¤šåŠ¨æ‰‹ï¼Œä¸è¦ä»Šå¤©çœ‹å‡ ç¯‡æ–‡ç« æ˜å¤©åˆå¿˜äº† æ™šä¸Šè¦ç¡å¥½ï¼Œé¿å…ç¬¬äºŒå¤©æ‰“çŒç¡ å†™ç»™2020å¹´çš„è‡ªå·± å¤šåŠ¨æ‰‹å†™ä»£ç ï¼Œå¤šç‚¹å·¥ä½œä¹‹å¤–çš„è¾“å‡ºï¼Œå·©å›ºjsåŸºç¡€ï¼Œå¸Œæœ›æˆ‘èƒ½åœ¨è¿™æ¡è·¯è¶Šèµ°è¶Šè¿œå§ã€‚ã€‚ã€‚","categories":[{"name":"æˆé•¿","slug":"æˆé•¿","permalink":"https://ashleyblog.xyz/categories/æˆé•¿/"}],"tags":[]},{"title":"webpackå¸¸ç”¨é…ç½®é€ŸæŸ¥","slug":"webpackå¸¸ç”¨é…ç½®é€ŸæŸ¥","date":"2019-12-08T12:54:46.000Z","updated":"2023-04-02T14:00:30.291Z","comments":true,"path":"2019/12/08/webpackå¸¸ç”¨é…ç½®é€ŸæŸ¥/","link":"","permalink":"https://ashleyblog.xyz/2019/12/08/webpackå¸¸ç”¨é…ç½®é€ŸæŸ¥/","excerpt":"","text":"ç”Ÿäº§ç¯å¢ƒå¸¸ç”¨æ’ä»¶imagemin-webpack-plugin - å›¾ç‰‡å‹ç¼©æ’ä»¶123456789101112//å¼•å…¥æ’ä»¶var ImageminPlugin = require('imagemin-webpack-plugin').default;//é…ç½®plugins: [ new ImageminPlugin(&#123; disable: process.env.NODE_ENV !== 'production', // å¼€å‘æ—¶ä¸å¯ç”¨ pngquant: &#123;//å›¾ç‰‡è´¨é‡ quality: ... &#125; &#125;)] mini-css-extract-plugin - ä¾æ®æ¯ä¸ªentryç”Ÿæˆå•ä¸ªcssæ–‡ä»¶ï¼ˆå°†cssä»jsä¸­æå–å‡ºæ¥ï¼‰12345678910111213// å°†style-loaderæ¢æˆmini-css-extract.. use: [ &#123; loader: MiniCssExtractPlugin.loader &#125;, 'css-loader' ... ] ... new MiniCssExtractPlugin(&#123; filename: 'static/css/[name].[contenthash:8].css', chunkFilename: 'static/css/[name].[contenthash:8].chunk.css' // import() dynamically import &#125;) cleanwebpackpluginåœ¨webpackä¸­æ‰“åŒ…çš„æ–‡ä»¶é€šå¸¸æ˜¯é€šè¿‡hashç”Ÿæˆçš„ï¼Œå¦‚æœæ–‡ä»¶æ”¹åŠ¨ï¼Œé‚£ä¹ˆæ‰“åŒ…çš„æ–‡ä»¶å°±ä¼šè¶Šæ¥è¶Šå¤š,è¿™ä¸ªæ’ä»¶ç”¨æ¥æ¸…é™¤ä¹‹å‰çš„æ–‡ä»¶ postcss-loaderç®€ä»‹èƒ½å¤Ÿåƒlessä¸€æ ·çš„è‡ªåŠ¨è¡¥å…¨æµè§ˆå™¨å‰ç¼€ï¼Œéœ€è¦ä¸autoprefixerä¸€èµ·ä½¿ç”¨,PostCSSçš„ä¸€å¤§ç‰¹ç‚¹æ˜¯ï¼Œå…è®¸ä½¿ç”¨æœ€æ–°çš„CSSç‰¹æ€§ï¼Œåœ¨ä½ çš„CSSé‡Œæä¾›ç»Ÿè®¡æ•°æ®ï¼Œæˆ–è€…æ˜¯å…è®¸ä½ ä½¿ç”¨ Sassï¼ŒLessæˆ–æ˜¯Stylusç­‰CSSé¢„å¤„ç†å™¨ã€‚ postcssçš„ç”Ÿæ€åœˆæä¾›äº†ä¸Šç™¾ç§æ’ä»¶Autoprefixer æ ¹æ®ç”¨æˆ·çš„ä½¿ç”¨åœºæ™¯æ¥è§£æCSSå’Œæ·»åŠ vendor prefixesï¼ˆå‰æ–‡æ³¨2ï¼‰ã€‚ PostCSS Focus ä¸€ç§åˆ©ç”¨é”®ç›˜æ“ä½œä¸ºæ¯ä¸ª:hoveræ·»åŠ :focusé€‰æ‹©å™¨çš„PostCSSæ’ä»¶ã€‚ PreCSS ä¸€ä¸ªå…è®¸ä½ åœ¨ä»£ç ä¸­ä½¿ç”¨ç±»ä¼¼Sassæ ‡è®°çš„æ’ä»¶ã€‚ Stylelint ä¸€ç§å¼ºå¤§çš„ï¼Œå…ˆè¿›çš„å¯ä»¥ä½¿ä½ åœ¨CSSæ ·å¼ä¸­ä¿æŒä¸€è‡´æ€§ï¼Œé¿å…é”™è¯¯çš„CSS linterå·¥å…·ã€‚ PostCSS CSSnext ä¸€ç§å¯ä»¥è®©ä½ ä½¿ç”¨CSSæœ€æ–°ç‰¹æ€§çš„æ’ä»¶ã€‚å®ƒé€šè¿‡å°†æœ€æ–°çš„CSSç‰¹æ€§è½¬å˜ä¸ºç°é˜¶æ®µæµè§ˆå™¨æ‰€å…¼å®¹çš„ç‰¹æ€§ï¼Œè¿™æ ·ä½ ä¸ç”¨å†ç­‰å¾…æµè§ˆå™¨å¯¹æŸä¸€ç‰¹å®šæ–°ç‰¹æ€§çš„æ”¯æŒã€‚ â€¦ ä½¿ç”¨éœ€è¦ç»“åˆpostcss.config.js 12345678910111213141516171819202122// postcss.config.jsmodule.exports = &#123; plugins: [ require('precss'), require('autoprefixer') ]&#125;// webpack.config.js test: /\\.scss$/,&#123; loader: require.resolve('postcss-loader'), options: &#123; ident: 'postcss', plugins: () =&gt; [ require('postcss-flexbugs-fixes'), require('postcss-preset-env')(&#123; autoprefixer: &#123; flexbox: 'no-2009' &#125;, stage: 3 &#125;) ] terser-webpack-plugin - jså‹ç¼©æ’ä»¶ä½¿ç”¨123456789101112131415optimization: &#123; ... minimize: true, minimizer: [ new TerserJSPlugin(&#123; terserOptions: &#123; output: &#123; comments: false &#125; &#125;, extractComments: false &#125;), new OptimizeCSSAssetsPlugin(&#123;&#125;) ] &#125; progress-bar-webpack-pluginç®€ä»‹æ˜¾ç¤ºbuildè¿›åº¦ 123plugins: [ new ProgressBarPlugin()] optimize-css-assets-webpack-plugin - csså‹ç¼©æ’ä»¶1234567891011plugins:[ ... new OptimizeCssAssetsPlugin(&#123; assetNameRegExp: /\\.optimize\\.css$/g, cssProcessor: require('cssnano'), cssProcessorPluginOptions: &#123; preset: ['default', &#123; discardComments: &#123; removeAll: true &#125; &#125;], &#125;, canPrint: true &#125;)] webpack-bundle-analyzerç®€ä»‹å¯ä»¥çœ‹åˆ°æ‰“åŒ…ä¹‹åå„ä¸ªæ–‡ä»¶çš„å¤§å° ä¹‹åå¯ä»¥åšä¸€äº›ä¼˜åŒ– 1234567const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin; module.exports = &#123; plugins: [ new BundleAnalyzerPlugin() ]&#125; å¼€å‘ç¯å¢ƒå¸¸ç”¨æ’ä»¶HotModuleReplacementPlugin123plugins:...new webpack.HotModuleReplacementPlugin() friendly-errors-webpack-plugin - å‹å¥½çš„webpacké”™è¯¯æç¤º123456789new FriendlyErrorsPlugin(&#123; compilationSuccessInfo: &#123; messages: ['You application is running here http://localhost:3000'], notes: ['Some additionnal notes to be displayed unpon successful compilation'] &#125;, onErrors: function (severity, errors) &#123; // You can listen to errors transformed and prioritized by the plugin // severity can be 'error' or 'warning' &#125; åŸºç¡€é…ç½®htmlwebpackpluginhttps://juejin.im/post/5ce96ad7e51d455a2f2201e1 12345678910111213141516171819202122new HtmlWebpackPlugin(&#123; inject: true, excludeAssets: [...], chunks: [page.toLowerCase()].concat( isEnvProduction ? ['assets', 'vendors'...] : [] ), templateParameters: ..., minify: isEnvProduction &amp;&amp; &#123; removeComments: true, collapseWhitespace: true, removeRedundantAttributes: true, useShortDoctype: true, removeEmptyAttributes: true, removeStyleLinkTypeAttributes: true, keepClosingSlash: true, minifyJS: true, minifyCSS: true, minifyURLs: true &#125;, filename: ... template: ... &#125;) å‚è€ƒæ–‡ç«  å…³äº PostCSS æ™®åŠçš„ä¸€ç‚¹å¾®å°çš„å·¥ä½œ","categories":[{"name":"é…ç½®","slug":"é…ç½®","permalink":"https://ashleyblog.xyz/categories/é…ç½®/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"https://ashleyblog.xyz/tags/webpack/"}]},{"title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","date":"2019-11-07T04:09:10.000Z","updated":"2023-04-02T14:00:30.290Z","comments":true,"path":"2019/11/07/å‰ç«¯æ€§èƒ½ä¼˜åŒ–/","link":"","permalink":"https://ashleyblog.xyz/2019/11/07/å‰ç«¯æ€§èƒ½ä¼˜åŒ–/","excerpt":"","text":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µé’ˆå¯¹ spa çš„æ€§èƒ½ä¼˜åŒ– ä¼˜åŒ–é¦–å±æ¸²æŸ“ å°†æ‰€æœ‰ç”¨äºé¦–å±æ¸²æŸ“çš„ css æ–‡ä»¶æ•´åˆæˆä¸€ä¸ªå†…åµŒåˆ° head æ ‡ç­¾ï¼Œç”±äº http æ•°æ®åŒ…çš„é™åˆ¶ï¼Œæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 14kbhttp/2 èƒ½è®© css æ–‡ä»¶ä½¿ç”¨å•ä¸ªæ–‡ä»¶å­˜å‚¨ï¼Œé€šè¿‡æœåŠ¡å™¨æ¨é€ css æ–‡ä»¶çš„ä¼ è¾“æ–¹å¼å‡å°‘ html æ–‡ä»¶æ•°æ®é‡ éª¨æ¶å± é¢„åŠ è½½ å¼‚æ­¥è·¯ç”± è·¯ç”±æ‹†åˆ†,å‡å°‘åˆå§‹åŠ è½½ä½“ç§¯: åˆ©ç”¨å¼‚æ­¥åŠ è½½æ–¹å¼ï¼Œä»…åœ¨éœ€è¦è¿›å…¥å¯¹åº”è·¯ç”±æ—¶ï¼Œå¯¹åº”ç»„ä»¶æ‰ä¼šè¢«åŠ è½½è¿›æ¥ã€‚ 1234route(&#123; Home: () =&gt; import('@/coms/home'), About: () =&gt; import('@/coms/about')&#125;) æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ ç®€å•çš„æ¥è®²ï¼Œå°±æ˜¯æµè§ˆå™¨å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚ï¼Œå¡«å……æ•°æ®ï¼Œç”Ÿæˆ html è¿”å›ç»™æµè§ˆå™¨ ,æœåŠ¡ç«¯å¿…é¡»æ˜¯ node.js æˆ–è€…ä¸“é—¨è·‘ä¸ª node.js æ¥æ”¯æŒä¼˜åŠ¿ï¼šæ›´å¥½çš„ SEOï¼› é¦–å±æ€§èƒ½å¥½ï¼Œä¸éœ€è¦å…ˆä¸‹è½½ä¸€å † js å’Œ css åæ‰èƒ½çœ‹åˆ°é¡µé¢åŠ£åŠ¿ï¼šä¸èƒ½å®ç°éƒ¨åˆ†æ›´æ–°ã€‚å³ä½¿åªæœ‰ä¸€éƒ¨åˆ†å˜åŠ¨ï¼Œä¹Ÿéœ€è¦åç«¯é‡æ–°è¿”å›æ•´ä¸ªé¡µé¢ç»™æµè§ˆå™¨ã€‚ å…¶ä»–é‡ç»˜ å›æµçš„æ¦‚å¿µ repaintï¼Œå°±æ˜¯æµè§ˆå™¨å¾—çŸ¥å…ƒç´ äº§ç”Ÿäº†ä¸å½±å“æ’ç‰ˆçš„æƒ…å†µä¸‹åå¯¹è¿™ä¸ªå…ƒç´ è¿›è¡Œé‡æ–°ç»˜åˆ¶çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚æˆ‘ä»¬æ”¹å˜äº†å…ƒç´ çš„é¢œè‰²ï¼ŒåŠ ä¸ªä¸‹åˆ’çº¿ç­‰ã€‚ reflow, æµè§ˆå™¨å¾—çŸ¥å…ƒç´ äº§ç”Ÿäº†å¯¹æ–‡æ¡£æ ‘æ’ç‰ˆæœ‰å½±å“çš„æ ·å¼å˜åŒ–ï¼Œå¯¹æ‰€æœ‰å—å½±å“çš„domèŠ‚ç‚¹è¿›è¡Œé‡æ–°æ’ç‰ˆå·¥ä½œ* å‡å°‘å›æµ å›æµçš„å‘ç”Ÿï¼š1ã€DOM æ ‘çš„ç»“æ„å˜åŒ–ï¼Œå¦‚æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚ï¼ˆå½“æ–°å¢å¤šä¸ªå…ƒç´ çš„æ—¶å€™ä½¿ç”¨æ–‡æ¡£ç¢ç‰‡ï¼‰åŒ…æ‹¬è®¾ç½® display:none è®¾ç½® visibility åªä¼šè§¦å‘é‡ç»˜2ã€å…ƒç´ çš„å‡ ä½•å±æ€§çš„æ”¹å˜ï¼ˆå¦‚ marginã€paddingã€widthã€heightã€border ç­‰ï¼‰ã€‚3ã€é¡µé¢åˆå§‹åŒ–æ¸²æŸ“ã€‚4ã€è·å–æŸäº›å±æ€§ï¼Œæµè§ˆå™¨ä¸ºå–å¾—å‡†ç¡®çš„å€¼ä¹Ÿä¼šè§¦å‘å›æµï¼ˆoffsetTopã€clientTopã€scrollTopã€getComputedSyle()ç­‰ç­‰ï¼‰ã€‚5ã€æµè§ˆå™¨çª—å£å°ºå¯¸çš„æ”¹å˜ ä¸ºä»€ä¹ˆè·å–æŸäº›å±æ€§ä¼šè§¦å‘å›æµï¼Ÿç”±äºæ¯æ¬¡é‡æ’éƒ½ä¼šé€ æˆé¢å¤–çš„è®¡ç®—æ¶ˆè€—ï¼Œå› æ­¤å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¼šé€šè¿‡é˜Ÿåˆ—åŒ–ä¿®æ”¹å¹¶æ‰¹é‡æ‰§è¡Œæ¥ä¼˜åŒ–é‡æ’è¿‡ç¨‹ã€‚æµè§ˆå™¨ä¼šå°†ä¿®æ”¹æ“ä½œæ”¾å…¥åˆ°é˜Ÿåˆ—é‡Œï¼Œç›´åˆ°è¿‡äº†ä¸€æ®µæ—¶é—´æˆ–è€…æ“ä½œè¾¾åˆ°äº†ä¸€ä¸ªé˜ˆå€¼ï¼Œæ‰æ¸…ç©ºé˜Ÿåˆ—ã€‚ä½†æ˜¯ï¼å½“ä½ è·å–å¸ƒå±€ä¿¡æ¯çš„æ“ä½œçš„æ—¶å€™ï¼Œä¼šå¼ºåˆ¶é˜Ÿåˆ—åˆ·æ–°ï¼Œæ¯”å¦‚å½“ä½ è®¿é—®ä»¥ä¸‹å±æ€§æˆ–è€…ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š offsetTopã€offsetLeftã€offsetWidthã€offsetHeight scrollTopã€scrollLeftã€scrollWidthã€scrollHeight clientTopã€clientLeftã€clientWidthã€clientHeight getComputedStyle() getBoundingClientRect ä»¥ä¸Šå±æ€§å’Œæ–¹æ³•éƒ½éœ€è¦è¿”å›æœ€æ–°çš„å¸ƒå±€ä¿¡æ¯ï¼Œå› æ­¤æµè§ˆå™¨ä¸å¾—ä¸æ¸…ç©ºé˜Ÿåˆ—ï¼Œè§¦å‘å›æµé‡ç»˜æ¥è¿”å›æ­£ç¡®çš„å€¼ã€‚ æ€ä¹ˆé¿å… å¯¹äºå¤æ‚çš„åŠ¨ç”»æ•ˆæœï¼Œè®©å…¶ç»å¯¹å®šä½ é¿å…å¤šæ¬¡è®¿é—®ä¸Šè¿°çš„å±æ€§ ä½¿ç”¨ç±»å ä½¿ç”¨ csstext å½“æ·»åŠ æ’å…¥å¤§é‡çš„å…ƒç´ çš„æ—¶å€™ ä½¿ç”¨æ–‡æ¡£ç¢ç‰‡æˆ–è€…æ˜¯åœ¨çˆ¶å…ƒç´ åœ¨è¢«æ’å…¥ä¹‹å‰è®¾ç½®display:noneè®©å…¶è„±ç¦»æ–‡æ¡£æµ ä¹‹åå†å¸¦å›æ–‡æ¡£æµ ç¡¬ä»¶åŠ é€Ÿï¼Œä½¿ç”¨ css3 ç¡¬ä»¶åŠ é€Ÿï¼Œå¯ä»¥è®© transformã€opacityã€filters è¿™äº›åŠ¨ç”»ä¸ä¼šå¼•èµ·å›æµé‡ç»˜ ã€‚ä½†æ˜¯å¯¹äºåŠ¨ç”»çš„å…¶å®ƒå±æ€§ï¼Œæ¯”å¦‚ background-color è¿™äº›ï¼Œè¿˜æ˜¯ä¼šå¼•èµ·å›æµé‡ç»˜çš„ï¼Œä¸è¿‡å®ƒè¿˜æ˜¯å¯ä»¥æå‡è¿™äº›åŠ¨ç”»çš„æ€§èƒ½ å¸¸è§çš„è§¦å‘ç¡¬ä»¶åŠ é€Ÿçš„ css å±æ€§ï¼štransform,opacity,filters,Will-change ä½¿ç”¨æ§åˆ¶å°çš„performanceç›‘æµ‹é¡µé¢çš„æ€§èƒ½ï¼ˆåŸæ¥çš„ timelineï¼‰ä½¿ç”¨æŒ‡å—ï¼šhttps://www.cnblogs.com/xiaohuochai/p/9182710.html å…¶ä»– å¤æ‚çš„è®¡ç®—ä½¿ç”¨web workers äº‹ä»¶å§”æ‰˜ æ­£åˆ™è¡¨è¾¾å¼ä¸è¦è¿‡äºå¤æ‚ ä½¿ç”¨ webpack ä¼˜åŒ– ä¼˜åŒ–å›¾ç‰‡ - ä½¿ç”¨url-loader è®¾ç½®limit å¤§çš„å›¾è½¬æˆbase64 ä½¿ç”¨å„ç§æ’ä»¶å‹ç¼©ä»£ç  tree-shakingæ˜¯ä»€ä¹ˆï¼Ÿç”¨äºæè¿°ç§»é™¤ JavaScript ä¸Šä¸‹æ–‡ä¸­çš„æœªå¼•ç”¨ä»£ç æ€ä¹ˆåšï¼Ÿ ä½¿ç”¨ ES2015 æ¨¡å—è¯­æ³•ï¼ˆå³ import å’Œ exportï¼‰ã€‚ç¡®ä¿æ²¡æœ‰ compiler å°† ES2015 æ¨¡å—è¯­æ³•è½¬æ¢ä¸º CommonJS æ¨¡å—ï¼ˆè¿™ä¹Ÿæ˜¯æµè¡Œçš„ Babel preset ä¸­ @babel/preset-env çš„é»˜è®¤è¡Œä¸º \\ 123456789101112// é…ç½® Babel è®©å…¶ä¿ç•™ ES6 æ¨¡å—åŒ–è¯­å¥ // babelrc&#123; \"presets\": [ [ \"env\", &#123; \"modules\": false &#125; ] ]&#125; åœ¨é¡¹ç›® package.json æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª â€œsideEffectsâ€ å±æ€§ã€‚æ¯”å¦‚polyfillç­‰ åªè¦å¼•å…¥ å°±ä¼šäº§ç”Ÿå‰¯ä½œç”¨ å½“è¯¥å±æ€§è®¾ç½®ä¸ºfalseçš„æ—¶å€™ä¼šåˆ é™¤æ‰€æœ‰æœªå¼•ç”¨çš„æ–‡ä»¶ æ‰€ä»¥polyfilléœ€è¦å£°æ˜sideeffects,true æ˜¯é»˜è®¤å€¼ï¼Œå¦‚æœä¸æŒ‡å®šå…¶ä»–å€¼çš„è¯ã€‚è¿™æ„å‘³ç€æ‰€æœ‰çš„æ–‡ä»¶éƒ½æœ‰å‰¯ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ä¸€ä¸ªæ–‡ä»¶å¯ä»¥ tree-shakingã€‚ 123456789101112131415// æ‰€æœ‰æ–‡ä»¶éƒ½æœ‰å‰¯ä½œç”¨ï¼Œå…¨éƒ½ä¸å¯ tree-shaking&#123; \"sideEffects\": true&#125;// æ²¡æœ‰æ–‡ä»¶æœ‰å‰¯ä½œç”¨ï¼Œå…¨éƒ½å¯ä»¥ tree-shaking&#123; \"sideEffects\": false&#125;// åªæœ‰è¿™äº›æ–‡ä»¶æœ‰å‰¯ä½œç”¨ï¼Œæ‰€æœ‰å…¶ä»–æ–‡ä»¶éƒ½å¯ä»¥ tree-shakingï¼Œä½†ä¼šä¿ç•™è¿™äº›æ–‡ä»¶&#123; \"sideEffects\": [ \"./src/file1.js\", \"./src/file2.js\" ]&#125; é€šè¿‡å°† mode é€‰é¡¹è®¾ç½®ä¸º productionï¼Œå¯ç”¨ minification(ä»£ç å‹ç¼©) å’Œ tree shakingã€‚å¼€å¯ optimization.usedExports,ç¼–è¯‘æ—¶å¯ä»¥åˆ†æå‡ºè§£æ„å†™æ³•å¼•å…¥çš„esmæ¨¡å—ï¼Œå“ªäº›exportç”¨åˆ°äº†ï¼Œå“ªäº›æ¨¡å—æ²¡æœ‰ç”¨åˆ°ã€‚ç„¶åå°±éœ€è¦åˆ†åˆ«è¿›è¡Œæ ‡è®°,æ ‡è®°å¦‚ä¸‹ å¹¶ä½¿ç”¨å‹ç¼©æ’ä»¶å‹ç¼©ä»£ç  webpack4 modeä¸ºproductionæ—¶å€™é»˜è®¤å°±æœ‰è¿™ä¸¤ä¸ªè®¾ç½® 123/* harmony export (immutable) */ __webpack_exports__[\"xxx\"] = xxxx;/* unused harmony export xxx */ æ ‡è®°ä¸ºè¿™ä¸ªå°±æ˜¯éœ€è¦åˆ æ‰çš„ ä»¥ä¸Šè¿°æ–¹å¼å£°æ˜sideeffectsä¼šå‡ºç°çš„é—®é¢˜ï¼šä»¥import &#39;xxx.cssç›´æ¥å¯¼å…¥åˆ° JavaScript æ–‡ä»¶ä¸­çš„æ ·å¼è¡¨éƒ½å°†ä»è¾“å‡ºä¸­åˆ é™¤è§£å†³åŠæ³•æ˜¯ï¼šwebpackçš„é…ç½®æ–‡ä»¶ä¸­ 123456789module: &#123; rules: [ &#123; test: /...css.../, use: [loaders], sideEffects: true &#125; ]&#125; å¼•å…¥çš„æ—¶å€™ä½¿ç”¨è§£æ„èµ‹å€¼ ä¸ç”¨çš„ä¾èµ–åŠæ—¶åˆ é™¤ external æŠŠæˆ‘ä»¬çš„ä¾èµ–ç”³æ˜ä¸ºä¸€ä¸ªå¤–éƒ¨ä¾èµ–ï¼Œå¤–éƒ¨ä¾èµ–é€šè¿‡ &lt; script&gt; å¤–é“¾è„šæœ¬å¼•å…¥ã€‚ optimization é…ç½®ç»†èŠ‚https://imweb.io/topic/5b66dd601402769b60847149 alias å’Œ noParseå½“éœ€è¦å°†è¿™ä¸ªå¤–éƒ¨ä¾èµ–æ‰“åŒ…è¿›å…¥åˆ°ä½ çš„ bundle çš„æ—¶å€™ 1234567891011121314module.exports = function(webpackConfig) &#123; ...+ webpackConfig.resolve.alias = &#123;+ 'react': 'react/dist/react.min'+ &#125;+ webpackConfig.module.noParse.push(+ /react.min/+ ) ... return webpackConfig;&#125;; å…¶ä»– - ä¼˜åŒ–SEOé‡è¦çš„å†…å®¹æ”¾åœ¨é¦–é¡µ å› ä¸ºçˆ¬è™«ä¼šå…ˆä»é¦–é¡µå¼€å§‹çˆ¬æäº¤sitemapåŠ å¿«é¡µé¢åŠ è½½é€Ÿåº¦ æå‡æœç´¢å¼•æ“æ’åâ€¦ å‚è€ƒæ–‡ç«  ä½ çœŸçš„äº†è§£å›æµå’Œé‡ç»˜å— Webpack æ„å»ºæ€§èƒ½ä¼˜åŒ–æ¢ç´¢","categories":[{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","permalink":"https://ashleyblog.xyz/categories/æ€§èƒ½ä¼˜åŒ–/"}],"tags":[]},{"title":"cssä¸­å®½é«˜çš„æ–°å€¼å¤ä¹ ","slug":"cssä¸­å®½é«˜çš„æ–°å€¼å¤ä¹ ","date":"2019-10-17T13:50:15.000Z","updated":"2023-04-02T14:00:30.295Z","comments":true,"path":"2019/10/17/cssä¸­å®½é«˜çš„æ–°å€¼å¤ä¹ /","link":"","permalink":"https://ashleyblog.xyz/2019/10/17/cssä¸­å®½é«˜çš„æ–°å€¼å¤ä¹ /","excerpt":"","text":"fill-available å‡ºç°fill-availableå…³é”®å­—å€¼çš„ä»·å€¼åœ¨äºï¼Œå¯ä»¥è®©å…ƒç´ çš„100%è‡ªåŠ¨å¡«å……ç‰¹æ€§ä¸ä»…ä»…åœ¨blockæ°´å¹³å…ƒç´ ä¸Šï¼Œä¹Ÿå¯ä»¥åº”ç”¨åœ¨å…¶ä»–å…ƒç´ åˆ©ç”¨å®ƒå®ç°ç­‰é«˜å¸ƒå±€ 123456789101112131415&lt;style&gt;.inner&#123; width:100px; height:-webkit-fill-available; margin:0 10px; display: inline-block; vertical-align: middle; background-color: pink;&#125;&lt;/style&gt;&lt;div style=\"height: 100px;\"&gt; &lt;div class=\"inner\"&gt;HTML&lt;/div&gt; &lt;div class=\"inner\"&gt;CSS&lt;/div&gt; &lt;div class=\"inner\"&gt;JS&lt;br&gt;jQyery&lt;br&gt;Vue&lt;/div&gt;&lt;/div&gt; max-contentfit-content uses max-content, unless available &lt; max-content, then it uses available. Unless available &lt; min-content, then it uses min-content. 12345678910&lt;style&gt;.outer&#123; width:-webkit-max-content; border:1px solid black;&#125;&lt;/style&gt;&lt;div class=\"outer\"&gt; &lt;div style=\"height:10px;width:100px;background:lightgreen\"&gt;&lt;/div&gt; &lt;div style=\"background-color: pink;\"&gt;æµ‹è¯•æµ‹è¯•æµ‹è¯•æµ‹è¯•æµ‹è¯•æµ‹ hi æ˜¯æµ‹è¯•æµ‹è¯•æµ‹è¯•æµ‹ä½ æµ‹è¯•æµ‹è¯•æµ‹è¯•æµ‹è¯•&lt;/div&gt;&lt;/div&gt; æ¯æ—¥å°çŸ¥è¯†ç‚¹ å…³äºä¸‹è½½çš„æ–‡ä»¶çš„åç¼€ä½ åœ¨ç½‘ä¸Šä¸‹è½½ä¸€ä¸ªå¾ˆå¤§çš„æ–‡ä»¶ï¼Œä¸‹è½½è¿‡ç¨‹ä¸­ä½ æ€ä¹ˆçŸ¥é“è‡ªå·±ä¸‹è½½çš„å¯¹ä¸å¯¹å‘¢ï¼Ÿæ‰€ä»¥MD5 å°±æ˜¯ä¸ºäº†è¿™ç§æƒ…æ™¯è€Œç”Ÿçš„ã€‚å³ç½‘ä¸Šçš„æ–‡ä»¶é™¤äº†æœ‰èµ„æºæœ¬èº«å¤–ï¼Œè¿˜ä¼šæœ‰ä¸€ä¸ªMD5å€¼ï¼Œç„¶åä½ ä¸‹è½½åˆ°æœ¬åœ°åçš„æ–‡ä»¶ä¹Ÿå¯ä»¥ç®—å‡ºä¸€ä¸ªMD5 å€¼ï¼Œç„¶åäºŒè€…å¯¹æ¯”ï¼Œå¦‚æœå®Œå…¨ç›¸åŒåˆ™è¯´æ˜ä¸‹çš„æ–‡ä»¶æ˜¯æ­£ç¡®çš„ã€‚ å‚è€ƒæ–‡ç«  æµè§ˆå™¨ç¼“å­˜æ§åˆ¶è¯¦è§£ï¼ˆcookieã€sessionã€localStorageã€Cache-Controlç­‰","categories":[],"tags":[{"name":"css","slug":"css","permalink":"https://ashleyblog.xyz/tags/css/"}]},{"title":"æ§åˆ¶reactçš„stateä¸ºåˆæ³•çŠ¶æ€","slug":"æ§åˆ¶reactçš„stateä¸ºåˆæ³•çŠ¶æ€","date":"2019-10-14T14:58:27.000Z","updated":"2023-04-02T14:00:30.292Z","comments":true,"path":"2019/10/14/æ§åˆ¶reactçš„stateä¸ºåˆæ³•çŠ¶æ€/","link":"","permalink":"https://ashleyblog.xyz/2019/10/14/æ§åˆ¶reactçš„stateä¸ºåˆæ³•çŠ¶æ€/","excerpt":"","text":"12345678910111213141516171819202122232425262728293031const zipList = initialArray =&gt; &#123; const [initialActive, ...restOfTabs] = initialArray const zip = &#123; previous: [], current: initialActive, next: restOfTabs, &#125; const setActive = zip =&gt; newActive =&gt; &#123; // TODO: fill this in const newZip = zip return apiForZip(newZip) &#125; const apiForZip = zip =&gt; (&#123; asArray: () =&gt; [...zip.previous, zip.current, ...zip.next], isActive: tab =&gt; zip.current === tab, setActive: setActive(zip), activeTab: () =&gt; zip.current, &#125;) return apiForZip(zip)&#125;const [tabs, setTabs] = React.useState( zipList([ &#123; title: 'Tab One', content: 'This is tab one' &#125;, &#123; title: 'Tab Two', content: 'This is tab two' &#125;, &#123; title: 'Tab Three', content: 'This is tab three' &#125;, ])) æ¯æ—¥å°çŸ¥è¯†ç‚¹ å­—ä½“çš„æ—‹è½¬å°†å­—ä½“è®¾ç½®æˆdisplay:blockå³å¯ run buildæ–‡ä»¶å¤¹ï¼ˆä¸ºäº†æ›´æ¥è¿‘çº¿ä¸Šçš„æ•ˆæœï¼‰ä½¿ç”¨http-serverå·¥å…· æ‰§è¡Œå‘½ä»¤: ï¼ˆåŸç†æ˜¯puputeeræŠ“å–buildä¸‹çš„èµ„æº ç„¶åã€‚ã€‚ 1http-server build/ project name å°½é‡ä¸è¦ä½¿ç”¨pushè·³è½¬è·¯ç”± å› ä¸ºè¿™ç§åŠ¨æ€çš„æ–¹å¼ä¸åˆ©äºssr git config -list æŸ¥çœ‹å½“å‰é¡¹ç›®çš„gité…ç½® è¯·æ±‚è¢«é‡å®šå‘ ï¼ˆnetworkå‡ºç°â€¦htmlâ€¦å¾ˆé•¿çš„è·¯å¾„ å¹¶è¢«canceledï¼‰ å¯èƒ½æ˜¯åç«¯æ­£åœ¨éƒ¨ç½²åˆ°æ–°çš„æœåŠ¡å™¨ æ¯æ—¥bugè®°å½• è¯·æ±‚è¿”å›500 å‘ç°æ˜¯ä¼ çš„å‚æ•°çš„æ ¼å¼ä¸å¯¹ åº”è¯¥æ˜¯formè¡¨å•çš„å½¢å¼ è€Œä¸æ˜¯application/jsonæ ¼å¼ è™½ç„¶APIæ–‡æ¡£ä¸­æ²¡æœ‰æ ‡å‡º ä½†æ˜¯ä¹Ÿè¦æ³¨æ„ å‘ç°é‡æ–°è¿›å…¥é¡µé¢åŠ è½½æ•°æ®çš„æ—¶å€™æ²¡æœ‰å‡ºç°loading æ˜¯å› ä¸ºæ•°æ®å­˜å‚¨åœ¨mobxä¸­ æ²¡æœ‰åˆ·æ–°è¢«æ¸…é™¤ æ‰€ä»¥è¦åœ¨æ¯æ¬¡è¯·æ±‚ä¹‹å‰æ¸…é™¤ä¸€æ¬¡æˆ–è€…æ˜¯ä¸èµ°mobxæµç¨‹ çˆ¶å±‚å ä¸Šä¸‹æ–‡ä¸­çš„å­å±‚å ä¸Šä¸‹æ–‡ 12345678...position:relative /* çˆ¶ */...position:absolutez-index:2 /*å­*/...position:absolutez-index:1 /* å”å” */ æœ€åè¿˜æ˜¯å”å”æ˜¾ç¤ºåœ¨å­èŠ‚ç‚¹çš„ä¸Šé¢ å› ä¸ºå­å±‚å ä¸Šä¸‹æ–‡å±äºçˆ¶å±‚å ä¸Šä¸‹æ–‡ table è®¾ç½®flexå¸ƒå±€ tdå…ƒç´ ä¸ä¼šè‡ªåŠ¨å¡«å……æ»¡tbody node execä¸æ‰§è¡Œå›è°ƒå‡½æ•° 1234var exec = require('child_process').exec;exec(\"&#123;COMMAND&#125; &gt; results.log\", function (error, stdout, stderr) &#123; console.log('callback called!'); // this never gets called.&#125;); æ˜¯å› ä¸ºé‡å®šå‘åˆ°äº†å¦ä¸€ä¸ªæ–‡ä»¶ *","categories":[],"tags":[]},{"title":"sassä¸­çš„mapå’Œlist","slug":"sassä¸­çš„map","date":"2019-10-11T12:28:00.000Z","updated":"2023-04-02T14:00:30.297Z","comments":true,"path":"2019/10/11/sassä¸­çš„map/","link":"","permalink":"https://ashleyblog.xyz/2019/10/11/sassä¸­çš„map/","excerpt":"","text":"mapç®€ä»‹ç±»ä¼¼äº js ä¸­çš„ map æ•°æ®ç»“æ„ ä¸»è¦å‡½æ•° å‡½æ•° åŠŸèƒ½ ç¤ºä¾‹ map-keys(map) è¿”å› map é‡Œé¢æ‰€æœ‰çš„ key(list) map-keys((â€œfooâ€: 1, â€œbarâ€: 2)) =&gt; â€œfooâ€, â€œbarâ€ map-values(map) è¿”å› map é‡Œé¢æ‰€æœ‰çš„ value(list) map-values((â€œfooâ€: 1, â€œbarâ€: 2)) =&gt; 1, 2 map-get(map,key) è¿”å› map é‡Œé¢æŒ‡å®šå¯ä»¥çš„ value map-get((â€œfooâ€: 1, â€œbarâ€: 2), â€œfooâ€) =&gt; 1 map-has-key(map,key) è¿”å› map é‡Œé¢æ˜¯å¦å«æœ‰æŒ‡å®šçš„ key map-has-key((â€œfooâ€: 1, â€œbarâ€: 2), â€œfooâ€) =&gt; true map-merge(map1,map2) åˆå¹¶ map(map) map-merge((â€œfooâ€: 1), (â€œbarâ€: 2)) =&gt; (â€œfooâ€: 1, â€œbarâ€: 2) map-remove(map,keys) åˆ é™¤æŒ‡å®š map ä¸­çš„æŒ‡å®š key(map) map-remove((â€œfooâ€: 1, â€œbarâ€: 2), â€œbarâ€) =&gt; (â€œfooâ€: 1) keywords(args) è¿”å›ä¸€ä¸ªå‡½æ•°å‚æ•°ç»„æˆçš„ map(map) @mixin foo(argsâ€¦){@debug keywords($args); //=&gt; (arg1: val, arg2: val)} listç®€ä»‹ç±»ä¼¼jsä¸­çš„æ•°ç»„ 12345$list: ( (\"item-1.1\", \"item-1.2\", \"item-1.3\"), (\"item-2.1\", \"item-2.2\", \"item-2.3\"), (\"item-3.1\", \"item-3.2\", \"item-3.3\") ); æ–¹æ³• length æ£€æµ‹å…¶é•¿åº¦ï¼š 1length($a) =&gt; 1 nth è·å–ç¬¬né¡¹ï¼š 1nth($a,1) =&gt; test index($list,$value)ï¼šè¿”å›$valueåœ¨$listä¸­çš„ä½ç½® append($list,$value[,$separator])ï¼šä½¿ç”¨$separatoråˆ†éš”ç¬¦å°†$valueåˆ—è¡¨é¡¹æ·»åŠ åˆ°$listæœ€åï¼ˆå¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®š $separatoråˆ†éš”ç¬¦ï¼Œä¼šä»¥å½“å‰åˆ†éš”ç¬¦åˆ†éš”ï¼‰ join($list-1,$list-2[,$separator]):ä½¿ç”¨$separatoråˆ†éš”ç¬¦å°†$list-2é™„åŠ åˆ°$list-1ï¼ˆå¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šåˆ†éš”ç¬¦ï¼Œå°†å¯¹* $list-1ä¸­çš„åˆ†éš”ç¬¦ï¼‰ zip($lists):å°†å¤šä¸ª$listç»„åˆåœ¨ä¸€èµ·æˆä¸ºä¸€ä¸ªå¤šç»´åˆ—è¡¨ã€‚å¦‚æœåˆ—è¡¨æºé•¿åº¦å¹¶ä¸æ˜¯æ‰€æœ‰éƒ½ç›¸åŒï¼Œç»“æœåˆ—è¡¨é•¿åº¦å°†ä»¥æœ€çŸ­çš„ä¸€ä¸ªä¸ºå‡† reject($list,$value)ï¼šè¿™æ˜¯Compassä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œå°†$valueå€¼ä»$listä¸­åˆ é™¤ compact(*$args)ï¼šCompasså‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªåˆ é™¤éçœŸå€¼çš„æ–°åˆ—è¡¨ liståº”ç”¨ æ‰©å±•é€‰æ‹©å™¨ å¦‚:1234.home .nav-home,.about .nav-about,.products .nav-products,.contact .nav-contact 12345678$pages: home,about,products,contact;$selector:();@each $item in $pages &#123; //æˆ‘ä»¬åˆ›å»º$selector&#125;#&#123;$selector&#125;&#123; //æ ·å¼å†™åœ¨è¿™é‡Œ&#125; è‡ªå®šä¹‰å‡½æ•°123456789//å®šä¹‰first()å‡½æ•°ï¼Œè·å–åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªåˆ—è¡¨é¡¹@function first($list)&#123; @return nth($list,1);&#125;//å®šä¹‰last()å‡½æ•°ï¼Œè·å–åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªåˆ—è¡¨é¡¹@function last($list)&#123; @return nth($list,length($list));&#125; æ¯æ—¥å°çŸ¥è¯†ç‚¹ unquote ç”¨æ¥å»é™¤å­—ç¬¦ä¸²ä¸­çš„å¼•å· quote ç»™å­—ç¬¦ä¸²å¢åŠ å¼•å· ä¼ é€’å†…å®¹å—åˆ° mixin: @content 12345678910@mixin apply-to-ie6-only &#123; * html &#123; @content; &#125;&#125;@include apply-to-ie6-only &#123; #logo &#123; background-image: url(/logo.gif); &#125;&#125; target ä¼ªç±»å¯ä»¥åœ¨ä¸æ–°å¢ç±»åçš„æ—¶å€™ç›´æ¥å®ç°æ ‡ç­¾é¡µçš„æ•ˆæœåŸç†ï¼š ä¹Ÿå°±æ˜¯ç»™ä¸€ä¸ªå…ƒç´  A è®¾å®š idï¼Œå¦ä¸€ä¸ªå…ƒç´  B æŒ‡å®šè·³è½¬åˆ°è¿™ä¸ª idï¼Œç„¶åå°±å‘ a:hover é‚£æ ·ï¼Œåœ¨ css ä¸­è®¾å®š â€œå…ƒç´ ï¼štargetâ€å¹¶æ”¹å˜æ ·å¼ï¼Œé‚£ä¹ˆç‚¹å‡» B å…ƒç´ ï¼Œå°±ä¼šæ ¹æ®ä½ çš„è®¾å®šæ”¹å˜ A çš„æ ·å¼ã€‚ 123456789101112&lt;div class=\"swiper-box\"&gt; &lt;div class=\"swiper-cont\"&gt; &lt;div class=\"swiper1\" id=\"swiper1\"&gt;&lt;/div&gt; &lt;div class=\"swiper2\" id=\"swiper2\"&gt;&lt;/div&gt; &lt;div class=\"swiper3\" id=\"swiper3\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class=\"swiper-num\"&gt; &lt;a href=\"#swiper1\"&gt;1&lt;/a&gt; &lt;a href=\"#swiper2\"&gt;2&lt;/a&gt; &lt;a href=\"#swiper3\"&gt;3&lt;/a&gt; &lt;/div&gt;&lt;/div&gt; focus:within ä¼ªç±» åº”ç”¨äºå½“å­å…ƒç´ ä¸­å‡ºç°è·å¾—ç„¦ç‚¹çš„å…ƒç´ æ—¶å€™ 123&lt;div&gt; &lt;input /&gt;&lt;/div&gt; 12div:focus:within &#123;&#125; css ä¼ªç±»ä¸ä¼ªå…ƒç´ css ä¼ªç±»css ä¼ªç±»ç”¨äºå‘æŸäº›é€‰æ‹©å™¨æ·»åŠ ç‰¹æ®Šçš„æ•ˆæœã€‚:link, :visited, :hover, :focus, :active, :first-child, :langcss3 æ–°å¢çš„ä¼ªç±»ï¼š:last-child, :only-child, :first-of-type, :last-of-type, :only-of-type, :nth-child(n), :nth-last-child(n), :nth-of-type(n), :nth-last-of-type(n), :root, :empty, :target, :enabled, :disabled, :checked, :not(selector), css ä¼ªå…ƒç´ css ä¼ªå…ƒç´ ç”¨äºå‘æŸäº›é€‰æ‹©å™¨è®¾ç½®ç‰¹æ®Šæ•ˆæœã€‚::first-letter, ::first-line, ::before, ::aftercss3 æ–°å¢çš„ä¼ªå…ƒç´ ::selection é€šè¿‡ first-letter text-transform: uppercase text-transform: lowercaseæ§åˆ¶å¤§å°å†™ æ¯æ—¥ bug è®°å½• max-height è®¾ç½® transition çš„æ—¶å€™ä¸ç”Ÿæ•ˆ æ˜¯å› ä¸º max-height è®¾ç½®äº†ä¸€ä¸ªå¾ˆå¤§çš„èŒƒå›´ æ¯”å¦‚ä» 0 åˆ° 1000 è€Œå®é™…çš„å†…å®¹é«˜åº¦åªæœ‰ 100 é‚£ä¹ˆå‰©ä¸‹çš„æ—¶é—´å¤§éƒ½æ˜¯åœ¨æ»šåŠ¨è¿™ 900 ä½¿ç”¨ js è®¾ç½®å…ƒç´ çš„è¡Œå†…æ ·å¼å¯ä»¥åº”ç”¨æ ·å¼è¡¨ä¸­çš„ transition git å†²çªçš„ç†è§£åªæœ‰å½“åŒæ—¶ä¿®æ”¹äº†æŸä¸ªæ–‡ä»¶çš„æ—¶å€™æ‰ä¼šå‡ºç°å†²çª è¦æ˜¯æœ¬åœ°çš„çŠ¶æ€æ˜¯ nothing commit git pull çš„æ—¶å€™ä¼šç›´æ¥è¦†ç›–æ‰æœ¬åœ°çš„æ–‡ä»¶ git merge çš„ç†è§£ä»çˆ¶åˆ†æ”¯åˆ‡å‡ºå­åˆ†æ”¯ å­åˆ†æ”¯ pull çˆ¶åˆ†æ”¯ å­åˆ†æ”¯ä¸Šçš„ä»£ç ä¼šä¸çˆ¶åˆ†æ”¯ä¿æŒä¸€è‡´ ä½†æ˜¯çˆ¶åˆ†æ”¯ merge å­åˆ†æ”¯ çˆ¶åˆ†æ”¯çš„å†…å®¹ä¸ä¸€å®šè¦ä¸å­åˆ†æ”¯ä¿æŒä¸€è‡´ åœ¨ä¸€ä¸ªhooksé‡Œé¢ç»´æŠ¤ä¸€ä»½state ç„¶ååœ¨å¦ä¸€ä¸ªç»„ä»¶ä¸­setState ä¸€ä¸ªç»„ä»¶ä¸­è·å–state ä¸¤ä¸ªç»„ä»¶çš„stateå¹¶ä¸ä¼šåŒæ­¥","categories":[{"name":"sass","slug":"sass","permalink":"https://ashleyblog.xyz/categories/sass/"}],"tags":[{"name":"sass css","slug":"sass-css","permalink":"https://ashleyblog.xyz/tags/sass-css/"}]},{"title":"tså°çŸ¥è¯†ç‚¹","slug":"tså°çŸ¥è¯†ç‚¹","date":"2019-10-11T12:28:00.000Z","updated":"2023-04-02T14:00:30.291Z","comments":true,"path":"2019/10/11/tså°çŸ¥è¯†ç‚¹/","link":"","permalink":"https://ashleyblog.xyz/2019/10/11/tså°çŸ¥è¯†ç‚¹/","excerpt":"","text":"ç”¨ keyof æ¥çº¦å®šæ–¹æ³•çš„å‚æ•° 123456789101112export type keys = &#123; name: string; appId: number; config: object;&#125;class Application &#123; // å‚æ•°å’Œå€¼çº¦æŸèŒƒå›´ set&lt;T extends keyof keys&gt;(key: T, val: keys[T]) get&lt;T extends keyof keys&gt;(key: T): keys[T]&#125;---- interface vs typeæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ in æ¥çº¦æŸå±æ€§åå¿…é¡»ä¸ºä¸‰å®¶è¿è¥å•†ä¹‹ä¸€ï¼š 123456789101112type ChinaMobilePhones = '10086' | '10010' | '10000'interface ChinaMobile &#123; name: string; website: string;&#125;// åªèƒ½ type ä½¿ç”¨ï¼Œ interface æ— æ³•ä½¿ç”¨type ChinaMobileList = &#123; // éå†å±æ€§ [phone in ChinaMobilePhones]: ChinaMobile&#125; ç±»å‹å®šä¹‰æ–‡ä»¶åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç®€å•çš„ï¼Œåœ¨ä»£ç ç¼–å†™ä¸­å®šä¹‰ç±»å‹ï¼š 123456interface IBaseModel &#123; say(keys: string[] | null): object&#125;class User implements IBaseModel &#123; name: string ä½†æ˜¯ä¸»æµçš„åº“éƒ½æ˜¯ JavaScript ç¼–å†™çš„ï¼ŒTypeScript èº«ä¸º JavaScript çš„è¶…é›†ï¼Œè‡ªç„¶éœ€è¦è€ƒè™‘åˆ°å¦‚ä½•è®© JS åº“ä¹Ÿèƒ½å®šä¹‰é™æ€ç±»å‹ã€‚ TypeScript ç»è¿‡äº†ä¸€ç³»åˆ—çš„æ‘¸ç´¢ï¼Œå…ˆåæå‡ºäº† tsd(å·²åºŸå¼ƒ)ã€typings(å·²åºŸå¼ƒ)ï¼Œæœ€ç»ˆåœ¨ TypeScript 2.0 çš„æ—¶å€™é‡æ–°æ•´ç†äº†ç±»å‹å®šä¹‰ï¼Œæå‡ºäº† DefinitelyTypedã€‚ DefinitelyTyped å°±æ˜¯è®©ä½ æŠŠ â€œç±»å‹å®šä¹‰æ–‡ä»¶(*.d.ts)â€ï¼Œå‘å¸ƒåˆ° npm ä¸­ï¼Œé…åˆç¼–è¾‘å™¨(æˆ–æ’ä»¶)ï¼Œå°±èƒ½å¤Ÿæ£€æµ‹åˆ° JS åº“ä¸­çš„é™æ€ç±»å‹ã€‚ ç±»å‹å®šä¹‰æ–‡ä»¶çš„ä»¥ .d.ts ç»“å°¾ï¼Œé‡Œé¢ä¸»è¦ç”¨æ¥å®šä¹‰ç±»å‹ã€‚æ¯”å¦‚ï¼š å› ä¸ºè¿™å‡ ä¸ªåº“æ˜¯ js çš„ï¼Œæ²¡æœ‰ ts çš„ç±»å‹å£°æ˜ä¹Ÿæ²¡æœ‰å¥½çš„@types/å¯¹åº”çš„åº“ 123declare module 'classnames';declare module 'htmr';declare module 'showdown-katex'; å†…ç½®ç±»å‹å®šä¹‰å°±æ˜¯æŠŠä½ çš„ç±»å‹å®šä¹‰æ–‡ä»¶å’Œ npm åŒ…ä¸€èµ·å‘å¸ƒ 123456789// pageage.json&#123; \"name\": \"demo\", \"author\": \"demo project\", \"version\": \"1.0.0\", \"main\": \"./lib/main.js\", // å®šä¹‰ä¸»ç±»å‹å®šä¹‰æ–‡ä»¶ \"types\": \"./lib/main.d.ts\"&#125; å®šä¹‰æ•°ç»„çš„ç±»å‹ä¸ºç¬¬ä¸€é¡¹æ˜¯å‡½æ•° å…¶ä½™çš„æ˜¯å¯¹è±¡ 12345678910interface Arglist &#123; [index: number]: object 0: Function&#125;const a1: Arglist = [func]const a2: Arglist = [22] // failsconst a3: Arglist = [func, 'foo']// æ–¹å¼äºŒtype FAs = [Function, &#123;&#125;] ç»§æ‰¿çš„æ—¶å€™æ’é™¤çˆ¶æ¥å£ä¸­çš„ä¸€éƒ¨åˆ†å±æ€§ 123export type Omit&lt;T, K extends keyof T&gt; = Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;export interface ICollapseProps extends Omit&lt;React.HTMLAttributes&lt;HTMLUListElement&gt;,\"title\"&gt; react.cloneElementçš„æ­£ç¡®ç”¨æ³• 123cloneElement(children as React.ReactElement&lt;any&gt;, &#123; ref, type: hasError ? 'error' : 'default', index signature ç´¢å¼•ç­¾åé€‚ç”¨äºæ— æ³•ç¡®å®šå±æ€§åç§°çš„åœºæ™¯123interface NetCache &#123; [propName: string]: string;&#125; useImmperativeHandle ç»“åˆ éœ€è¦å®šä¹‰é™æ€å±æ€§çš„ç»„ä»¶ ç»„ä»¶çš„å®šä¹‰åº”è¯¥å¦‚ä¸‹ 123456export interface IMessage extends React.ForwardRefExoticComponent&lt;IMessageProps &amp; React.RefAttributes&lt;HTMLDivElement | refType&gt;&gt; &#123;// ä½¿ç”¨ const ref = createRef&lt;refType &amp; HTMLDivElement&gt;() &lt;Message ref=&#123;ref&#125;/&gt; Using a forwardRef component with children in TypeScript 1234567891011121314import * as React from 'react'type ButtonProps = React.HTMLProps&lt;HTMLButtonElement&gt; or React.ComponentPropsWithoutRef&lt;'button'&gt;const FancyButton = React.forwardRef&lt;HTMLButtonElement, ButtonProps&gt;((props, ref) =&gt; ( &lt;button type=\"button\" ref=&#123;ref&#125; className=\"FancyButton\"&gt; &#123;props.children&#125; &lt;/button&gt;))// You can now get a ref directly to the DOM button:const ref = React.createRef&lt;HTMLButtonElement&gt;()&lt;FancyButton ref=&#123;ref&#125;&gt;Click me!&lt;/FancyButton&gt; ç»“è®ºå½“æŠ¥é”™çš„æ—¶å€™ä¸€å®šè¦ä»”ç»†çœ‹é”™è¯¯ ç„¶åå¤šè¯•ä¸€è¯•","categories":[{"name":"ts","slug":"ts","permalink":"https://ashleyblog.xyz/categories/ts/"}],"tags":[{"name":"ts","slug":"ts","permalink":"https://ashleyblog.xyz/tags/ts/"}]},{"title":"2019æ˜¥æ‹›å›é¡¾","slug":"é¢è¯•é¢˜å›é¡¾æ˜¥æ‹›","date":"2019-08-14T14:38:11.000Z","updated":"2023-04-02T14:00:30.299Z","comments":true,"path":"2019/08/14/é¢è¯•é¢˜å›é¡¾æ˜¥æ‹›/","link":"","permalink":"https://ashleyblog.xyz/2019/08/14/é¢è¯•é¢˜å›é¡¾æ˜¥æ‹›/","excerpt":"","text":"ä½¿ç”¨ Linux å‘½ä»¤æ¨¡æ‹Ÿå‘èµ·ä¸€ä¸ªè¯·æ±‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162ä¸€ã€getè¯·æ±‚ï¼š 1ã€ä½¿ç”¨curlå‘½ä»¤ï¼š// åœ¨ç»ˆç«¯æ•²ä¸‹è¯¥å‘½ä»¤ä¹‹åå›è½¦ä¼šå‡ºç°å“åº”å†…å®¹ curl â€œhttp://www.baidu.comâ€ å¦‚æœè¿™é‡Œçš„URLæŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ä¸€å¹…å›¾éƒ½å¯ä»¥ç›´æ¥ä¸‹è½½åˆ°æœ¬åœ° curl -i â€œhttp://www.baidu.comâ€ æ˜¾ç¤ºå…¨éƒ¨ä¿¡æ¯ curl -l â€œhttp://www.baidu.comâ€ åªæ˜¾ç¤ºå¤´éƒ¨ä¿¡æ¯ curl -v â€œhttp://www.baidu.comâ€ æ˜¾ç¤ºgetè¯·æ±‚å…¨è¿‡ç¨‹è§£æ 2ã€ä½¿ç”¨wgetå‘½ä»¤ï¼š wget â€œhttp://www.baidu.comâ€ä¹Ÿå¯ä»¥äºŒã€postè¯·æ±‚ 1ã€ä½¿ç”¨curlå‘½ä»¤ï¼ˆé€šè¿‡-då‚æ•°ï¼ŒæŠŠè®¿é—®å‚æ•°æ”¾åœ¨é‡Œé¢ï¼‰ï¼š curl -d â€œparam1=value1Â¶m2=value2â€ â€œhttp://www.baidu.comâ€ 2ã€ä½¿ç”¨wgetå‘½ä»¤ï¼šï¼ˆ--post-dataå‚æ•°æ¥å®ç°ï¼‰ wget --post-data â€˜user=foo&amp;password=barâ€™ http://www.baidu.com ä»¥ä¸Šå°±æ˜¯Linuxæ¨¡æ‹ŸHttpçš„getæˆ–postè¯·æ±‚çš„æ–¹æ³•äº†ï¼Œè¿™æ ·ä¸€æ¥Linuxç³»ç»Ÿä¹Ÿèƒ½å‘è¿œç¨‹æœåŠ¡å™¨å‘é€æ¶ˆæ¯äº†ã€‚## é˜²æŠ–èŠ‚æµ# Throttle and debounce## Throttle ï¼ˆå‡½æ•°èŠ‚æµï¼‰### Throttle å®šä¹‰å°±æ˜¯æŒ‡è¿ç»­è§¦å‘äº‹ä»¶ååœ¨ n ç§’å†…å‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡å¦‚æœå°†æ°´é¾™å¤´æ‹§ç´§ç›´åˆ°æ°´æ˜¯ä»¥æ°´æ»´çš„å½¢å¼æµå‡ºï¼Œé‚£ä½ ä¼šå‘ç°æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œå°±ä¼šæœ‰ä¸€æ»´æ°´æµå‡ºã€‚ä¹Ÿå°±æ˜¯ä¼šè¯´é¢„å…ˆè®¾å®šä¸€ä¸ªæ‰§è¡Œå‘¨æœŸï¼Œå½“è°ƒç”¨åŠ¨ä½œçš„æ—¶åˆ»å¤§äºç­‰äºæ‰§è¡Œå‘¨æœŸåˆ™æ‰§è¡Œè¯¥åŠ¨ä½œï¼Œç„¶åè¿›å…¥ä¸‹ä¸€ä¸ªæ–°å‘¨æœŸ```js/** * é¢‘ç‡æ§åˆ¶ è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œaction æ‰§è¡Œé¢‘ç‡é™å®šä¸º æ¬¡ / delay * @param delay &#123;number&#125; å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ¯«ç§’ * @param action &#123;function&#125; è¯·æ±‚å…³è”å‡½æ•°ï¼Œå®é™…åº”ç”¨éœ€è¦è°ƒç”¨çš„å‡½æ•° * @return &#123;function&#125; è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•° */var throttle = function(delay, action) &#123; var last = 0; return function() &#123; var curr = +new Date(); if (curr - last &gt; delay) &#123; action.apply(this, arguments); last = curr; &#125; &#125;;&#125;; ç‰ˆæœ¬äºŒï¼š 1234567891011121314151617181920function throttle(fun, delay) &#123; let last, deferTimer; return function(args) &#123; let that = this; let _args = arguments; let now = +new Date(); if (last &amp;&amp; now &lt; last + delay) &#123; clearTimeout(deferTimer); // ä¿è¯ä¸€å®šä¼šæ‰§è¡Œä¸€æ¬¡ è¿™å°±æ˜¯è·Ÿé˜²æŠ–ä¸ä¸€æ ·çš„åœ°æ–¹ deferTimer = setTimeout(function() &#123; last = now; fun.apply(that, _args); &#125;, delay); &#125; else &#123; // ç¬¬ä¸€æ¬¡æˆ–è€…å½“æ—¶é—´é—´éš”è¾¾åˆ°è¦æ±‚çš„æ—¶å€™ä¼šæ‰§è¡Œå‡½æ•° last = now; fun.apply(that, _args); &#125; &#125;;&#125; æ¯”å¦‚æœç´¢æ¡† å½“ç”¨æˆ·è¾“å…¥é¢‘ç¹çš„æ—¶å€™ Debounce (å‡½æ•°å»æŠ–)Debounce å®šä¹‰å°±æ˜¯æŒ‡è§¦å‘äº‹ä»¶ååœ¨ n ç§’å†…å‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼ˆæœ€åä¸€æ¬¡ï¼‰ï¼Œå¦‚æœåœ¨ n ç§’å†…åˆè§¦å‘äº†äº‹ä»¶ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´ã€‚ å¦‚æœç”¨æ‰‹æŒ‡ä¸€ç›´æŒ‰ä½ä¸€ä¸ªå¼¹ç°§ï¼Œå®ƒå°†ä¸ä¼šå¼¹èµ·ç›´åˆ°ä½ æ¾æ‰‹ä¸ºæ­¢ã€‚ ä¹Ÿå°±æ˜¯è¯´å½“è°ƒç”¨åŠ¨ä½œ n æ¯«ç§’åï¼Œæ‰ä¼šæ‰§è¡Œè¯¥åŠ¨ä½œï¼Œè‹¥åœ¨è¿™ n æ¯«ç§’å†…åˆè°ƒç”¨æ­¤åŠ¨ä½œåˆ™å°†é‡æ–°è®¡ç®—æ‰§è¡Œæ—¶é—´ 123456789101112131415161718/** * ç©ºé—²æ§åˆ¶ è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œç©ºé—²æ—¶é—´å¿…é¡»å¤§äºæˆ–ç­‰äº idleï¼Œaction æ‰ä¼šæ‰§è¡Œ * @param idle &#123;number&#125; ç©ºé—²æ—¶é—´ï¼Œå•ä½æ¯«ç§’ * @param action &#123;function&#125; è¯·æ±‚å…³è”å‡½æ•°ï¼Œå®é™…åº”ç”¨éœ€è¦è°ƒç”¨çš„å‡½æ•° * @return &#123;function&#125; è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•° */var debounce = function(idle, action) &#123; var last; return function() &#123; var ctx = this, args = arguments; clearTimeout(last); last = setTimeout(function() &#123; action.apply(ctx, args); &#125;, idle); &#125;;&#125;; åŒºåˆ« debouncesearch æœç´¢è”æƒ³ï¼Œç”¨æˆ·åœ¨ä¸æ–­è¾“å…¥å€¼æ—¶ï¼Œç”¨é˜²æŠ–æ¥èŠ‚çº¦è¯·æ±‚èµ„æºã€‚window è§¦å‘ resize çš„æ—¶å€™ï¼Œä¸æ–­çš„è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°ä¼šä¸æ–­çš„è§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œç”¨é˜²æŠ–æ¥è®©å…¶åªè§¦å‘ä¸€æ¬¡ throttleé¼ æ ‡ä¸æ–­ç‚¹å‡»è§¦å‘ï¼Œmousedown(å•ä½æ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡)ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ¯”å¦‚æ˜¯å¦æ»‘åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤šï¼Œç”¨ throttle æ¥åˆ¤æ–­ vue çš„è·¯ç”±å¦‚ä½•å®ç°ï¼Œæœ€åæåˆ°äº†æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œè§£é‡Šå…¶è¿‡ç¨‹ å‰ç«¯è·¯ç”±å®ç°çš„å°±æ˜¯åŒ¹é…ä¸åŒçš„ url è·¯å¾„ï¼Œè¿›è¡Œè§£æï¼Œç„¶ååŠ¨æ€çš„æ¸²æŸ“å‡ºåŒºåŸŸ html å†…å®¹ hash æ¨¡å¼ã€‚hash å€¼å˜åŒ–ï¼Œæµè§ˆå™¨ä¸å‘å‡ºè¯·æ±‚ï¼Œä½†æ˜¯ä¼šè§¦å‘ hashchange è¿™ä¸ªäº‹ä»¶ï¼Œ é€šè¿‡è¿™ä¸ªäº‹ä»¶æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ hash å€¼å‘ç”Ÿäº†å“ªäº›å˜åŒ–ï¼Œæ¥æ›´æ–°é¡µé¢å†…å®¹ 1234function matchAndUpdate() &#123; // todo åŒ¹é… hash åš dom æ›´æ–°æ“ä½œ&#125;window.addEventListener(\"hashchange\", matchAndUpdate); history æ¨¡å¼. pushState å’Œ replaceState åˆ†åˆ«å¯ä»¥æ·»åŠ å’Œä¿®æ”¹å†å²è®°å½•æ¡ç›®,é€šè¿‡è¿™ä¸¤ä¸ª API å¯ä»¥æ”¹å˜ url åœ°å€ä¸”ä¸ä¼šå‘é€è¯·æ±‚,å½“ç”¨æˆ·åˆ·æ–°é¡µé¢ä¹‹ç±»çš„æ“ä½œæ—¶ï¼Œæµè§ˆå™¨è¿˜æ˜¯ä¼šç»™æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚ä¸ºäº†é¿å…å‡ºç°è¿™ç§æƒ…å†µï¼Œæ‰€ä»¥è¿™ä¸ªå®ç°éœ€è¦æœåŠ¡å™¨çš„æ”¯æŒï¼Œéœ€è¦æŠŠæ‰€æœ‰è·¯ç”±éƒ½é‡å®šå‘åˆ°æ ¹é¡µé¢ã€‚å½“å¤„äºæ¿€æ´»çŠ¶æ€çš„å†å²è®°å½•æ¡ç›®å‘ç”Ÿå˜åŒ–æ—¶,popstate äº‹ä»¶å°±ä¼šåœ¨å¯¹åº” window å¯¹è±¡ä¸Šè§¦å‘ animation transitionçš„åŒºåˆ« transition åŠ¨ç”»å¯ä»¥é€šè¿‡äº‹ä»¶ç›‘å¬å¯åŠ¨å’Œå®Œæˆtransitionstartã€transitionrunã€transitionend,transition åŠ¨ç”»æœ‰å‡ ä¸ªå±€é™ï¼š éœ€è¦é€šè¿‡ç”¨æˆ·çš„è¡Œä¸ºï¼ˆå¦‚ç‚¹å‡»ï¼Œæ‚¬æµ®ç­‰ï¼‰è§¦å‘ï¼Œæ‰€ä»¥æ²¡æ³•åœ¨ç½‘é¡µåŠ è½½æ—¶è‡ªåŠ¨å‘ç”Ÿ æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¸èƒ½é‡å¤å‘ç”Ÿ åªèƒ½å®šä¹‰å¼€å§‹çŠ¶æ€å’Œç»“æŸçŠ¶æ€ï¼Œä¸èƒ½å®šä¹‰ä¸­é—´çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä¸¤ä¸ªçŠ¶æ€ã€‚ keyframes: å…³é”®å¸§ keyframe è‡ªå®šä¹‰åŠ¨ç”»,èƒ½å¤Ÿè‡ªå®šä¹‰ä»»æ„é˜¶æ®µçš„åŠ¨ç”»åŠ¨ä½œã€‚ animation åœ¨ä¸éœ€è¦è§¦å‘äº‹ä»¶çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥éšæ—¶é—´å˜åŒ–æ¥æ”¹å˜å…ƒç´  CSS å±æ€§ã€‚ å¯ä»¥æŒ‡å®šåŠ¨ç”»å…·ä½“æ’­æ”¾çš„æ¬¡æ•° å¯ä»¥æŒ‡å®šå„ä¸ªé˜¶æ®µçš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯åªæœ‰å¼€å§‹å’Œç»“å°¾ã€‚ ä»‹ç» requestAnimateFrameï¼Œä¸ setInterval æˆ– setTimeout çš„åŒºåˆ« setTimeout: seTimeout å®ç°çš„åŠ¨ç”»å®¹æ˜“å‡ºç°å¡é¡¿ã€æŠ–åŠ¨çš„ç°è±¡ï¼Œæœ‰ä¸¤ä¸ªåŸå› å¯èƒ½ä¼šå¯¼è‡´ä¸¢å¸§ï¼š setTimeout çš„æ‰§è¡Œæ—¶é—´å¹¶ä¸æ˜¯ç¡®å®šçš„, setTimeout ä»»åŠ¡è¢«æ”¾è¿›äº†å¼‚æ­¥é˜Ÿåˆ—ä¸­ï¼Œåªæœ‰å½“ä¸»çº¿ç¨‹ä¸Šçš„ä»»åŠ¡æ‰§è¡Œå®Œä»¥åï¼Œæ‰ä¼šå»æ£€æŸ¥è¯¥é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡æ˜¯å¦éœ€è¦å¼€å§‹æ‰§è¡Œï¼Œæ‰€ä»¥ setTimeout çš„å®é™…æ‰§è¡Œæ—¶æœºä¸€èˆ¬è¦æ¯”å…¶è®¾å®šçš„æ—¶é—´æ™šä¸€äº›ã€‚ åˆ·æ–°é¢‘ç‡å— å±å¹•åˆ†è¾¨ç‡ å’Œ å±å¹•å°ºå¯¸ çš„å½±å“ï¼Œä¸åŒè®¾å¤‡çš„å±å¹•ç»˜åˆ¶é¢‘ç‡å¯èƒ½ä¼šä¸åŒï¼Œè€Œ setTimeout åªèƒ½è®¾ç½®ä¸€ä¸ªå›ºå®šçš„æ—¶é—´é—´éš”ï¼Œè¿™ä¸ªæ—¶é—´ä¸ä¸€å®šå’Œå±å¹•çš„åˆ·æ–°æ—¶é—´ç›¸åŒã€‚ requestAnimateFrameï¼šè¯·æ±‚æµè§ˆå™¨åœ¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰è°ƒç”¨æŒ‡å®šçš„å‡½æ•°æ¥æ›´æ–°åŠ¨ç”»,å›è°ƒçš„æ¬¡æ•°é€šå¸¸æ˜¯æ¯ç§’ 60 æ¬¡,è¿”å›ä¸€ä¸ª long æ•´æ•°ï¼Œè¯·æ±‚ IDï¼Œå¯ä»¥ä¼ è¿™ä¸ªå€¼ç»™ window.cancelAnimationFrame() ä»¥å–æ¶ˆå›è°ƒå‡½æ•°. æœ€å¤§çš„ä¼˜åŠ¿æ˜¯rAF çš„æ‰§è¡Œæ­¥ä¼è·Ÿç€æµè§ˆå™¨çš„ç»˜åˆ¶é¢‘ç‡èµ°ï¼Œè¿™æ ·å°±ä¸ä¼šå¼•èµ·ä¸¢å¸§ç°è±¡ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´åŠ¨ç”»å‡ºç°å¡é¡¿çš„é—®é¢˜ã€‚ js ä¸ºä»€ä¹ˆè¦å•çº¿ç¨‹çš„ åœ¨å¤šçº¿ç¨‹æ“ä½œçš„æƒ…å†µä¸‹å¯ä»¥å®ç°åº”ç”¨çš„å¹¶è¡Œå¤„ç†ï¼Œè€Œæé«˜æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œååé‡ï¼Œæ›´å¤§ç²’åº¦çš„æ¦¨å–æœ¬æœºçš„ CPU åˆ©ç”¨ç‡ï¼Œç‰¹åˆ«æ˜¯ç°ä»£å¾ˆå¤šè¯­è¨€éƒ½æ”¯æŒäº†å¤šæ ¸å¹¶è¡Œå¤„ç†æŠ€æœ¯ã€‚JavaScript æ˜¯å•çº¿ç¨‹æ‰§è¡Œï¼Œå› ä¸ºå¦‚æœ JavaScript æ˜¯å¤šçº¿ç¨‹çš„æ–¹å¼æ¥æ“ä½œ UIï¼Œåˆ™å¯èƒ½å‡ºç° UI æ“ä½œçš„å†²çª, å¦‚æœå¼•å…¥ä¸€äº›é”çš„æœºåˆ¶æ¥è§£å†³è¿™äº›å†²çªï¼Œåˆ™å®¹æ˜“å¼•å…¥æ›´å¤§çš„å¤æ‚æ€§ï¼Œæ‰€ä»¥ JavaScript ä»å¼€å§‹å°±é€‰æ‹©äº†å•çº¿ç¨‹æ‰§è¡Œã€‚ ## åŒæ­¥ä¸éåŒæ­¥ é˜»å¡éé˜»å¡ å¹¶å‘å¹¶è¡Œçš„åŒºåˆ«ç”¨æ™®é€šçš„æ°´å£¶çƒ§ï¼Œäººåœ¨è¾¹ä¸Šçœ‹ç€ï¼Œæ°´å¼€äº†å†å»çœ‹çƒã€‚ï¼ˆåŒæ­¥ï¼Œé˜»å¡ï¼‰è¿™ä¸ªæ˜¯å¸¸è§„åšæ³•ï¼Œä½†æ˜¯æˆ‘çœ‹çƒä¸çˆ½äº†ã€‚ç”¨æ™®é€šæ°´å£¶çƒ§ï¼Œäººå»çœ‹çƒï¼Œéš”å‡ åˆ†é’Ÿå»å¨æˆ¿çœ‹çœ‹ã€‚ï¼ˆåŒæ­¥ï¼Œéé˜»å¡ï¼‰è¿™ä¸ªåˆå¤§é—®é¢˜ï¼Œä¸‡ä¸€åœ¨æˆ‘ç¦»å¼€çš„å‡ åˆ†é’Ÿæ°´å¼€äº†ï¼Œæˆ‘å°±éº»çƒ¦äº†ã€‚ç”¨ä¼šå«çš„æ°´å£¶ï¼Œäººåœ¨è¾¹ä¸Šçœ‹ç€ã€‚ï¼ˆå¼‚æ­¥ï¼Œé˜»å¡ï¼‰è¿™ä¸ªæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æˆ‘å¤ªå‚»äº†ã€‚ç”¨ä¼šå«çš„æ°´å£¶ï¼Œäººå»çœ‹çƒï¼Œå¬è§æ°´å£¶å«äº†å†å»çœ‹ã€‚ï¼ˆå¼‚æ­¥ï¼Œéé˜»å¡ï¼‰è¿™ä¸ªåº”è¯¥æ˜¯æœ€å¥½çš„ã€‚ç­‰ç€çœ‹çƒçš„æˆ‘ï¼šé˜»å¡ çœ‹ç€ç”µè§†çš„æˆ‘ï¼šéé˜»å¡ æ™®é€šæ°´å£¶ï¼šåŒæ­¥ ä¼šå«çš„æ°´å£¶ï¼šå¼‚æ­¥ (å†…æ ¸ä¼šé€šçŸ¥) åŒæ­¥è¿‡ç¨‹ä¸­è¿›ç¨‹è§¦å‘ IO æ“ä½œå¹¶ç­‰å¾…æˆ–è€…è½®è¯¢çš„å»æŸ¥çœ‹ IO æ“ä½œæ˜¯å¦å®Œæˆã€‚å¼‚æ­¥è¿‡ç¨‹ä¸­è¿›ç¨‹è§¦å‘ IO æ“ä½œä»¥åï¼Œç›´æ¥è¿”å›ï¼Œåšè‡ªå·±çš„äº‹æƒ…ï¼ŒIO äº¤ç»™å†…æ ¸æ¥å¤„ç†ï¼Œå®Œæˆåå†…æ ¸é€šçŸ¥è¿›ç¨‹ IO å®Œæˆã€‚ é˜»å¡ é˜»å¡çš„æ¦‚å¿µå¾€å¾€ä¼´éšç€çº¿ç¨‹ã€‚é˜»å¡ä¸€èˆ¬æ˜¯æŒ‡ï¼šåœ¨è°ƒç”¨ç»“æœè¿”å›ä¹‹å‰ï¼Œå½“å‰çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ã€‚è°ƒç”¨çº¿ç¨‹åªæœ‰åœ¨å¾—åˆ°ç»“æœä¹‹åæ‰ä¼šè¢«å”¤é†’æ‰§è¡Œåç»­çš„æ“ä½œã€‚ éé˜»å¡ é‚£ä¹ˆéé˜»å¡ï¼Œæ¯«æ— ç–‘é—®æ˜¯é˜»å¡çš„åå‘æ“ä½œã€‚éé˜»å¡å¼çš„è°ƒç”¨æŒ‡ï¼šåœ¨ç»“æœæ²¡æœ‰è¿”å›ä¹‹å‰ï¼Œè¯¥è°ƒç”¨ä¸ä¼šé˜»å¡ä½å½“å‰çº¿ç¨‹ã€‚ å¹¶å‘ï¼šå½“æœ‰å¤šä¸ªçº¿ç¨‹åœ¨æ“ä½œæ—¶ï¼Œå¦‚æœç³»ç»Ÿåªæœ‰ä¸€ä¸ª CPUï¼Œæ“ä½œç³»ç»Ÿåªèƒ½æŠŠ CPU è¿è¡Œæ—¶é—´åˆ’åˆ†æˆè‹¥å¹²ä¸ªæ—¶é—´æ®µ,å†å°†æ—¶é—´æ®µåˆ†é…ç»™å„ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œåœ¨ä¸€ä¸ªæ—¶é—´æ®µçš„å¿«é€Ÿçš„åˆ‡æ¢ä¸åŒçš„çº¿ç¨‹ä»£ç è¿è¡Œã€‚ å¹¶è¡Œï¼šå½“ç³»ç»Ÿæœ‰å¤šä¸ª CPU æ—¶ï¼Œå¯ä»¥å­˜åœ¨å½“ä¸€ä¸ª CPU æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå¦ä¸€ä¸ª CPU å¯ä»¥æ‰§è¡Œå¦ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸¤ä¸ªçº¿ç¨‹äº’ä¸æŠ¢å  CPU èµ„æºï¼Œå¯ä»¥åŒæ—¶è¿›è¡Œã€‚ nodejs ä¸­çš„é˜»å¡éé˜»å¡é˜»å¡ï¼Œè¯»å–æ–‡ä»¶åŒæ­¥ I/O æ“ä½œï¼Œç­‰å¾…æ–‡ä»¶è¯»å–å®Œå†è¿›è¡Œå…¶ä»–æ“ä½œã€‚ éé˜»å¡ï¼Œè¯»å–æ–‡ä»¶æ˜¯å¼‚æ­¥å›è°ƒï¼Œåœ¨ç­‰å¾…æ–‡ä»¶è¯»å–æ—¶å¯ä»¥è¿›è¡Œå…¶ä»–æ“ä½œï¼Œè¿™å°±å¤§å¤§æé«˜äº† Node.js çš„æ€§èƒ½ï¼Œå¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘è¯·æ±‚ã€‚ react çš„ filber ï¼ˆ16.3ä¹‹åå¼€å¯å¼‚æ­¥æ¸²æŸ“) åœ¨ fiber ä¸­ï¼Œæ›´æ–°æ˜¯åˆ†é˜¶æ®µçš„ï¼Œå…·ä½“åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œé¦–å…ˆæ˜¯ reconciliation çš„é˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µåœ¨è®¡ç®—å‰å dom æ ‘çš„å·®å¼‚ï¼Œç„¶åæ˜¯ commit çš„é˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µå°†æŠŠæ›´æ–°æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯å¯ä»¥æ‰“æ–­çš„ï¼Œå› ä¸ºè¿™ä¸ªé˜¶æ®µè€—æ—¶å¯èƒ½ä¼šå¾ˆé•¿ï¼Œå› æ­¤éœ€è¦æš‚åœä¸‹æ¥å»æ‰§è¡Œå…¶ä»–æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œç¬¬äºŒä¸ªé˜¶æ®µåˆ™ä¸ä¼šè¢«æ‰“æ–­ï¼Œä¼šä¸€å£æ°”æŠŠæ›´æ–°æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚ ç”±äº reconciliation çš„é˜¶æ®µä¼šè¢«æ‰“æ–­ï¼Œå¯èƒ½ä¼šå¯¼è‡´ commit å‰çš„è¿™äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¤šæ¬¡æ‰§è¡Œã€‚react å®˜æ–¹ç›®å‰å·²ç»æŠŠ componentWillMountã€componentWillReceiveProps å’Œ componetWillUpdate æ ‡è®°ä¸º unsafeï¼Œå¹¶ä½¿ç”¨æ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° getDerivedStateFromProps å’Œ getSnapshotBeforeUpdate è¿›è¡Œæ›¿æ¢ã€‚ ç»„ä»¶çš„æ¸²æŸ“è¢«åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šç¬¬ä¸€ä¸ªé˜¶æ®µï¼ˆä¹Ÿå«åš render é˜¶æ®µï¼‰æ˜¯å¯ä»¥è¢« React æ‰“æ–­çš„ï¼Œä¸€æ—¦è¢«æ‰“æ–­ï¼Œè¿™é˜¶æ®µæ‰€åšçš„æ‰€æœ‰äº‹æƒ…éƒ½è¢«åºŸå¼ƒï¼Œå½“ React å¤„ç†å®Œç´§æ€¥çš„äº‹æƒ…å›æ¥ï¼Œä¾ç„¶ä¼šé‡æ–°æ¸²æŸ“è¿™ä¸ªç»„ä»¶ï¼Œè¿™æ—¶å€™ç¬¬ä¸€é˜¶æ®µçš„å·¥ä½œä¼šé‡åšä¸€éï¼›ç¬¬äºŒä¸ªé˜¶æ®µå«åš commit é˜¶æ®µï¼Œä¸€æ—¦å¼€å§‹å°±ä¸èƒ½ä¸­æ–­ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬äºŒä¸ªé˜¶æ®µçš„å·¥ä½œä¼šç¨³ç¨³å½“å½“åœ°åšåˆ°è¿™ä¸ªç»„ä»¶çš„æ¸²æŸ“ç»“æŸã€‚ ä¸¤ä¸ªé˜¶æ®µçš„åˆ†ç•Œç‚¹ï¼Œå°±æ˜¯ render å‡½æ•°ã€‚render å‡½æ•°ä¹‹å‰çš„æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆåŒ…æ‹¬ render)éƒ½å±äºç¬¬ä¸€é˜¶æ®µï¼Œä¹‹åçš„éƒ½å±äºç¬¬äºŒé˜¶æ®µã€‚render ä¹‹å‰çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯ç¬¬ä¸€é˜¶æ®µç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼‰åŒ…æ‹¬è¿™äº›ï¼š componentWillReceiveProps shouldComponentUpdate componentWillUpdate componentWillMount render getDerivedStateFromProps åº”è¯¥æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼ŒReact å°±æ˜¯é€šè¿‡è¦æ±‚è¿™ç§çº¯å‡½æ•°ï¼Œå¼ºåˆ¶å¼€å‘è€…ä»¬å¿…é¡»é€‚åº”å¼‚æ­¥æ¸²æŸ“ã€‚ reconciliation é˜¶æ®µè™šæ‹Ÿ dom çš„æ•°æ®å¯¹æ¯” commit é˜¶æ®µå°† change list æ›´æ–°åˆ° dom ä¸Š ä¸é€‚åˆæ‹†åˆ†æ˜¯å› ä¸ºä½¿ç”¨ vdom çš„æ„ä¹‰å°±æ˜¯ä¸ºäº†èŠ‚çœè€—æ—¶çš„ dom æ“ä½œ linuxå¸¸è§å‘½ä»¤ åˆ›å»ºç¬¦å·é“¾æ¥ï¼ˆç±»ä¼¼windowsçš„å¿«æ·æ–¹å¼) ln -s source_file symbolic_link æ‰“å¼€æ–‡ä»¶è·³åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„è¡Œ $ vim +/search-term filename.txt grepç›¸å…³ 1.åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸åŒºåˆ†å¤§å°å†™ $ grep -i â€œtheâ€ demo_file2.åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­é€’å½’æŸ¥è¯¢åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„æ–‡ä»¶$ grep -r â€œrameshâ€ * æŸ¥æ‰¾æŒ‡å®šæ–‡ä»¶åçš„æ–‡ä»¶(ä¸åŒºåˆ†å¤§å°å†™) find -iname â€˜..â€™ ç™»å½•åˆ°è¿œç¨‹ä¸»æœº $ ssh -l jsmith remotehost.example.com ps 1.æŸ¥çœ‹å½“å‰æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹ $ ps -ef | more2.ä»¥æ ‘çŠ¶ç»“æ„æ˜¾ç¤ºå½“å‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼ŒHé€‰é¡¹è¡¨ç¤ºæ˜¾ç¤ºè¿›ç¨‹çš„å±‚æ¬¡ç»“æ„$ ps -efH | more æ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­å ç”¨èµ„æºæœ€å¤šçš„ä¸€äº›è¿›ç¨‹top æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£åŠå…¶çŠ¶æ€ $ ifconfig -a ä½¿ç”¨upå’Œdownå‘½ä»¤å¯åŠ¨æˆ–åœæ­¢æŸä¸ªæ¥å£ $ ifconfig eth0 up $ ifconfig eth0 down æŸ¥æ‰¾æŸä¸ªå‘½ä»¤çš„ä½ç½® $ whereis cmd ä¸åŠ è½½æ•´ä¸ªæ–‡ä»¶çš„å‰æä¸‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ (æŸ¥çœ‹å¤§å‹æ—¥å¿—æ–‡ä»¶çš„æ—¶å€™) $ less è®¾ç½®ç¯å¢ƒå˜é‡ $ export â€¦ catè¿½åŠ aå†…å®¹åˆ°æ–‡ä»¶bçš„æœ«å°¾ $ cat a &gt; b catè¦†ç›–åŸæœ‰æ–‡ä»¶çš„å†…å®¹ $ cat a &gt;&gt; b curlå‘½ä»¤ç›¸å…³ 1.æ¨¡ä»¿æµè§ˆå™¨ $ curl -A â€œMozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.0)â€ http://www.linux.com2.ä¼ªé€ refererï¼ˆç›—é“¾ï¼‰$ curl -e â€œwww.linux.com&quot; http://mail.linux.com3.åˆ©ç”¨curlä¸‹è½½æ–‡ä»¶ä½¿ç”¨å†…ç½®optionï¼š-o(å°å†™)$ curl -o dodo1.jpg http:www.linux.com/dodo1.JPG4.ä½¿ç”¨curlå‘é€POSTè¯·æ±‚$ curl -d â€œuser=admin&amp;passwd=12345678â€ http://127.0.0.1:8080/login å‰ç«¯æ¨¡å—åŒ–CommonJsç”¨åœ¨æœåŠ¡å™¨ç«¯ï¼ŒAMDå’ŒCMDç”¨åœ¨æµè§ˆå™¨ç¯å¢ƒAMD:æå‰æ‰§è¡Œï¼ˆå¼‚æ­¥åŠ è½½ï¼šä¾èµ–å…ˆæ‰§è¡Œï¼‰+å»¶è¿Ÿæ‰§è¡ŒCMD:å»¶è¿Ÿæ‰§è¡Œï¼ˆè¿è¡Œåˆ°éœ€åŠ è½½ï¼Œæ ¹æ®é¡ºåºæ‰§è¡Œï¼‰ ç§»åŠ¨ç«¯ç›¸å…³ç§»åŠ¨ç«¯ç‚¹å‡» 300ms å»¶è¿Ÿæ˜¯ä»€ä¹ˆï¼Ÿæ€æ ·æ¶ˆé™¤ï¼Ÿä¸ºäº†åŒå‡»ç¼©æ”¾ï¼Œé¡µé¢ç‚¹å‡»ä¼šæœ‰ 300ms å»¶è¿Ÿè§£å†³æ–¹æ³•ï¼Œç¦ç”¨ç¼©æ”¾ï¼Œæ›´æ”¹é»˜è®¤çš„è§†å£å®½åº¦&lt;meta name=â€viewportâ€ content=â€user-scalable=no, initial-scale=1,maximum-scale=1, width=device-widthâ€&gt;","categories":[],"tags":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"https://ashleyblog.xyz/tags/é¢ç»/"}]},{"title":"å‰ç«¯æ–‡ä»¶ä¸Šä¼ ","slug":"å‰ç«¯æ–‡ä»¶ä¸Šä¼ ","date":"2019-06-14T13:28:11.000Z","updated":"2023-04-02T14:00:30.293Z","comments":true,"path":"2019/06/14/å‰ç«¯æ–‡ä»¶ä¸Šä¼ /","link":"","permalink":"https://ashleyblog.xyz/2019/06/14/å‰ç«¯æ–‡ä»¶ä¸Šä¼ /","excerpt":"","text":"ä¸Šä¼ æ–‡ä»¶çš„å‡ ç§æ–¹å¼ æ™®é€šè¡¨å•ä¸Šä¼ ä½¿ç”¨ PHP æ¥å±•ç¤ºå¸¸è§„çš„è¡¨å•ä¸Šä¼ æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚é¦–å…ˆæ„å»ºæ–‡ä»¶ä¸Šä¼ çš„è¡¨å•ï¼Œå¹¶æŒ‡å®šè¡¨å•çš„æäº¤å†…å®¹ç±»å‹ä¸º enctype=â€multipart/form-dataâ€ï¼Œè¡¨æ˜è¡¨å•éœ€è¦ä¸Šä¼ äºŒè¿›åˆ¶æ•°æ®ã€‚ 1234&lt;form action=\"/index.php\" method=\"POST\" enctype=\"multipart/form-data\"&gt; &lt;input type=\"file\" name=\"myfile\"&gt; &lt;input type=\"submit\"&gt;&lt;/form&gt; æ–‡ä»¶ç¼–ç ä¸Šä¼ ç¬¬ä¸€ä¸ªæ€è·¯æ˜¯å°†æ–‡ä»¶è¿›è¡Œç¼–ç ï¼Œç„¶ååœ¨æœåŠ¡ç«¯è¿›è¡Œè§£ç ï¼Œä¹‹å‰å†™è¿‡ä¸€ç¯‡åœ¨å‰ç«¯å®ç°å›¾ç‰‡å‹ç¼©ä¸Šä¼ çš„åšå®¢ï¼Œå…¶ä¸»è¦å®ç°åŸç†å°±æ˜¯å°†å›¾ç‰‡è½¬æ¢æˆ base64 è¿›è¡Œä¼ é€’var imgURL = URL.createObjectURL(file);ctx.drawImage(imgURL, 0, 0);// è·å–å›¾ç‰‡çš„ç¼–ç ï¼Œç„¶åå°†å›¾ç‰‡å½“åšæ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²è¿›è¡Œä¼ é€’var data = canvas.toDataURL(â€œimage/jpegâ€, 0.5); é™¤äº†è¿›è¡Œ base64 ç¼–ç ï¼Œè¿˜å¯ä»¥åœ¨å‰ç«¯ç›´æ¥è¯»å–æ–‡ä»¶å†…å®¹åä»¥äºŒè¿›åˆ¶æ ¼å¼ä¸Šä¼  12345678910111213141516// è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶function readBinary(text) &#123; var data = new ArrayBuffer(text.length) var ui8a = new Uint8Array(data, 0) for (var i = 0; i &lt; text.length; i++) &#123; ui8a[i] = text.charCodeAt(i) &amp; 0xff &#125; console.log(ui8a)&#125;var reader = new FileReader()reader.onload = function() &#123; readBinary(this.result) // è¯»å–resultæˆ–ç›´æ¥ä¸Šä¼ &#125;// æŠŠä»inputé‡Œè¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œæ”¾åˆ°fileReaderçš„resultå­—æ®µé‡Œreader.readAsBinaryString(file) æ–‡ä»¶ä¸Šä¼ 123456789101112131415161718192021222324252627282930313233343536373839404142434445function uploadAndSubmit() &#123;var form = document.forms[\"demoForm\"];if (form[\"file\"].files.length &gt; 0) &#123;// å¯»æ‰¾è¡¨å•åŸŸä¸­çš„ &lt;input type=\"file\" ... /&gt; æ ‡ç­¾var file = form[\"file\"].files[0];// try sendingvar reader = new FileReader();reader.onloadstart = function() &#123;// è¿™ä¸ªäº‹ä»¶åœ¨è¯»å–å¼€å§‹æ—¶è§¦å‘console.log(\"onloadstart\");document.getElementById(\"bytesTotal\").textContent = file.size;&#125;reader.onprogress = function(p) &#123;// è¿™ä¸ªäº‹ä»¶åœ¨è¯»å–è¿›è¡Œä¸­å®šæ—¶è§¦å‘console.log(\"onprogress\");document.getElementById(\"bytesRead\").textContent = p.loaded;&#125;reader.onload = function() &#123; // è¿™ä¸ªäº‹ä»¶åœ¨è¯»å–æˆåŠŸç»“æŸåè§¦å‘console.log(\"load complete\");&#125;reader.onloadend = function() &#123; // è¿™ä¸ªäº‹ä»¶åœ¨è¯»å–ç»“æŸåï¼Œæ— è®ºæˆåŠŸæˆ–è€…å¤±è´¥éƒ½ä¼šè§¦å‘if (reader.error) &#123;console.log(reader.error);&#125; else &#123;document.getElementById(\"bytesRead\").textContent = file.size;// æ„é€  XMLHttpRequest å¯¹è±¡ï¼Œå‘é€æ–‡ä»¶ Binary æ•°æ®var xhr = new XMLHttpRequest();xhr.open(/* method */ \"POST\",/* target url */ \"upload.jsp?fileName=\" + file.name/*, async, default to true */);// äºŒè¿›åˆ¶æµ// æŒ‡å®šä¸€ä¸ªMIMEç±»å‹ç”¨äºæ›¿ä»£æœåŠ¡å™¨æŒ‡å®šçš„ç±»å‹ï¼Œä½¿æœåŠ¡ç«¯å“åº”ä¿¡æ¯ä¸­ä¼ è¾“çš„æ•°æ®æŒ‰ç…§è¯¥æŒ‡å®šMIMEç±»å‹å¤„ç†xhr.overrideMimeType(\"application/octet-stream\");xhr.sendAsBinary(reader.result);xhr.onreadystatechange = function() &#123;if (xhr.readyState == 4) &#123;if (xhr.status == 200) &#123;console.log(\"upload complete\");console.log(\"response: \" + xhr.responseText); formData å¼‚æ­¥ä¸Šä¼ FormData å¯¹è±¡ä¸»è¦ç”¨æ¥ç»„è£…ä¸€ç»„ç”¨ XMLHttpRequest å‘é€è¯·æ±‚çš„é”®/å€¼å¯¹ï¼Œå¯ä»¥æ›´åŠ çµæ´»åœ°å‘é€ Ajax è¯·æ±‚ã€‚å¯ä»¥ä½¿ç”¨ FormData æ¥æ¨¡æ‹Ÿè¡¨å•æäº¤ã€‚ 1234let files = e.target.files // è·å– input çš„ file å¯¹è±¡let formData = new FormData()formData.append('file', file)axios.post(url, formData) å¤§æ–‡ä»¶ä¸Šä¼ å¤§æ–‡ä»¶ä¸Šä¼ æœ€ä¸»è¦çš„é—®é¢˜å°±åœ¨äºï¼šåœ¨åŒä¸€ä¸ªè¯·æ±‚ä¸­ï¼Œè¦ä¸Šä¼ å¤§é‡çš„æ•°æ®ï¼Œå¯¼è‡´æ•´ä¸ªè¿‡ç¨‹ä¼šæ¯”è¾ƒæ¼«é•¿ï¼Œä¸”å¤±è´¥åéœ€è¦é‡å¤´å¼€å§‹ä¸Šä¼ ã€‚è¯•æƒ³ï¼Œå¦‚æœæˆ‘ä»¬å°†è¿™ä¸ªè¯·æ±‚æ‹†åˆ†æˆå¤šä¸ªè¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚çš„æ—¶é—´å°±ä¼šç¼©çŸ­ï¼Œä¸”å¦‚æœæŸä¸ªè¯·æ±‚å¤±è´¥ï¼Œåªéœ€è¦é‡æ–°å‘é€è¿™ä¸€æ¬¡è¯·æ±‚å³å¯ï¼Œæ— éœ€ä»å¤´å¼€å§‹ï¼Œè¿™æ ·æ˜¯å¦å¯ä»¥è§£å†³å¤§æ–‡ä»¶ä¸Šä¼ çš„é—®é¢˜å‘¢ï¼Ÿ æ–‡ä»¶åˆ‡ç‰‡å‚è€ƒï¼š å¤§æ–‡ä»¶åˆ‡å‰²ä¸Šä¼ ç¼–ç æ–¹å¼ä¸Šä¼ ä¸­ï¼Œåœ¨å‰ç«¯æˆ‘ä»¬åªè¦å…ˆè·å–æ–‡ä»¶çš„äºŒè¿›åˆ¶å†…å®¹ï¼Œç„¶åå¯¹å…¶å†…å®¹è¿›è¡Œæ‹†åˆ†ï¼Œæœ€åå°†æ¯ä¸ªåˆ‡ç‰‡ä¸Šä¼ åˆ°æœåŠ¡ç«¯å³å¯ã€‚åœ¨ JavaScript ä¸­ï¼Œæ–‡ä»¶ FIle å¯¹è±¡æ˜¯ Blob å¯¹è±¡çš„å­ç±»ï¼ŒBlob å¯¹è±¡åŒ…å«ä¸€ä¸ªé‡è¦çš„æ–¹æ³• sliceï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œæ‹†åˆ†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ‹†åˆ†æ–‡ä»¶çš„ç¤ºä¾‹ 123456789101112131415161718192021222324252627function slice(file, piece = 1024 * 1024 * 5) &#123; let totalSize = file.size; // æ–‡ä»¶æ€»å¤§å° let start = 0; // æ¯æ¬¡ä¸Šä¼ çš„å¼€å§‹å­—èŠ‚ let end = start + piece; // æ¯æ¬¡ä¸Šä¼ çš„ç»“å°¾å­—èŠ‚ let chunks = [] while (start &lt; totalSize) &#123; // æ ¹æ®é•¿åº¦æˆªå–æ¯æ¬¡éœ€è¦ä¸Šä¼ çš„æ•°æ® // Fileå¯¹è±¡ç»§æ‰¿è‡ªBlobå¯¹è±¡ï¼Œå› æ­¤åŒ…å«sliceæ–¹æ³• let blob = file.slice(start, end); chunks.push(blob) start = end; end = start + piece; &#125; return chunks&#125;å°†æ–‡ä»¶æ‹†åˆ†æˆpieceå¤§å°çš„åˆ†å—ï¼Œç„¶åæ¯æ¬¡è¯·æ±‚åªéœ€è¦ä¸Šä¼ è¿™ä¸€ä¸ªéƒ¨åˆ†çš„åˆ†å—å³å¯let file = document.querySelector(\"[name=file]\").files[0];const LENGTH = 1024 * 1024 * 0.1;let chunks = slice(file, LENGTH); // é¦–å…ˆæ‹†åˆ†åˆ‡ç‰‡chunks.forEach(chunk=&gt;&#123; let fd = new FormData(); fd.append(\"file\", chunk); post('/mkblk.php', fd)&#125;) æ–­ç‚¹ç»­ä¼ å³ä½¿å°†å¤§æ–‡ä»¶æ‹†åˆ†æˆåˆ‡ç‰‡ä¸Šä¼ ï¼Œæˆ‘ä»¬ä»éœ€ç­‰å¾…æ‰€æœ‰åˆ‡ç‰‡ä¸Šä¼ å®Œæ¯•ï¼Œåœ¨ç­‰å¾…è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å‘ç”Ÿä¸€ç³»åˆ—å¯¼è‡´éƒ¨åˆ†åˆ‡ç‰‡ä¸Šä¼ å¤±è´¥çš„æƒ…å½¢ï¼Œå¦‚ç½‘ç»œæ•…éšœã€é¡µé¢å…³é—­ç­‰ã€‚ç”±äºåˆ‡ç‰‡æœªå…¨éƒ¨ä¸Šä¼ ï¼Œå› æ­¤æ— æ³•é€šçŸ¥æœåŠ¡ç«¯åˆæˆæ–‡ä»¶ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥é€šè¿‡æ–­ç‚¹ç»­ä¼ æ¥è¿›è¡Œå¤„ç†ã€‚æ–­ç‚¹ç»­ä¼ æŒ‡çš„æ˜¯ï¼šå¯ä»¥ä»å·²ç»ä¸Šä¼ éƒ¨åˆ†å¼€å§‹ç»§ç»­ä¸Šä¼ æœªå®Œæˆçš„éƒ¨åˆ†ï¼Œè€Œæ²¡æœ‰å¿…è¦ä»å¤´å¼€å§‹ä¸Šä¼ ï¼ŒèŠ‚çœä¸Šä¼ æ—¶é—´ã€‚ç”±äºæ•´ä¸ªä¸Šä¼ è¿‡ç¨‹æ˜¯æŒ‰åˆ‡ç‰‡ç»´åº¦è¿›è¡Œçš„ï¼Œä¸” mkfile æ¥å£æ˜¯åœ¨æ‰€æœ‰åˆ‡ç‰‡ä¸Šä¼ å®Œæˆåç”±å®¢æˆ·ç«¯ä¸»åŠ¨è°ƒç”¨çš„ï¼Œå› æ­¤æ–­ç‚¹ç»­ä¼ çš„å®ç°ä¹Ÿååˆ†ç®€å•ï¼š åœ¨åˆ‡ç‰‡ä¸Šä¼ æˆåŠŸåï¼Œä¿å­˜å·²ä¸Šä¼ çš„åˆ‡ç‰‡ä¿¡æ¯å½“ä¸‹æ¬¡ä¼ è¾“ç›¸åŒæ–‡ä»¶æ—¶ï¼Œéå†åˆ‡ç‰‡åˆ—è¡¨ï¼Œåªé€‰æ‹©æœªä¸Šä¼ çš„åˆ‡ç‰‡è¿›è¡Œä¸Šä¼ æ‰€æœ‰åˆ‡ç‰‡ä¸Šä¼ å®Œæ¯•åï¼Œå†è°ƒç”¨ mkfile æ¥å£é€šçŸ¥æœåŠ¡ç«¯è¿›è¡Œæ–‡ä»¶åˆå¹¶ å› æ­¤é—®é¢˜å°±è½åœ¨äº†å¦‚ä½•ä¿å­˜å·²ä¸Šä¼ åˆ‡ç‰‡çš„ä¿¡æ¯äº†ï¼Œä¿å­˜ä¸€èˆ¬æœ‰ä¸¤ç§ç­–ç•¥ å¯ä»¥é€šè¿‡ locaStorage ç­‰æ–¹å¼ä¿å­˜åœ¨å‰ç«¯æµè§ˆå™¨ä¸­ï¼Œè¿™ç§æ–¹å¼ä¸ä¾èµ–äºæœåŠ¡ç«¯ï¼Œå®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ï¼Œç¼ºç‚¹åœ¨äºå¦‚æœç”¨æˆ·æ¸…é™¤äº†æœ¬åœ°æ–‡ä»¶ï¼Œä¼šå¯¼è‡´ä¸Šä¼ è®°å½•ä¸¢å¤±æœåŠ¡ç«¯æœ¬èº«çŸ¥é“å“ªäº›åˆ‡ç‰‡å·²ç»ä¸Šä¼ ï¼Œå› æ­¤å¯ä»¥ç”±æœåŠ¡ç«¯é¢å¤–æä¾›ä¸€ä¸ªæ ¹æ®æ–‡ä»¶ context æŸ¥è¯¢å·²ä¸Šä¼ åˆ‡ç‰‡çš„æ¥å£ï¼Œåœ¨ä¸Šä¼ æ–‡ä»¶å‰è°ƒç”¨è¯¥æ–‡ä»¶çš„å†å²ä¸Šä¼ è®°å½•ä¸‹é¢è®©æˆ‘ä»¬é€šè¿‡åœ¨æœ¬åœ°ä¿å­˜å·²ä¸Šä¼ åˆ‡ç‰‡è®°å½•ï¼Œæ¥å®ç°æ–­ç‚¹ä¸Šä¼ çš„åŠŸèƒ½ 12345678910111213141516171819202122232425262728293031323334353637383940 // è·å–å·²ä¸Šä¼ åˆ‡ç‰‡è®°å½•function getUploadSliceRecord(context)&#123; let record = localStorage.getItem(context) if(!record)&#123; return [] &#125;else &#123; try&#123; return JSON.parse(record) &#125;catch(e)&#123;&#125; &#125;&#125;// ä¿å­˜å·²ä¸Šä¼ åˆ‡ç‰‡function saveUploadSliceRecord(context, sliceIndex)&#123; let list = getUploadSliceRecord(context) list.push(sliceIndex) localStorage.setItem(context, JSON.stringify(list))&#125;// ç„¶åå¯¹ä¸Šä¼ é€»è¾‘ç¨ä½œä¿®æ”¹ï¼Œä¸»è¦æ˜¯å¢åŠ ä¸Šä¼ å‰æ£€æµ‹æ˜¯å·²ç»ä¸Šä¼ ã€ä¸Šä¼ åä¿å­˜è®°å½•çš„é€»è¾‘let context = createContext(file);// è·å–ä¸Šä¼ è®°å½•let record = getUploadSliceRecord(context);let tasks = [];chunks.forEach((chunk, index) =&gt; &#123; // å·²ä¸Šä¼ çš„åˆ‡ç‰‡åˆ™ä¸å†é‡æ–°ä¸Šä¼  if(record.includes(index))&#123; return &#125; let fd = new FormData(); fd.append(\"file\", chunk); fd.append(\"context\", context); fd.append(\"chunk\", index + 1); let task = post(\"/mkblk.php\", fd).then(res=&gt;&#123; // ä¸Šä¼ æˆåŠŸåä¿å­˜å·²ä¸Šä¼ åˆ‡ç‰‡è®°å½• saveUploadSliceRecord(context, index) record.push(index) &#125;) tasks.push(task);&#125;); æ­¤æ—¶ä¸Šä¼ æ—¶åˆ·æ–°é¡µé¢æˆ–è€…å…³é—­æµè§ˆå™¨ï¼Œå†æ¬¡ä¸Šä¼ ç›¸åŒæ–‡ä»¶æ—¶ï¼Œä¹‹å‰å·²ç»ä¸Šä¼ æˆåŠŸçš„åˆ‡ç‰‡å°±ä¸ä¼šå†é‡æ–°ä¸Šä¼ äº†ã€‚æœåŠ¡ç«¯å®ç°æ–­ç‚¹ç»­ä¼ çš„é€»è¾‘åŸºæœ¬ç›¸ä¼¼ï¼Œåªè¦åœ¨ getUploadSliceRecord å†…éƒ¨è°ƒç”¨æœåŠ¡ç«¯çš„æŸ¥è¯¢æ¥å£è·å–å·²ä¸Šä¼ åˆ‡ç‰‡çš„è®°å½•å³å¯ï¼Œå› æ­¤è¿™é‡Œä¸å†å±•å¼€ã€‚æ­¤å¤–æ–­ç‚¹ç»­ä¼ è¿˜éœ€è¦è€ƒè™‘åˆ‡ç‰‡è¿‡æœŸçš„æƒ…å†µï¼šå¦‚æœè°ƒç”¨äº† mkfile æ¥å£ï¼Œåˆ™ç£ç›˜ä¸Šçš„åˆ‡ç‰‡å†…å®¹å°±å¯ä»¥æ¸…é™¤æ‰äº†ï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸€ç›´ä¸è°ƒç”¨ mkfile çš„æ¥å£ï¼Œæ”¾ä»»è¿™äº›åˆ‡ç‰‡ä¸€ç›´ä¿å­˜åœ¨ç£ç›˜æ˜¾ç„¶æ˜¯ä¸å¯é çš„ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåˆ‡ç‰‡ä¸Šä¼ éƒ½æœ‰ä¸€æ®µæ—¶é—´çš„æœ‰æ•ˆæœŸï¼Œè¶…è¿‡è¯¥æœ‰æ•ˆæœŸï¼Œå°±ä¼šè¢«æ¸…é™¤æ‰ã€‚åŸºäºä¸Šè¿°åŸå› ï¼Œæ–­ç‚¹ç»­ä¼ ä¹Ÿå¿…é¡»åŒæ­¥åˆ‡ç‰‡è¿‡æœŸçš„å®ç°é€»è¾‘ã€‚ ä¸Šä¼ è¿›åº¦å’Œæš‚åœé€šè¿‡ xhr.upload ä¸­çš„ progress æ–¹æ³•å¯ä»¥å®ç°ç›‘æ§æ¯ä¸€ä¸ªåˆ‡ç‰‡ä¸Šä¼ è¿›åº¦ã€‚ä¸Šä¼ æš‚åœçš„å®ç°ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œé€šè¿‡ xhr.abort å¯ä»¥å–æ¶ˆå½“å‰æœªå®Œæˆä¸Šä¼ åˆ‡ç‰‡çš„ä¸Šä¼ ï¼Œå®ç°ä¸Šä¼ æš‚åœçš„æ•ˆæœï¼Œæ¢å¤ä¸Šä¼ å°±è·Ÿæ–­ç‚¹ç»­ä¼ ç±»ä¼¼ï¼Œå…ˆè·å–å·²ä¸Šä¼ çš„åˆ‡ç‰‡åˆ—è¡¨ï¼Œç„¶åé‡æ–°å‘é€æœªä¸Šä¼ çš„åˆ‡ç‰‡ã€‚ 123456xhr.upload.onprogress = function(event) &#123; if (event.lengthComputable) &#123; var percentComplete = (event.loaded / event.total) * 100 // å¯¹è¿›åº¦è¿›è¡Œå¤„ç† &#125;&#125; å…¶ä¸­äº‹ä»¶çš„ lengthComputable å±æ€§ä»£è¡¨æ–‡ä»¶æ€»å¤§å°æ˜¯å¦å¯çŸ¥ã€‚å¦‚æœ lengthComputable å±æ€§çš„å€¼æ˜¯ falseï¼Œé‚£ä¹ˆæ„å‘³ç€æ€»å­—èŠ‚æ•°æ˜¯æœªçŸ¥å¹¶ä¸” total çš„å€¼ä¸ºé›¶ã€‚ å¦‚æœæ˜¯ç°ä»£æµè§ˆå™¨ï¼Œå¯ä»¥ç›´æ¥é…åˆ HTML5 æä¾›çš„ å›¾ç‰‡é¢„è§ˆ12345678910111213141516function handleImageFile(file) &#123; var previewArea = document.getElementById('previewArea') var img = document.createElement('img') var fileInput = document.getElementById('myFile') var file = fileInput.files[0] img.file = file previewArea.appendChild(img) var reader = new FileReader() reader.onload = (function(aImg) &#123; return function(e) &#123; aImg.src = e.target.result &#125; &#125;)(img) reader.readAsDataURL(file)&#125; è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ FileReader æ¥å¤„ç†å›¾ç‰‡çš„å¼‚æ­¥åŠ è½½ã€‚åœ¨åˆ›å»ºæ–°çš„ FileReader å¯¹è±¡ä¹‹åï¼Œæˆ‘ä»¬å»ºç«‹äº† onload å‡½æ•°ï¼Œç„¶åè°ƒç”¨ readAsDataURL()å¼€å§‹åœ¨åå°è¿›è¡Œè¯»å–æ“ä½œã€‚å½“å›¾åƒæ–‡ä»¶åŠ è½½åï¼Œè½¬æ¢æˆä¸€ä¸ª data: URLï¼Œå¹¶ä¼ é€’åˆ° onload å›è°ƒå‡½æ•°ä¸­è®¾ç½®ç»™ img çš„ srcã€‚è¯¥å‡½æ•°å¯ä»¥å¸®åŠ©å®ç°é¢„è§ˆä»¥åŠå‹ç¼©å›¾ç‰‡çš„åŠŸèƒ½ 123456789å¦å¤–æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨å¯¹è±¡URLæ¥å®ç°é¢„è§ˆvar img = document.createElement('img')img.src = window.URL.createObjectURL(file)img.onload = function() &#123; // æ˜ç¡®åœ°é€šè¿‡è°ƒç”¨é‡Šæ”¾ window.URL.revokeObjectURL(this.src)&#125;previewArea.appendChild(img) å¤šæ–‡ä»¶æ”¯æŒ12345678910&lt;input id=\"myFile\" type=\"file\" multiple&gt;// æˆ‘ä»¬å°±èƒ½åœ¨æ‰“å¼€çš„æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†ä¸­é€‰ä¸­å¤šä¸ªæ–‡ä»¶äº†ã€‚ç„¶åä½ åœ¨ä»£ç é‡Œæ‹¿åˆ°çš„FileUploadå¯¹è±¡çš„fileså±æ€§å°±æ˜¯ä¸€ä¸ªé€‰ä¸­çš„å¤šæ–‡ä»¶çš„æ•°ç»„äº†ã€‚var fileInput = document.getElementById(\"myFile\");var files = fileInput.files;var formData = new FormData();for(var i = 0; i &lt; files.length; i++) &#123;var file = files[i];formData.append('files[]', file, file.name);&#125; FormDataçš„appendæ–¹æ³•æä¾›ç¬¬ä¸‰ä¸ªå¯é€‰å‚æ•°ç”¨äºæŒ‡å®šæ–‡ä»¶åï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªè¡¨å•é¡¹åï¼Œç„¶åç”¨æ–‡ä»¶ååŒºåˆ†ä¸Šä¼ çš„å¤šä¸ªæ–‡ä»¶ã€‚è¿™æ ·ä¹Ÿæ–¹ä¾¿å‰åå°çš„å¾ªç¯æ“ä½œã€‚ å›¾ç‰‡å‹ç¼©ä½¿ç”¨filereaderè¯»å–åˆ°å›¾ç‰‡ä¹‹åä½¿ç”¨canvaså‹ç¼©å›¾ç‰‡çš„å°ºå¯¸ 12345678910111213141516171819202122232425262728293031323334compress (data, callback) &#123; /** * å‹ç¼©å›¾ç‰‡ * @param data fileæ–‡ä»¶ æ•°æ®ä¼šä¸€ç›´å‘ä¸‹ä¼ é€’ * @param callback ä¸‹ä¸€æ­¥å›è°ƒ */ const &#123;compressionRatio&#125; = this.props; const imgFile = data.file; const img = new window.Image(); img.src = data.dataUrl; img.onload = function () &#123; const canvas = document.createElement('canvas'); const ctx = canvas.getContext('2d'); canvas.width = img.width; canvas.height = img.height; ctx.drawImage(img, 0, 0, canvas.width, canvas.height); let compressedDataUrl; if(data.compress)&#123; compressedDataUrl = canvas.toDataURL(imgFile.type, (compressionRatio / 100)); &#125; else &#123; compressedDataUrl = canvas.toDataURL(imgFile.type, 1); &#125; data.compressedDataUrl = compressedDataUrl; callback(data); &#125; &#125; ç»“åˆ xhr çš„ progress äº‹ä»¶å®ç°ä¸Šä¼ è¿›åº¦æ¡12345678910111213141516171819202122uploadImg (data, formData) &#123; // å¼€å§‹å‘é€è¯·æ±‚ä¸Šä¼  const _this = this; const xhr = new XMLHttpRequest(); const &#123;uploadUrl&#125; = this.props; // è¿›åº¦ç›‘å¬ xhr.upload.addEventListener('progress', _this.handleProgress.bind(_this, data.uuid), false);... xhr.open('POST', uploadUrl , true); xhr.send(formData); &#125; handleProgress (id, e) &#123; // ç›‘å¬ä¸Šä¼ è¿›åº¦ æ“ä½œDOM æ˜¾ç¤ºè¿›åº¦ const number = Number.parseInt((e.loaded / e.total) * 100) + \"%\"; const text = document.querySelector('#text-'+id); const progress = document.querySelector('#progress-'+id); text.innerHTML = number; progress.style.width = number; &#125; ä¸Šä¼ å¤šä¸ªæ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273*uploadGenerator (uploadQueue) &#123; /** * å¤šå¼ å›¾ç‰‡å¹¶å‘ä¸Šä¼ æ§åˆ¶è§„åˆ™ * ä¸Šä¼ 1-maxæ•°é‡çš„å›¾ç‰‡ * è®¾ç½®ä¸€ä¸ªæœ€å¤§ä¸Šä¼ æ•°é‡ * ä¿è¯æœ€å¤§åªæœ‰è¿™ä¸ªæ•°é‡çš„ä¸Šä¼ è¯·æ±‚ * */ // æœ€å¤šåªæœ‰ä¸‰ä¸ªè¯·æ±‚åœ¨ä¸Šä¼  const maxUploadSize = 3; if(uploadQueue.length &gt; maxUploadSize)&#123; const result = []; for(let i = 0; i &lt; uploadQueue.length; i++)&#123; // ç¬¬ä¸€æ¬¡return maxUploadSizeæ•°é‡çš„å›¾ç‰‡ if(i &lt; maxUploadSize)&#123; result.push(uploadQueue[i]); if(i === maxUploadSize - 1)&#123; yield result; &#125; &#125; else &#123; yield [uploadQueue[i]]; &#125; &#125; &#125; else &#123; yield uploadQueue.map((item)=&gt;(item)); &#125; &#125;// è°ƒç”¨// é€šè¿‡è¯¥å‡½æ•°è·å–æ¯æ¬¡è¦ä¸Šä¼ çš„æ•°ç»„ this.uploadGen = this.uploadGenerator(uploadQueue); // ç¬¬ä¸€æ¬¡è¦ä¸Šä¼ çš„æ•°é‡ const firstUpload = this.uploadGen.next(); // çœŸæ­£å¼€å§‹ä¸Šä¼ æµç¨‹ firstUpload.value.map((item)=&gt;&#123; /** * å›¾ç‰‡ä¸Šä¼ åˆ†æˆ5æ­¥ * å›¾ç‰‡è½¬dataUrl * å‹ç¼© * å¤„ç†æ•°æ®æ ¼å¼ * å‡†å¤‡æ•°æ®ä¸Šä¼  * ä¸Šä¼  * * å‰ä¸¤æ­¥æ˜¯å›è°ƒçš„å½¢å¼ åé¢æ˜¯åŒæ­¥çš„å½¢å¼ */ this.transformFileToDataUrl(item, this.compress, this.processData); &#125;);// ä¸Šä¼ ä¸‹ä¸€ä¸ª function uploadImgxhr.onreadystatechange = function () &#123; if (xhr.readyState === 4) &#123; if (xhr.status === 200 || xhr.status === 201) &#123; // ä¸Šä¼ æˆåŠŸ _this.handleUploadEnd(data, 2); &#125; else &#123; // ä¸Šä¼ å¤±è´¥ _this.handleUploadEnd(data, 3); &#125; &#125; &#125;;// function handleuploadend const nextUpload = this.uploadGen.next(); if(!nextUpload.done)&#123; nextUpload.value.map((item)=&gt;&#123; _this.transformFileToDataUrl(item, _this.compress, _this.processData); &#125;); &#125; ç§»åŠ¨ç«¯ä¸Šä¼ æ–‡ä»¶çš„å…¼å®¹æ€§é—®é¢˜éƒ¨åˆ†å®‰å“å¾®ä¿¡æµè§ˆå™¨æ— æ³•è§¦å‘ onchange äº‹ä»¶ï¼ˆç¬¬ä¸€æ­¥å°±ç‰¹ä¹ˆé‡åˆ°é—®é¢˜ï¼‰è¿™å…¶å®å®‰å“å¾®ä¿¡çš„ä¸€ä¸ªé—ç•™é—®é¢˜ã€‚ æŸ¥çœ‹è®¨è®º è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼šinput æ ‡ç­¾ &lt;input type=â€œfileâ€ name=â€imageâ€ accept=â€image/gif, image/jpeg, image/pngâ€&gt;è¦å†™æˆå°±æ²¡é—®é¢˜äº†ã€‚éƒ¨åˆ†å®‰å“å¾®ä¿¡ä¸æ”¯æŒ Blob å¯¹è±¡éƒ¨åˆ† Blob å¯¹è±¡ append è¿› FormData ä¸­å‡ºç°é—®é¢˜iOS 8 ä¸æ”¯æŒ new File Constructorï¼Œä½†æ˜¯æ”¯æŒ input é‡Œçš„ file å¯¹è±¡ã€‚iOS ä¸Šç»è¿‡å‹ç¼©åçš„å›¾ç‰‡å¯ä»¥ä¸Šä¼ æˆåŠŸ ä½†æ˜¯ size æ˜¯ 0 æ— æ³•æ‰“å¼€ã€‚éƒ¨åˆ†æ‰‹æœºå‡ºç°å›¾ç‰‡ä¸Šä¼ è½¬æ¢é—®é¢˜ï¼Œè¯·ç§»æ­¥ã€‚å®‰å“æ‰‹æœºä¸æ”¯æŒå¤šé€‰ï¼ŒåŸå› åœ¨äº multiple å±æ€§æ ¹æœ¬å°±ä¸æ”¯æŒã€‚å¤šå¼ å›¾ç‰‡è½¬ base64 æ—¶å€™å¡é¡¿ï¼Œå› ä¸ºè°ƒç”¨äº† cpu è¿›è¡Œäº†è®¡ç®—ã€‚ä¸Šä¼ å›¾ç‰‡å¯ä»¥ä½¿ç”¨ base64 ä¸Šä¼ æˆ–è€… formData ä¸Šä¼  è§£å†³å¯¹ç­– å‚è€ƒæ–‡ç«  ç§»åŠ¨ç«¯ H5 å®ç°å›¾ç‰‡ä¸Šä¼  æ¯æ—¥å°çŸ¥è¯†ç‚¹ é€‰å–ç¬¬ä¸€ä¸ªåˆ°å€’æ•°ç¬¬äºŒä¸ªå…ƒç´  aaa.slice(0,-1)","categories":[],"tags":[{"name":"åŸºç¡€æŠ€èƒ½","slug":"åŸºç¡€æŠ€èƒ½","permalink":"https://ashleyblog.xyz/tags/åŸºç¡€æŠ€èƒ½/"}]}]}